var dbnextFundsModule=angular.module("dbnext-funds",["ebanking-shared"]).config(["translationsLoaderProvider","$urlRouterProvider","guiProvider","pathServiceProvider","stateServiceProvider","resourceViewServiceProvider","resourceCreationFormServiceProvider",function(a,b,c,d,e,f,g){var h="de",i="dbnext",j="funds",k=i+"."+j,l=i+"-"+j,m=h+"."+j;webComponentRegistry[l].simpleName=j,webComponentRegistry[l].startState=m+".content.active",c.registerElement(l),c.registerElement(l,"menu");var n={resourceType:"funds",linkTextKey:"db.funds.external_link.details",linkEntryState:m+".content.details"};f.registerResourceView(n);var o={resourceType:"funds",linkTextKey:"db.funds.external_link.new_transfer",linkEntryState:m+".form."};g.registerResourceCreationForm(o),a.addTranslationsPath(d.generateRootPath(l)+"/i18n/messages_{{language}}.json"),b.when("/"+h+"/"+j,"/"+h+"/"+j+"/content"),e.state(h,{url:"/"+h,"abstract":!0,template:"<div ui-view></div>"}).state(m,{url:"/"+j,"abstract":!0,templateUrl:d.generateTemplatePath(l)+"/views/registersView.html",controller:k+".ViewController"}).state(m+".content",{url:"/content",templateUrl:d.generateTemplatePath(l)+"/views/registersContent.html",controller:k+".ContentController"}).state(m+".fund-details",{url:"/details",templateUrl:d.generateTemplatePath(l)+"/views/registerDetails.html",controller:k+".FundsDetailsController"}).state(m+".change-account",{url:"/change-account",templateUrl:d.generateTemplatePath(l)+"/views/registerChangeAccount.html",controller:k+".RegisterChangeAccountController"}).state(m+".content.active",{url:"/active",templateUrl:d.generateTemplatePath(l)+"/views/registersContentTab.html",controller:k+".ActiveFundsContentController"}).state(m+".content.inactive",{url:"/inactive",templateUrl:d.generateTemplatePath(l)+"/views/registersContentTab.html",controller:k+".InActiveFundsContentController"}).state(m+".tfi",{url:"/tfi",templateUrl:d.generateTemplatePath(l)+"/views/tfiContentTab.html",controller:k+".FundsTFIContentController"}).state(m+".offer",{url:"/offer",templateUrl:d.generateTemplatePath(l)+"/views/tfiContentTab.html",controller:k+".FundsTFIContentController"}).state(m+".tfi-offer",{url:"/tfi-offer",templateUrl:d.generateTemplatePath(l)+"/views/tfiOfferContentTab.html",controller:k+".FundsTFIOfferContentController"}).state(m+".details",{url:"/tfi-details",templateUrl:d.generateTemplatePath(l)+"/views/tfiOfferDetails.html",controller:k+".FundsTFIOfferDetails"}).state(m+".tfi-offer-history",{url:"/tfi-offer-history",templateUrl:d.generateTemplatePath(l)+"/views/tfiOfferHistoryContentTab.html",controller:k+".FundsTFIOfferHistoryContentController"}).state(m+".opening",{url:"/opening",templateUrl:d.generateTemplatePath(l)+"/views/registersOpeningContent.html",controller:k+".OpeningContentController"}).state(m+".opening-details",{url:"/:id/transactions-opening-details",templateUrl:d.generateTemplatePath(l)+"/views/transactionDetails.html",controller:k+".FundsTransactionDetailsController"}).state(m+".opening.pending",{url:"/pending",templateUrl:d.generateTemplatePath(l)+"/views/registersOpeningContentTab.html",controller:k+".FundsOpeningContentTabController"}).state(m+".opening.rejected",{url:"/rejected",templateUrl:d.generateTemplatePath(l)+"/views/registersOpeningContentTab.html",controller:k+".FundsOpeningContentTabController"}).state(m+".opening.canceled",{url:"/canceled",templateUrl:d.generateTemplatePath(l)+"/views/registersOpeningContentTab.html",controller:k+".FundsOpeningContentTabController"}).state(m+".registerForm",{url:"/registers/form",templateUrl:d.generateTemplatePath(l)+"/views/registerForm.html",controller:k+".RegisterFormController","abstract":!0}).state(m+".registerForm.register",{url:"/register",templateUrl:d.generateTemplatePath(l)+"/views/registerFormFields.html"}).state(m+".registerAcceptForm",{url:"/:registerOrderId/accept",templateUrl:d.generateTemplatePath(l)+"/views/registerFormAccept.html",controller:k+".RegisterAcceptFormController"}).state(m+".acquisitionForm",{url:"/acquisition/form",templateUrl:d.generateTemplatePath(l)+"/views/acquisitionForm.html","abstract":!0}).state(m+".acquisitionForm.acquisition",{url:"/acquisition",templateUrl:d.generateTemplatePath(l)+"/views/acquisitionFormFields.html",controller:k+".AcquisitionFormController"}).state(m+".acquisitionForm.accept",{url:"/:acquisitionOrderId/accept",templateUrl:d.generateTemplatePath(l)+"/views/acquisitionFormAccept.html",controller:k+".AcquisitionAcceptFormController"}).state(m+".acquittalForm",{url:"/acquittal/form",templateUrl:d.generateTemplatePath(l)+"/views/acquittalForm.html",controller:k+".AcquittalFormController","abstract":!0}).state(m+".acquittalForm.acquittal",{url:"/acquittal",templateUrl:d.generateTemplatePath(l)+"/views/acquittalFormFields.html"}).state(m+".acquittalFormAccept",{url:"/:acquittalOrderId/acquittal-accept",templateUrl:d.generateTemplatePath(l)+"/views/acquittalFormAccept.html",controller:k+".AcquittalAcceptFormController"}).state(m+".convertUnitsForm",{url:"/conversion",templateUrl:d.generateTemplatePath(l)+"/views/convertUnitsForm.html","abstract":!0,controller:k+".ConvertUnitsFormController"}).state(m+".convertUnitsForm.form",{url:"/:registerId/form",templateUrl:d.generateTemplatePath(l)+"/views/convertUnitsFormFields.html"}).state(m+".convertUnitsAccept",{url:"/:conversionOrderId/convert-accept",templateUrl:d.generateTemplatePath(l)+"/views/convertUnitsFormAccept.html",controller:k+".ConvertUnitsAcceptFormController"}).state(m+".dispositions",{url:"/dispositions",templateUrl:d.generateTemplatePath(l)+"/views/dispositionContent.html",controller:k+".FundsDispositionContentController"}).state(m+".dispositions.realization",{url:"/dispositions-realization",templateUrl:d.generateTemplatePath(l)+"/views/dispositionContentTab.html",controller:k+".FundsDispositionContentTabController"}).state(m+".dispositions.rejected",{url:"/dispositions-rejected",templateUrl:d.generateTemplatePath(l)+"/views/dispositionContentTab.html",controller:k+".FundsDispositionContentTabController"}).state(m+".dispositions.done",{url:"/dispositions-done",templateUrl:d.generateTemplatePath(l)+"/views/dispositionContentTab.html",controller:k+".FundsDispositionContentTabController"}).state(m+".dispositions.canceled",{url:"/dispositions-canceled",templateUrl:d.generateTemplatePath(l)+"/views/dispositionContentTab.html",controller:k+".FundsDispositionContentTabController"}).state(m+".dispositions-details",{url:"/dispositions-details",templateUrl:d.generateTemplatePath(l)+"/views/dispositionDetails.html",controller:k+".FundsDispositionDetailsController"}).state(m+".transactions",{url:"/transactions",templateUrl:d.generateTemplatePath(l)+"/views/transactionsContent.html",controller:k+".FundsTransactionContentController"}).state(m+".transactions.pending",{url:"/:id/pending",templateUrl:d.generateTemplatePath(l)+"/views/transactionsContentTab.html",controller:k+".FundsTransactionContentTabController"}).state(m+".transactions.rejected",{url:"/:id/rejected",templateUrl:d.generateTemplatePath(l)+"/views/transactionsContentTab.html",controller:k+".FundsTransactionContentTabController"}).state(m+".transactions.realized",{url:"/:id/realized",templateUrl:d.generateTemplatePath(l)+"/views/transactionsContentTab.html",controller:k+".FundsTransactionContentTabController"}).state(m+".transactions.canceled",{url:"/:id/canceled",templateUrl:d.generateTemplatePath(l)+"/views/transactionsContentTab.html",controller:k+".FundsTransactionContentTabController"}).state(m+".transactions-details",{url:"/:id/transactions-details",templateUrl:d.generateTemplatePath(l)+"/views/transactionDetails.html",controller:k+".FundsTransactionDetailsController"}).state(m+".cancelTransactionForm",{url:"/:transactionId/cancel",templateUrl:d.generateTemplatePath(l)+"/views/cancellationTransactionForm.html",controller:k+".CancelTransactionFormController"})}]).run(["$rootScope","$state",function(a,b){a.$on("$stateChangeStart",function(a,c,d,e,f){var g=e.name,h=c.name;""!=g&&angular.isDefined(c.previous)&&c.previous.indexOf(g)==-1&&(a.preventDefault(),h.indexOf(webComponentRegistry["dbnext-funds"].simpleName)!=-1&&b.go(webComponentRegistry["dbnext-funds"].startState))})}]);dbnextFundsModule.controller("dbnext.funds.AcquisitionAcceptFormController",["$scope","$state","fundsService","authorizationsService","viewStateService","notificationService","pathService","formService","userService",function(a,b,c,d,e,f,g,h,i){var j=e.getInitialState(b.current.name);null!=j&&(a.showDiscount=j.showDiscount,a.registerNo=j.registerNo),a.acquisitionPromise=c.getFundTransaction(b.params.acquisitionOrderId).then(function(b){a.acquistionDetails=b,a.auth={},a.authorizedDetails={isAuthorized:!1},j.isFromAuthorized&&(a.authorizedDetails.isAuthorized=!0,i.getIdentityDetails().then(function(d){var e={registerId:b.transactionDetails.sourcePartRegister.registerId,customerId:d.id};c.getPlenipotentiary(e).then(function(b){a.authorizedDetails.plenipotentiaryDetails=b})}))}),a.pathPrefix=g.generateTemplatePath("dbnext-funds"),a.accept=function(c){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),c.$valid?(a.errorCode=null,d.action({authenticationAttemptId:a.auth.authenticationAttemptId,credentials:a.auth.credentials,transactionId:b.params.acquisitionOrderId},"accept",a.acquistionDetails).then(function(){e.resetInitialState("de.funds.acquisitionForm.acquistion"),f.showUnitsAquisitionDialog({text:{title:"db.funds.acquisition.step2.confirmation.title",confirmationText:"db.funds.acquisition.step2.confirmation.confirmation_text",back:"db.funds.acquisition.step2.confirmation.back"},state:{dashboard:"de.dashboard"}}),b.go("de.funds.content.active")},function(b){var c=/([a-zA-Z])/;a.errorCode=c.test(b.text)?"":b.text,h.scrollToError("input")})):void h.dirtyFields(c)},a.back=function(){b.go("de.funds.acquisitionForm.acquisition")}}]),dbnextFundsModule.controller("dbnext.funds.AcquisitionFormController",["$scope","$state","$log","formService","viewStateService","fundsService","userService",function(a,b,c,d,e,f,g){a.formData={formModel:{}};var h=e.getInitialState(b.current.name);if(null!=h){a.register=h.register,a.formData.registerNo=h.register.registerNo;var i=a.register.registerStates[0].fundId;f.getTFIOffer(i).then(function(b){if(a.fundDetails=b,a.formData.minAcquisitionValue=b.minAcquisitionValue,a.formData.currencyAcquisition=b.currency,b.eligibleForPromotion&&(a.formData.formModel.registryDiscount=!!h.acquisitionForm&&h.acquisitionForm.formModel.registryDiscount),angular.isDefined(e.getFormData("acquisitionForm"))){var c=e.getFormData("acquisitionForm").formModel;a.formData.formModel.amount=c.amount,a.formData.formModel.executionDate=new Date(c.executionDate),a.formData.formModel.registerId=c.registerId}},function(b){c.error("Error getting fund details"),a.fundDetails={}})}a.$watch("formData.amount",function(b,c){void 0!=b&&null!=b&&b!=c&&(a.formData.minAcquisitionValue=b.minAcquisitionValue,a.formData.currencyAcquisition=b.currency)}),a.maxDate=new Date((new Date).getFullYear()+2,11,31),a.submit=function(c){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),c.$valid?(a.formData.showDiscount=a.fundDetails.eligibleForPromotion,e.resetInitialState(b.current.name),e.setInitialState(b.current.name,{register:a.register}),e.appendFormData("acquisitionForm",a.formData),e.setInitialState("de.funds.acquisitionForm.accept",angular.extend({isFromAuthorized:h.isFromAuthorized},a.formData)),a.formData.formModel.registerId=a.register.registerId,f.action(a.formData.formModel,"purchase",a.register).then(function(a){b.go("de.funds.acquisitionForm.accept",{acquisitionOrderId:a.content})},function(a){null!=a&&null!=a.errors&&d.scrollToError(a.errors[0].field)})):void d.dirtyFields(c)}}]),dbnextFundsModule.controller("dbnext.funds.AcquittalAcceptFormController",["$scope","$state","$log","formService","viewStateService","fundsService","fundsTransactionsService","initialState","pathService","notificationService",function(a,b,c,d,e,f,g,h,i,j){var h=e.getInitialState(b.current.name);null!=h&&(a.registerNo=h.registerNo),a.registerTransactionPromise=f.getFundTransaction(b.params.acquittalOrderId).then(function(b){a.acquittalDetails=b,a.fundPromise=f.getTFIOffer(a.acquittalDetails.transactionDetails.sourcePartRegister.fundId).then(function(b){a.fundDetails=b,a.tfiPromise=f.getTFI(a.fundDetails.tfiId).then(function(b){a.tfiDetails=b})}),a.auth={},a.text={auth_method:"db.funds.register.new.step2.row.auth.label.",no_auth_required:"db.funds.register.new.step2.row.auth.no_authorization_required",tan_validate_required:"db.funds.register.new.step2.row.auth.tan.validate.required",sms_validate_required:"db.funds.register.new.step2.row.auth.sms.validate.required",token_validate_required:"db.funds.register.new.step2.row.auth.token.validate.required",input_placeholders:"db.funds.register.new.step2.row.auth.placeholder.",error_code_validate:"db.config.auth.error_code.validate."}}),a.pathPrefix=i.generateTemplatePath("dbnext-funds"),a.accept=function(c){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),c.$valid?(a.errorCode=null,f.fundTransactionAction({authenticationAttemptId:a.auth.authenticationAttemptId,credentials:a.auth.credentials,transactionId:b.params.registerOrderId},"accept",a.acquittalDetails).then(function(){e.resetInitialState("de.funds.acquittalForm.acquittal"),j.showRegisterAcquittedDialog({text:{title:"db.funds.acquittal.step2.confirmation.title",message:"db.funds.acquittal.step2.confirmation.confirmation_text",back:"db.funds.acquittal.step2.confirmation.back"},state:{dashboard:"de.dashboard"}}),b.go("de.funds.content.active")},function(b){var c=/([a-zA-Z])/;a.errorCode=c.test(b.text)?"":b.text,d.scrollToError("input")})):void d.dirtyFields(c)},a.back=function(){b.go("de.funds.acquittalForm.acquittal")}}]),dbnextFundsModule.controller("dbnext.funds.AcquittalFormController",["$scope","$state","$stateParams","formService","viewStateService","fundsService","$log",function(a,b,c,d,e,f,g){a.formData={},a.formData.formModel={},a.formData.amountFieldDisabled=!0,a.formData.numerFieldDisabled=!0,a.formData.amountFieldRequired=!1,a.formData.numerFieldRequired=!1,a.currentTabState=e.getInitialState("currentTabState"),null==a.currentTabState&&(a.currentTabState={stateName:"de.funds.content.active"});var h=e.getInitialState(b.current.name);null!=h&&null!=h.register?(a.formData.register=h.register,a.formData.registerNo=h.register.registerNo,a.formData.tfi_offer=h.register.registerStates[0].fundName,angular.isDefined(e.getFormData("acquittalForm"))&&(a.formData=e.getFormData("acquittalForm")||{formModel:{}})):f.get(b.params.registerId).then(function(b){a.formData.register=b,a.formData.registerNo=b.registerNo,a.formData.tfi_offer=b.registerStates[0].fundName},function(b){g.error("Error getting register details"),a.formData.formModel={}}),a.submit=function(c){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),c.$valid?(e.resetInitialState(b.current.name),e.setInitialState(b.current.name,{register:a.formData.register}),e.appendFormData("acquittalForm",a.formData),e.setInitialState("de.funds.acquittalFormAccept",a.formData),a.formData.formModel.registerId=a.formData.register.registerId,f.action(a.formData.formModel,"acquit",a.formData.register).then(function(a){b.go("de.funds.acquittalFormAccept",{acquittalOrderId:a.content})},function(a){null!=a&&null!=a.errors&&d.scrollToError(a.errors[0].field)})):void d.dirtyFields(c)},a.$watch("formData.formModel.acquittalType",function(b,c){if(null!=b&&b!=c){switch(b){case"FULL":a.formData.amountFieldDisabled=!0,a.formData.numerFieldDisabled=!0,a.formData.amountFieldRequired=!1,a.formData.numerFieldRequired=!1,a.formData.formModel.amount=null,a.formData.formModel.numberOfUnits=null;break;case"AMOUNT":a.formData.amountFieldDisabled=!1,a.formData.numerFieldDisabled=!0,a.formData.formModel.numberOfUnits=null,a.formData.amountFieldRequired=!0,a.formData.numerFieldRequired=!1;break;case"UNITS":a.formData.amountFieldDisabled=!0,a.formData.numerFieldDisabled=!1,a.formData.formModel.amount=null,a.formData.amountFieldRequired=!1,a.formData.numerFieldRequired=!0}a.acquittalForm.$setPristine()}})}]),ebComponentModule.directive("acqittalUnitValidators",["$timeout","domService",function(a,b){return{require:"ngModel",link:function(a,b,c,d){var e=1e-6;c.$observe("minUnits",function(a){var b=parseFloat(a.replace(",","."));"0"!=b&&(e=b||1e-6),d.$validate()}),d.$validators.minUnits=function(b,c){if(!a.isEditModeUnits){if(void 0!==c&&null!=c&&""!=c&&c.replace){var d=c.replace(",",".").replace(/\s/g,"").replace(/,(..?)$/,".\\1");if(!isNaN(d)){var f=parseFloat(d);return f>=e}}return!0}},d.$validators.noDigits=function(b,c){if(!a.isEditModeUnits){if(void 0!==c&&null!=c&&""!=c&&c.replace){var d=c.replace(/\D/g,"").length;return d>0}return!0}},a.$watch("isEditModeUnits",function(a,b){a===!1&&d.$validate()},!0)}}}]),dbnextFundsModule.controller("dbnext.funds.CancelTransactionFormController",["$scope","$state","$log","formService","viewStateService","fundsService","fundsTransactionsService","initialState","pathService","notificationService","$q",function(a,b,c,d,e,f,g,h,i,j,k){a.pathPrefix=i.generateTemplatePath("dbnext-funds"),a.backState="";var h=e.getInitialState(b.current.name);null!=h&&(a.backState=h.backState,console.log("$backState -> ",h.backState),a.transactionDetailsPromise=f.getFundTransaction(h.transactionId).then(function(b){a.transaction=b,a.auth={},a.text={auth_method:"db.funds.register.new.step2.row.auth.label.",no_auth_required:"db.funds.register.new.step2.row.auth.no_authorization_required",tan_validate_required:"db.funds.register.new.step2.row.auth.tan.validate.required",sms_validate_required:"db.funds.register.new.step2.row.auth.sms.validate.required",token_validate_required:"db.funds.register.new.step2.row.auth.token.validate.required",input_placeholders:"db.funds.register.new.step2.row.auth.placeholder.",error_code_validate:"db.config.auth.error_code.validate."}},function(a){return c.error("Error getting disposition details"),k.reject(a)})),a.submit=function(c){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),c.$valid?(a.errorCode=null,f.fundTransactionAction({authenticationAttemptId:a.auth.authenticationAttemptId,credentials:a.auth.credentials,transactionId:b.params.registerOrderId},"create_cancellation_transaction",a.transaction).then(function(c){e.resetInitialState(b.current.name),j.showTransactionCancelledDialog({text:{title:"db.funds.transactions.cancellation.confirmation.title",message:"db.funds.transactions.cancellation.confirmation.confirmation_text",back:"db.funds.transactions.cancellation.confirmation.back"},state:{dashboard:"de.dashboard"}}),b.go(a.backState)},function(b){var c=/([a-zA-Z])/;return a.errorCode=c.test(b.text)?"":b.text,null!=b&&null!=b.errors&&d.scrollToError(b.errors[0].field),k.reject()})):void d.dirtyFields(c)},a.back=function(){b.go(a.backState)}}]),dbnextFundsModule.controller("dbnext.funds.ActiveFundsContentController",["searchWrapperService","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q","fundFatcaValidationService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){c.fundsSettings={},c.$parent.selected={},c.fundList={},c.itemsStorageParams={statusFundCriteria:"rejected",fundSummaryScopeType:"changed"};var r=function(){c.fundParticipantList.content=c.fundParticipantList.content.map(function(b){return angular.extend(b,a.wrapFundsFields(b))})},s=function(){c.fundAuthorizedList.content=c.fundAuthorizedList.content.map(function(b){return angular.extend(b,a.wrapFundsFields(b,!0))})};c.filterParams=o.getInitialState(l.current.name),null==c.filterParams&&(c.filterParams={registerStatusCriteria:"active"});var t=function(){if(null!=c.fundAuthorizedList||null!=c.fundParticipantList){c.fundList={},c.fundAuthorizedList&&c.fundAuthorizedList.content&&(c.fundList.content=c.fundAuthorizedList.content.concat(c.fundParticipantList.content)),c.fundList.summary=[];for(var a=i("filter")(c.fundList.content,{wrappedText:c.filterOptions.fundName}),b={},d=0,e=a.length-1;e>=0;e--){var f=a[e];if(void 0!=b[f.registerStates[0].currency]){var g=b[f.registerStates[0].currency];c.fundList.summary[g].valuation+=f.registerStates[0].valuation}else{b[f.registerStates[0].currency]=d,d++;var h={};h.valuation=f.registerStates[0].valuation,h.currency=f.registerStates[0].currency,c.fundList.summary.push(h)}}}};c.searchFundListParticipant=function(a){var b={};return angular.copy(a,b),b.partyRelationCriteria="participant",b.pageSize=1e7,f.search(b).then(function(a){c.fundParticipantList=a,r()},function(a){e.error("Error getting funds list"),c.fundParticipantList=[]})},c.searchFundListAuthorized=function(a){var b={};return angular.copy(a,b),b.partyRelationCriteria="authorized",b.pageSize=1e7,f.search(b).then(function(a){c.fundAuthorizedList=a,s()},function(a){e.error("Error getting funds list"),c.fundAuthorizedList=[]})},c.searchFundSummary=function(a){g.search(a).then(function(a){c.rejectedTabUnseenAmount.count=0,angular.forEach(a.content,function(a){c.rejectedTabUnseenAmount.count+=a.quantity})})},c.$watch("filterOptions.fundName",function(a,b){t()}),c.searchItemsFromStorage=function(a){},c.promises=[],c.promises.push(c.searchFundListParticipant(c.filterParams)),c.promises.push(c.searchFundListAuthorized(c.filterParams)),c.allPromises=p.all(c.promises).then(function(){t(),c.hasAuthorizedFunds=c.fundAuthorizedList.content.length>0}),c.searchItemsFromStorage("dbnext-funds.settings"),c.prepareOpening=function(){o.resetInitialState("de.funds.opening.pending"),o.setInitialState("de.funds.opening.pending",{backState:"de.funds.content.active"}),l.go("de.funds.opening.pending")},c.prepareAcquisition=function(a){q.validateFatcaCompletness(function(){o.resetInitialState("de.funds.acquisitionForm.acquisition"),o.setInitialState("de.funds.acquisitionForm.acquisition",{backState:"de.funds.content.active",register:a}),l.go("de.funds.acquisitionForm.acquisition")})},c.prepareAcquisitionFromAuthorized=function(a){q.validateFatcaCompletness(function(){o.resetInitialState("de.funds.acquisitionForm.acquisition"),o.setInitialState("de.funds.acquisitionForm.acquisition",{backState:"de.funds.content.active",register:a,isFromAuthorized:!0}),l.go("de.funds.acquisitionForm.acquisition")})},c.prepareDetails=function(a){o.resetInitialState("de.funds.fund-details"),o.setInitialState("de.funds.fund-details",{backState:"de.funds.content.active",fund:a}),l.go("de.funds.fund-details")},c.prepareDetailsAuthorized=function(a){o.resetInitialState("de.funds.fund-details"),o.setInitialState("de.funds.fund-details",{authorized:!0,backState:"de.funds.content.active",fund:a}),l.go("de.funds.fund-details")}}]),dbnextFundsModule.controller("dbnext.funds.ContentController",["pathService","$scope","$rootScope","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","initialState","formService","fundFatcaValidationService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.fundsSettings={},b.$parent.selected={},b.fundList={},b.filterOptions={fundName:""},b.currentTabState={},b.rejectedTabUnseenAmount={count:0},b.pathPrefix=a.generateTemplatePath("dbnext-funds");var q=m.getInitialState("de.funds");null!=q&&null!=q.fundsTermsAccepted?b.fundsTermsAccepted=q.fundsTermsAccepted:b.fundsTermsAccepted=!1,b.stateName=j.current.name,b.details=!1,b.tabs=[{id:"ACTIVE",label:"db.funds.content.tabs.active",state:"de.funds.content.active"},{id:"INACTIVE",label:"db.funds.content.tabs.inactive",state:"de.funds.content.inactive"}],angular.isUndefined(b.currentTabState.stateName)&&(b.currentTabState.stateName=b.stateName),b.$on("$stateChangeStart",function(a,c,d,e,f){if("de.funds.fund-details"==c.name)b.currentTabState.stateName=e.name,m.setInitialState("currentTabState",b.currentTabState),b.details=!0;else{if(c.name.indexOf("de.funds.convertUnitsForm")!=-1)return;if(c.name.indexOf("de.funds.transactions.list")!=-1)return;"de.funds.fund-details"!=e.name||(b.details=!1)}}),b.emitTabChange=function(a){b.$broadcast("changeTab",{direction:a})},m.resetInitialState("currentTabState"),b.getHistory=function(a){m.resetInitialState("de.funds.transactions.pending"),m.setInitialState("de.funds.transactions.pending",{fund:a,backState:j.current.name}),j.go("de.funds.transactions.pending",{id:a.registerId})},b.prepareConversion=function(a){p.validateFatcaCompletness(function(){m.resetInitialState("de.funds.convertUnitsForm.form"),m.setInitialState("de.funds.convertUnitsForm.form",{register:a,backState:j.current.name}),j.go("de.funds.convertUnitsForm.form",{registerId:a.registerId})})},b.prepareConversionFromAuthorized=function(a){p.validateFatcaCompletness(function(){m.resetInitialState("de.funds.convertUnitsForm.form"),m.setInitialState("de.funds.convertUnitsForm.form",{register:a,backState:j.current.name,isFromAuthorized:!0}),j.go("de.funds.convertUnitsForm.form",{registerId:a.registerId})})},b.prepareAcquittance=function(a){p.validateFatcaCompletness(function(){m.resetInitialState("de.funds.acquittalForm.acquittal"),m.setInitialState("de.funds.acquittalForm.acquittal",{register:a,backState:j.current.name}),j.go("de.funds.acquittalForm.acquittal",{registerId:a.registerId})})},b.prepareDispositions=function(a){m.resetInitialState("de.funds.dispositions.realization"),m.setInitialState("de.funds.dispositions.realization",{register:a,backState:j.current.name}),j.go("de.funds.dispositions.realization")},b.submitAcceptFundsTerms=function(a){angular.element(document.querySelector(":focus")).triggerHandler("blur"),a.$valid?(m.setInitialState("de.funds",{fundsTermsAccepted:!0}),b.fundsTermsAccepted=!0):o.dirtyFields(a)}}]),dbnextFundsModule.controller("dbnext.funds.InActiveFundsContentController",["searchWrapperService","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){c.fundsSettings={},c.$parent.selected={},c.fundList={},c.itemsStorageParams={statusFundCriteria:"rejected",fundSummaryScopeType:"changed"};var q=function(){c.fundParticipantList.content=c.fundParticipantList.content.map(function(b){return angular.extend(b,a.wrapFundsFields(b))})},r=function(){c.fundAuthorizedList.content=c.fundAuthorizedList.content.map(function(b){return angular.extend(b,a.wrapFundsFields(b,!0))})};c.filterParams=o.getInitialState(l.current.name),null==c.filterParams&&(c.filterParams={registerStatusCriteria:"inactive"});var s=function(){if(null!=c.fundAuthorizedList||null!=c.fundParticipantList){c.fundList={},c.fundAuthorizedList&&c.fundAuthorizedList.content&&(c.fundList.content=c.fundAuthorizedList.content.concat(c.fundParticipantList.content)),c.fundList.summary=[];for(var a=i("filter")(c.fundList.content,{wrappedText:c.filterOptions.fundName}),b={},d=0,e=a.length-1;e>=0;e--){var f=a[e];if(void 0!=b[f.registerStates[0].currency]){var g=b[f.registerStates[0].currency];c.fundList.summary[g].valuation+=f.registerStates[0].valuation}else{b[f.registerStates[0].currency]=d,d++;var h={};h.valuation=f.registerStates[0].valuation,h.currency=f.registerStates[0].currency,c.fundList.summary.push(h)}}}};c.searchFundListParticipant=function(a){var b={};return angular.copy(a,b),b.partyRelationCriteria="participant",b.pageSize=1e7,f.search(b).then(function(a){c.fundParticipantList=a,q()},function(a){e.error("Error getting funds list"),c.fundParticipantList=[]})},c.searchFundListAuthorized=function(a){var b={};return angular.copy(a,b),b.partyRelationCriteria="authorized",b.pageSize=1e7,f.search(b).then(function(a){c.fundAuthorizedList=a,r()},function(a){e.error("Error getting funds list"),c.fundAuthorizedList=[]})},c.searchFundSummary=function(a){g.search(a).then(function(a){c.rejectedTabUnseenAmount.count=0,angular.forEach(a.content,function(a){c.rejectedTabUnseenAmount.count+=a.quantity})})},c.$watch("filterOptions.fundName",function(a,b){s()}),c.searchItemsFromStorage=function(a){},c.promises=[],c.promises.push(c.searchFundListParticipant(c.filterParams)),c.promises.push(c.searchFundListAuthorized(c.filterParams)),c.allPromises=p.all(c.promises).then(function(){s(),c.hasAuthorizedFunds=c.fundAuthorizedList.content.length>0}),c.searchItemsFromStorage("dbnext-funds.settings"),c.prepareOpening=function(a){o.resetInitialState("de.funds.opening.pending"),o.setInitialState("de.funds.opening.pending",{backState:"de.funds.content.inactive"}),l.go("de.funds.opening.pending")},c.prepareDetails=function(a){o.resetInitialState("de.funds.fund-details"),o.setInitialState("de.funds.fund-details",{backState:"de.funds.content.inactive",fund:a}),l.go("de.funds.fund-details")},c.prepareDetailsAuthorized=function(a){o.resetInitialState("de.funds.fund-details"),o.setInitialState("de.funds.fund-details",{authorized:!0,backState:"de.funds.content.inactive",fund:a}),l.go("de.funds.fund-details")}}]),dbnextFundsModule.controller("dbnext.funds.ConvertUnitsAcceptFormController",["$scope","fundsService","$state","authorizationsService","viewStateService","notificationService","formService","pathService","userService",function(a,b,c,d,e,f,g,h,i){a.pathPrefix=h.generateTemplatePath("dbnext-funds"),a.registerOpeningPromise=b.getFundTransaction(c.params.conversionOrderId).then(function(b){a.conversionDetails=b,a.auth={};var d=e.getInitialState(c.current.name);null!=d&&(a.registerNo=d.registerNo,angular.isDefined(d.register.plenipotentiaryDetails)&&(a.plenipotentiaryDetails=d.register.plenipotentiaryDetails)),a.text={auth_method:"db.funds.register.new.step2.row.auth.label.",no_auth_required:"db.funds.register.new.step2.row.auth.no_authorization_required",tan_validate_required:"db.funds.register.new.step2.row.auth.tan.validate.required",sms_validate_required:"db.funds.register.new.step2.row.auth.sms.validate.required",token_validate_required:"db.funds.register.new.step2.row.auth.token.validate.required",input_placeholders:"db.funds.register.new.step2.row.auth.placeholder.",error_code_validate:"db.config.auth.error_code.validate."}}),a.accept=function(b){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid?(a.errorCode=null,d.action({authenticationAttemptId:a.auth.authenticationAttemptId,credentials:a.auth.credentials,transactionId:c.params.conversionOrderId},"accept",a.conversionDetails).then(function(){e.resetInitialState("de.funds.convertUnitsForm.form"),f.showRegisterConvertedDialog({text:{title:"db.funds.conversion.step2.confirmation.title",message:"db.funds.conversion.step2.confirmation.confirmation_text",back:"db.funds.conversion.step2.confirmation.back"},state:{dashboard:"de.dashboard"}}),c.go("de.funds.content.active")},function(b){var c=/([a-zA-Z])/;a.errorCode=c.test(b.text)?"":b.text,g.scrollToError("input")})):void g.dirtyFields(b)},a.back=function(){c.go("de.funds.convertUnitsForm.form")}}]),dbnextFundsModule.controller("dbnext.funds.ConvertUnitsFormController",["$scope","$state","$stateParams","formService","viewStateService","fundsService","$log","userService",function(a,b,c,d,e,f,g,h){a.formData={},a.formData.formModel={},a.formData.amountFieldDisabled=!0,a.formData.numerFieldDisabled=!0,a.formData.amountFieldRequired=!1,a.formData.numerFieldRequired=!1,a.formData.targetRegisterSelectDisabled=!0,a.formData.targetFundSelectDisabled=!0,a.formData.targetRegisterSelectRequired=!1,a.formData.targetFundSelectRequired=!1,a.formData.blockedTfiOfferIds=[],a.currentTabState=e.getInitialState("currentTabState"),null==a.currentTabState&&(a.currentTabState={stateName:"de.funds.content.active"});var i=e.getInitialState(b.current.name);null!=i&&null!=i.register?(a.formData.register=i.register,i.isFromAuthorized?(a.formData.register.isAuthorized=!0,
h.getIdentityDetails().then(function(b){var c={registerId:a.formData.register.registerId};f.getPlenipotentiary(angular.extend({customerId:b.id},c)).then(function(b){a.formData.register.plenipotentiaryDetails=b})})):a.formData.register.isAuthorized=!1,a.formData.registerNo=i.register.registerNo,a.formData.tfi_offer=i.register.registerStates[0].fundName,a.formData.blockedTfiOfferIds.push(i.register.registerStates[0].fundId),angular.isDefined(e.getFormData("convertionUnitsForm"))&&(a.formData=e.getFormData("convertionUnitsForm")||{formModel:{}}),f.getTFIOffer(i.register.registerStates[0].fundId).then(function(b){a.fundDetails=b},function(b){g.error("Error getting fund details"),a.fundDetails={}})):b.go("de.funds.content.active"),a.submit=function(c){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),c.$valid?(e.resetInitialState(b.current.name),e.setInitialState(b.current.name,{register:a.formData.register}),e.appendFormData("convertionUnitsForm",a.formData),e.setInitialState("de.funds.convertUnitsAccept",a.formData),a.formData.formModel.sourceRegisterId=a.formData.register.registerId,"NEW_REGISTER"==a.formData.formModel.targetConversionType&&(a.formData.formModel.targetFundId=a.formData.targetFund.fundId),f.action(a.formData.formModel,"convert",a.formData.register).then(function(a){b.go("de.funds.convertUnitsAccept",{conversionOrderId:a.content})},function(a){null!=a&&null!=a.errors&&d.scrollToError(a.errors[0].field)})):void d.dirtyFields(c)},a.$watch("formData.formModel.convesionType",function(b,c){if(null!=b&&b!=c){switch(b){case"FULL":a.formData.amountFieldDisabled=!0,a.formData.numerFieldDisabled=!0,a.formData.amountFieldRequired=!1,a.formData.numerFieldRequired=!1,a.formData.formModel.numberOfUnits=null,a.formData.formModel.amount=null;break;case"AMOUNT":a.formData.amountFieldDisabled=!1,a.formData.numerFieldDisabled=!0,a.formData.formModel.numberOfUnits=null,a.formData.amountFieldRequired=!0,a.formData.numerFieldRequired=!1,a.conversionUnitsForm.amount.$setUntouched();break;case"UNITS":a.formData.amountFieldDisabled=!0,a.formData.numerFieldDisabled=!1,a.formData.formModel.amount=null,a.formData.amountFieldRequired=!1,a.formData.numerFieldRequired=!0,a.conversionUnitsForm.numberOfUnits.$setUntouched()}a.conversionUnitsForm.$setPristine()}}),a.$watch("formData.formModel.targetConversionType",function(b,c){if(null!=b&&b!=c)switch(b){case"NEW_REGISTER":a.formData.targetRegisterSelectDisabled=!0,a.formData.targetFundSelectDisabled=!1,a.formData.formModel.targetRegisterId=null,a.formData.targetRegisterSelectRequired=!1,a.formData.targetFundSelectRequired=!0;break;case"EXISTING_REGISTER":a.formData.targetRegisterSelectDisabled=!1,a.formData.targetFundSelectDisabled=!0,a.formData.targetFund=null,a.formData.targetRegisterSelectRequired=!0,a.formData.targetFundSelectRequired=!1}})}]),ebComponentModule.directive("convertUnitsUnitValidators",["$timeout","domService",function(a,b){return{require:"ngModel",link:function(a,b,c,d){var e=0;c.$observe("minUnits",function(a){var b=parseFloat(a.replace(",","."));"0"!=b&&(e=b||1e-6),d.$validate()}),d.$validators.minUnits=function(b,c){if(!a.isEditModeUnits){if(void 0!==c&&null!=c&&""!=c&&c.replace){var d=c.replace(",",".").replace(/\s/g,"").replace(/,(..?)$/,".\\1");if(!isNaN(d)){var f=parseFloat(d);return f>=e}}return!0}},d.$validators.noDigits=function(b,c){if(!a.isEditModeUnits){if(void 0!==c&&null!=c&&""!=c&&c.replace){var d=c.replace(/\D/g,"").length;return d>0}return!0}},a.$watch("isEditModeUnits",function(a,b){a===!1&&d.$validate()},!0)}}}]),dbnextFundsModule.controller("dbnext.funds.FundsDetailsController",["$scope","$rootScope","$state","$log","initialState","fundsService","translate","viewStateService",function(a,b,c,d,e,f,g,h){a.initialData=h.getInitialState(c.current.name),a.found=a.initialData.fund,angular.isDefined(e)&&null!=e&&null!=e.fund&&(e.authorized?a.authorized=!0:a.authorized=!1,a.fundsDetailsPromise=f.get(e.fund.registerId).then(function(b){a.found=b,null==a.found.productName&&(a.found.productName="db.funds.details.register_kind.standard")},function(b){d.error("Error getting fund details"),a.found={}})),a.changeAccount=function(b){h.resetInitialState("de.funds.change-account"),h.setInitialState("de.funds.change-account",{fund:a.found}),c.go("de.funds.change-account")},a.prepareDispositions=function(a){h.resetInitialState("de.funds.dispositions.realization"),h.setInitialState("de.funds.dispositions.realization",{register:a,backState:"de.funds.fund-details"}),c.go("de.funds.dispositions.realization")},a.getHistory=function(a){h.resetInitialState("de.funds.transactions.pending"),h.setInitialState("de.funds.transactions.pending",{fund:a,backState:"de.funds.fund-details"}),c.go("de.funds.transactions.pending",{id:a.registerId})}}]),dbnextFundsModule.controller("dbnext.funds.FundsDispositionContentController",["pathService","$scope","$rootScope","fundFilterCriteria","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","httpService","language","userService","domService","$log",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.fundsSettings={},b.$parent.selected={},b.fundList={},b.filterOptions={fundName:""},b.currentTabState={},b.rejectedTabUnseenAmount={count:0},b.initialData=n.getInitialState("de.funds.dispositions.realization"),b.filterParams=d.getFilterDispositionInitValues(),null!=b.initialData?(b.register=b.initialData.register,b.backState=b.initialData.backState,null!=b.initialData.filterParams&&(b.filterParams=b.initialData.filterParams)):(n.resetInitialState("de.funds.dispositions"),k.go("de.funds.content.active")),b.showClearFilter=!1,b.showFilter=!1,b.showFilterWindow=function(){b.showFilter=!b.showFilter},b.clearFilter=function(){b.filterParams=angular.extend(b.filterParams,d.getFilterDispositionInitValues()),b.filterParams.isClearing=!0,b.showClearFilter=!1};var t=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=h("date")(a[c],"yyyy-MM-dd"));return b};b.stateName=k.current.name,b.details=!1,b.tabs=[{id:"REALIZATION",label:"db.funds.dispositions.tabs.realization",state:"de.funds.dispositions.realization"},{id:"REJECTED",label:"db.funds.dispositions.tabs.rejected",state:"de.funds.dispositions.rejected"},{id:"DONE",label:"db.funds.dispositions.tabs.done",state:"de.funds.dispositions.done"},{id:"CANCELED",label:"db.funds.dispositions.tabs.canceled",state:"de.funds.dispositions.canceled"}],b.emitTabChange=function(a){b.$broadcast("changeTab",{direction:a})},n.resetInitialState("currentTabState"),angular.isUndefined(b.currentTabState.stateName)&&(b.currentTabState.stateName=b.stateName);var u=d.getFilterDispositionInitValues();u=[u.dateFrom,u.dateTo,u.periodDefinitionType];var t=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=h("date")(a[c],"yyyy-MM-dd"));return b};b.$watchGroup(["filterParams.dateFrom","filterParams.dateTo","filterParams.periodDefinitionType"],function(a,c){b.filterParams.isClearing=!1,JSON.stringify(t(a))===JSON.stringify(u)?b.showClearFilter=!1:b.showClearFilter=!0},!0),b.searchItemsFromStorage=function(a){g.searchItemsFromStorage(a).then(function(a){null!=a&&(b.fundsSettings=a,b.fundsSettings.content[0]&&angular.forEach(b.fundsSettings.content[0].value,function(a){a.registerId==b.register.registerId&&(b.modificationDateTimeFrom=a.rejectedTabLastEntryDate)})),e.searchFundDispositionSummary({registerId:b.register.registerId,modificationDateTimeFrom:b.modificationDateTimeFrom,dispositionStatusCriteria:"rejected"}).then(function(a){b.rejectedTabUnseenCount=a.content[0].filteredDispositionCount,c.$broadcast("updateTab",{id:"REJECTED",count:b.rejectedTabUnseenCount})},function(a){s.error("Error getting disposition summary"),b.rejectedTabUnseenCount=0})})},b.searchItemsFromStorage("dbnext-funds.disposition"),b.$on("FundsRejectedDispositionsLastEntryDateChangedEvent",function(a,c){b.searchItemsFromStorage("dbnext-funds.disposition")}),b.$on("$stateChangeStart",function(a,c,d,e,f){"de.funds.dispositions.realization"==c.name?(b.currentTabState.stateName=c.name,n.setInitialState("currentTabState",b.currentTabState)):"de.funds.dispositions.rejected"==c.name?(b.currentTabState.stateName=c.name,n.setInitialState("currentTabState",b.currentTabState)):"de.funds.dispositions.done"==c.name?(b.currentTabState.stateName=c.name,n.setInitialState("currentTabState",b.currentTabState)):"de.funds.dispositions.canceled"==c.name?(b.currentTabState.stateName=c.name,n.setInitialState("currentTabState",b.currentTabState)):"de.funds.fund-details"!=e.name?b.details=!1:b.details=!1}),b.prepareDetails=function(a){n.resetInitialState("de.funds.dispositions-details"),n.setInitialState("de.funds.dispositions-details",{backState:b.currentTabState.stateName,id:a.dispositionId,registerId:a.registerId}),b.initialData.filterParams=b.filterParams,n.setInitialState("de.funds.dispositions.realization",b.initialData),k.go("de.funds.dispositions-details")},b.submit=function(a,c){b.$broadcast("DispositionFilteredEvent",{params:c})}}]),dbnextFundsModule.controller("dbnext.funds.FundsDispositionContentTabController",["searchWrapperService","fundsDispositionsService","dbFundDownloadLinkService","fundFilterCriteria","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){f.fundsSettings={},f.dispositionList={},f.filterParams=r.getInitialState("de.funds.dispositions.realization"),null==f.filterParams&&(f.filterParams={}),f.itemsStorageParams={},f.submit=function(a,b){var d=(null!=b?b:f.$parent.filterParams,{dateFrom:f.$parent.filterParams.dateFrom,dateTo:f.$parent.filterParams.dateTo,registerId:f.filterParams.register.registerId});"de.funds.dispositions.realization"==o.current.name?d.dispositionStatusCriteria="pending":"de.funds.dispositions.rejected"==o.current.name?d.dispositionStatusCriteria="rejected":"de.funds.dispositions.done"==o.current.name?d.dispositionStatusCriteria="realized":"de.funds.dispositions.canceled"==o.current.name&&(d.dispositionStatusCriteria="canceled"),f.loading=!0,f.dispositionListPromise=i.searchFundDisposition(d).then(function(a){c.createDispositionLinks(a),f.dispositionList=a,f.loading=!1,f.filterParams.pageNumber=a.pageNumber,f.filterParams.pageSize=a.pageSize,r.setInitialState(o.current.name,f.filterParams)},function(a){h.error("Error getting fund disposition list"),f.dispositionList=[]})},f.changeUnreadRejectedDate=function(a){f.fundsSettings=[],k.searchItemsFromStorage(a).then(function(b){b.content[0]&&angular.forEach(b.content[0].value,function(a){var b={registerId:a.registerId,rejectedTabLastEntryDate:a.rejectedTabLastEntryDate};a.registerId==f.filterParams.register.registerId&&(b.rejectedTabLastEntryDate=new Date,f.added=!0),f.fundsSettings.push(b)}),angular.isUndefined(f.added)&&f.fundsSettings.push({registerId:f.filterParams.register.registerId,rejectedTabLastEntryDate:new Date}),k.putIntoStorage(a,f.fundsSettings).then(function(){f.$emit("FundsRejectedDispositionsLastEntryDateChangedEvent")})})},"de.funds.dispositions.rejected"==o.current.name&&f.changeUnreadRejectedDate("dbnext-funds.disposition"),f.relationSearch=function(a,d,e){if(angular.isDefined(a)){var g={dateFrom:f.$parent.filterParams.dateFrom,dateTo:f.$parent.filterParams.dateTo,registerId:f.filterParams.register.registerId,pageNumber:d.pageNumber,pageSize:d.pageSize};"de.funds.dispositions.realization"==o.current.name?g.dispositionStatusCriteria="pending":"de.funds.dispositions.rejected"==o.current.name?g.dispositionStatusCriteria="rejected":"de.funds.dispositions.done"==o.current.name?g.dispositionStatusCriteria="realized":"de.funds.dispositions.canceled"==o.current.name&&(g.dispositionStatusCriteria="canceled"),f.loading=!0,f.fundsTransactionHistoryPromise=b.relationSearch(a,g,e).then(function(a){c.createDispositionLinks(a),f.dispositionList=a,f.loading=!1,f.filterParams.pageNumber=a.pageNumber,f.filterParams.pageSize=a.pageSize,r.setInitialState(o.current.name,f.filterParams)},function(a){h.error("Error getting fund disposition list"),f.dispositionList=[]})}},f.submit(null,f.filterParams),f.searchItemsFromStorage=function(a){},f.searchItemsFromStorage("dbnext-funds.settings"),f.$on("DispositionFilteredEvent",function(a,b){f.submit(null,b.params)})}]),dbnextFundsModule.controller("dbnext.funds.FundsDispositionDetailsController",["$scope","$log","$rootScope","$state","initialState","fundsService","translate","viewStateService",function(a,b,c,d,e,f,g,h){a.found={},a.details=!0,a.$parent.details=!0,a.initialData=h.getInitialState(d.current.name),a.dispositionDetailsPromise=f.getDisposition(e.id).then(function(c){a.dispositionDetails=c,a.dispositionDetailsPromise=f.getRegister(a.initialData.registerId).then(function(b){a.register=b},function(c){b.error("Error getting register details"),a.details=null})},function(c){b.error("Error getting disposition details"),a.details=null})}]),dbnextFundsModule.controller("dbnext.funds.OpeningContentController",["pathService","$scope","$rootScope","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","initialState","$log",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.fundsSettings={},b.$parent.selected={},b.fundList={},b.filterOptions={fundName:""},b.currentTabState={},b.rejectedTabUnseenAmount={count:0},b.pathPrefix=a.generateTemplatePath("dbnext-funds"),b.fundsTermsAccepted=!1,b.initialData=m.getInitialState("de.funds.opening.pending"),angular.isUndefined(b.initialData)&&(b.initialData={backState:"de.funds.content.active"}),b.stateName=j.current.name,b.searchItemsFromStorage=function(a){f.searchItemsFromStorage(a).then(function(a){null!=a&&a.content[0]&&(b.modificationDateTimeFrom=a.content[0].value.rejectedTabLastEntryDate),d.searchFundTransactionOpeningSummary(null,{modificationDateTimeFrom:b.modificationDateTimeFrom,transactionStatusCriteria:"rejected"},"transaction_opening_register_summary").then(function(a){b.rejectedTabUnseenCount=a.content[0].filteredTransactionCount,c.$broadcast("updateTab",{id:"REJECTED",count:b.rejectedTabUnseenCount})},function(a){o.error("Error getting transaction opening summary"),b.rejectedTabUnseenCount=0})})},b.searchItemsFromStorage("dbnext-funds.opening"),b.$on("FundsRejectedTransactionsOpeningLastEntryDateChangedEvent",function(a,c){b.searchItemsFromStorage("dbnext-funds.opening")}),b.details=!1,b.tabs=[{id:"PENDING",label:"db.funds.opening.content.tabs.pending",state:"de.funds.opening.pending"},{id:"REJECTED",label:"db.funds.opening.content.tabs.rejected",state:"de.funds.opening.rejected"},{id:"CANCELED",label:"db.funds.opening.content.tabs.canceled",state:"de.funds.opening.canceled"}],b.emitTabChange=function(a){b.$broadcast("changeTab",{direction:a})},angular.isUndefined(b.currentTabState.stateName)&&(b.currentTabState.stateName=b.stateName),b.$on("$stateChangeStart",function(a,c,d,e,f){if("de.funds.fund-details"==c.name)b.currentTabState.stateName=e.name,m.setInitialState("currentTabState",b.currentTabState),b.details=!0;else if("de.funds.form.domestic"==c.name)b.currentTabState.stateName=e.name,m.setInitialState("currentTabState",b.currentTabState),m.resetInitialState(c.name),b.details=!1;else if("de.funds.templates"==c.name)b.currentTabState.stateName=e.name,m.setInitialState("currentTabState",b.currentTabState);else{if(c.name.indexOf("de.funds.convertUnitsForm")!=-1)return;if(c.name.indexOf("de.funds.transactions.list")!=-1)return;"de.funds.fund-details"!=e.name||(b.details=!1)}}),m.resetInitialState("currentTabState"),b.prepareDetails=function(a){m.resetInitialState("de.funds.transactions-details"),m.setInitialState("de.funds.transactions-details",{backState:j.current.name,transactionId:a.transactionId}),j.go("de.funds.transactions-details")},b.prepareCancellation=function(a){m.resetInitialState("de.funds.cancelTransactionForm"),m.setInitialState("de.funds.cancelTransactionForm",{transactionId:a.transactionId,backState:b.currentTabState.stateName}),j.go("de.funds.cancelTransactionForm")}}]),dbnextFundsModule.controller("dbnext.funds.FundsOpeningContentTabController",["searchWrapperService","dbFundDownloadLinkService","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q","httpService","language","userService","domService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){d.fundsSettings={},d.$parent.selected={},d.fundOpeningList={},d.itemsStorageParams={statusFundCriteria:"rejected",fundSummaryScopeType:"changed"},d.filterParams=p.getInitialState(m.current.name),null==d.filterParams&&(d.filterParams={statuses:"ACTIVE"}),d.changeUnreadRejectedDate=function(a){d.fundsSettings={rejectedTabLastEntryDate:new Date},i.putIntoStorage(a,d.fundsSettings).then(function(){d.$emit("FundsRejectedTransactionsOpeningLastEntryDateChangedEvent")})},"de.funds.opening.rejected"==m.current.name&&d.changeUnreadRejectedDate("dbnext-funds.opening"),d.searchListOpening=function(a){var c={};return angular.copy(a,c),"de.funds.opening.pending"==m.current.name?c.transactionStatusCriteria="pending":"de.funds.opening.rejected"==m.current.name?c.transactionStatusCriteria="rejected":"de.funds.opening.canceled"==m.current.name&&(c.transactionStatusCriteria="canceled"),c.pageSize=1e7,g.getRegistryOpening(null,c,"search_transaction_opening_register").then(function(a){b.createTransactionLinks(a),d.fundOpeningList=a},function(a){f.error("Error getting funds list"),d.fundOpeningList=[]})},d.searchFundSummary=function(a){h.search(a).then(function(a){d.rejectedTabUnseenAmount.count=0,angular.forEach(a.content,function(a){d.rejectedTabUnseenAmount.count+=a.quantity})})},d.searchItemsFromStorage=function(a){},d.openingListPromise=d.searchListOpening(d.filterParams),d.searchItemsFromStorage("dbnext-funds.settings"),d.createLink=function(a){var b={accountId:0,formatType:"pdf",language:s.get()};k.getHref("download_",a).then(function(c){t.getIdentityDetails().then(function(d){a.link=r.appContext+c+r.serializeParams(angular.extend({customerId:d.id},b),!0),a.target=u.isIE()?"":"_blank"})})}}]),dbnextFundsModule.controller("dbnext.funds.RegisterAcceptFormController",["$scope","fundsService","$state","viewStateService","notificationService","pathService","formService",function(a,b,c,d,e,f,g){a.formData={},a.formData.fromTfiOfferList=!1;var h=d.getInitialState(c.current.name);null!=h&&(angular.isDefined(h.fund)&&(a.showDiscount=h.fund.eligibleForPromotion),angular.isDefined(h.fromTfiOfferList)&&(a.formData.fromTfiOfferList=h.fromTfiOfferList)),a.registerOpeningPromise=b.getFundTransaction(c.params.registerOrderId).then(function(c){a.registerDetails=c,a.fundPromise=b.getTFIOffer(a.registerDetails.transactionDetails.sourcePartRegister.fundId).then(function(c){a.fundDetails=c,a.tfiPromise=b.getTFI(a.fundDetails.tfiId).then(function(b){a.tfiDetails=b})}),a.auth={},a.text={auth_method:"db.funds.register.new.step2.row.auth.label.",no_auth_required:"db.funds.register.new.step2.row.auth.no_authorization_required",tan_validate_required:"db.funds.register.new.step2.row.auth.tan.validate.required",sms_validate_required:"db.funds.register.new.step2.row.auth.sms.validate.required",token_validate_required:"db.funds.register.new.step2.row.auth.token.validate.required",input_placeholders:"db.funds.register.new.step2.row.auth.placeholder.",error_code_validate:"db.config.auth.error_code.validate."}}),a.pathPrefix=f.generateTemplatePath("dbnext-funds"),a.accept=function(f){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),f.$valid?(a.errorCode=null,b.fundTransactionAction({authenticationAttemptId:a.auth.authenticationAttemptId,credentials:a.auth.credentials,transactionId:c.params.registerOrderId},"accept",a.registerDetails).then(function(){d.resetInitialState("de.funds.registerForm.register"),e.showRegisterCreatedDialog({text:{title:"db.funds.register.new.step2.confirmation.title",confirmationText:"db.funds.register.new.step2.confirmation.confirmation_text",createNew:"db.funds.register.new.step2.confirmation.create_new",back:"db.funds.register.new.step2.confirmation.back"},state:{dashboard:"de.dashboard",registerForm:"de.funds.registerForm.register"}}),c.go("de.funds.opening.pending")},function(b){var c=/([a-zA-Z])/;a.errorCode=c.test(b.text)?"":b.text,g.scrollToError("input")})):void g.dirtyFields(f)},a.back=function(){c.go("de.funds.registerForm.register")}}]),dbnextFundsModule.controller("dbnext.funds.RegisterChangeAccountController",["$scope","$state","initialState","fundsService","formService","viewStateService","notificationService","translate","$modal",function(a,b,c,d,e,f,g,h,i){a.formData={},a.formData.formModel={},a.formData.accountCurrency=null,angular.isDefined(c)&&null!=c&&null!=c.fund&&(a.fund=angular.copy(c.fund),a.formData.formModel.registerId=c.fund.registerId,"PLN"==a.fund.registerStates[0].currency&&(a.formData.accountCurrency="PLN")),a.submit=function(c){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),c.$valid?(f.resetInitialState(b.current.name),f.setInitialState(b.current.name,{}),f.appendFormData("changeAccountForm",a.formData),d.action(a.formData.formModel,"modify_purchase_account",a.fund).then(function(c){var d={title:h.property("db.funds.change.account.form.success.title"),message:h.property("db.funds.change.account.form.success.content")},e=i.open({template:'<eb-choice-dialog eb-icon="eb-icon-confirm-success success" eb-title="{{ reason.title }}" eb-message="{{ reason.message }}" eb-on-close="acknowledge()" eb-choices="choices"></eb-choice-dialog>',windowClass:"eb-choice-dialog",backdrop:"static",backdropClass:"always-on",controller:["$scope",function(a){angular.extend(a,{reason:d,choices:[{type:"full-text",name:h.property("db.funds.conversion.step2.confirmation.back"),make:function(){e.dismiss(),b.go("de.dashboard")}}],acknowledge:function(){e.dismiss()}})}]});b.go("de.funds.fund-details",{initialState:a.fund})},function(a){null!=a&&null!=a.errors&&e.scrollToError(a.errors[0].field)})):void e.dirtyFields(c)}}]),dbnextFundsModule.controller("dbnext.funds.RegisterFormController",["$scope","$state","formService","translate","viewStateService","fundsService","initialState","pathService",function(a,b,c,d,e,f,g,h){a.formData={},a.formData.fromTfiOfferList=!1,a.formData.formModel={},a.pathPrefix=h.generateTemplatePath("dbnext-funds"),a.prepareFormData=function(){var c=e.getInitialState(b.current.name);null!=c&&(angular.isDefined(e.getFormData("registerForm"))?(a.formData=e.getFormData("registerForm")||{formModel:{}},a.formData.formModel.executionDate=new Date(a.formData.formModel.executionDate)):a.fundPromise=f.getTFIOffer(c.fundId).then(function(b){a.formData.fund=b,a.formData.fromTfiOfferList=!0,a.formData.formModel.idTFI=a.formData.fund.tfiId}))};var i=e.getInitialState("de.funds");null!=i&&null!=i.fundsTermsAccepted?(a.fundsTermsAccepted=i.fundsTermsAccepted,1==a.fundsTermsAccepted&&a.prepareFormData()):a.fundsTermsAccepted=!1,a.$watch("fundsTermsAccepted",function(b,c){null!=b&&b!=c&&1==b&&a.prepareFormData()}),a.tooltip={icon:"eb-icon-tooltip eb-dbnext-theme",header:d.property("db.funds.register.tooltip.header"),content:d.property("db.funds.register.tooltip.content"),side:"top",handler:"click"},a.$watch("formData.fund",function(b,c){void 0!=b&&null!=b&&b!=c&&(a.formData.minAmount=b.minOpeningValue,a.formData.minAmountCurrency=b.currency)}),a.submit=function(d){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),d.$valid?(e.resetInitialState(b.current.name),e.setInitialState(b.current.name,{}),e.appendFormData("registerForm",a.formData),e.setInitialState("de.funds.registerAcceptForm",a.formData),a.formData.formModel.fundId=a.formData.fund.fundId,f.action(a.formData.formModel,"create_register").then(function(a){b.go("de.funds.registerAcceptForm",{registerOrderId:a.content})},function(a){null!=a&&null!=a.errors&&c.scrollToError(a.errors[0].field)})):void c.dirtyFields(d)},a.maxDate=new Date((new Date).getFullYear()+2,11,31),a.submitAcceptFundsTerms=function(b){angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid?(e.setInitialState("de.funds",{fundsTermsAccepted:!0}),a.fundsTermsAccepted=!0):c.dirtyFields(b)},a.resetFund=function(b){b.fund.$setPristine(),b.fund.$setUntouched(),a.formData.fund=null}}]),dbnextFundsModule.controller("dbnext.funds.FundsTFIContentController",["searchWrapperService","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){c.tfiList={},c.itemsStorageParams={},c.searchTFIList=function(a){var b={};return angular.copy(a,b),b.pageSize=1e7,f.searchTFI(b).then(function(a){c.tfiList=a},function(a){e.error("Error getting tfi list"),c.tfiList=[]})},c.tfiPromise=c.searchTFIList(c.filterParams),c.searchItemsFromStorage=function(a){},c.searchItemsFromStorage("dbnext-funds.settings"),c.prepareOffer=function(a){o.resetInitialState("de.funds.tfi-offer"),o.setInitialState("de.funds.tfi-offer",a),o.setInitialState("initFilterParams",a),l.go("de.funds.tfi-offer")}}]),dbnextFundsModule.controller("dbnext.funds.FundsTFIOfferContentController",["searchWrapperService","fundFilterCriteria","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q","fundFatcaValidationService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){d.tfiOfferList={},d.filterParams={},d.filterParams.tfi=p.getInitialState(m.current.name),angular.extend(d.filterParams,p.getFormData("fundsFilterParams")),d.itemsStorageParams={},d.showFilter=!1,d.showClearFilter=!1,d.showFilterWindow=function(){d.showFilter=!d.showFilter},d.clearFilter=function(){d.filterParams={},d.filterParams.tfi=b.getFilterOfferInitValues(p.getInitialState("initFilterParams"))[0],d.filterParams.isClearing=!0,d.showClearFilter=!1};var s=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=j("date")(a[c],"yyyy-MM-dd"));return b},t=b.getFilterOfferInitValuesId(d.filterParams.tfi);d.$watchGroup(["filterParams.tfi.tfiId","filterParams.name","filterParams.category"],function(a,b){d.filterParams.isClearing=!1,JSON.stringify(s(a))===JSON.stringify(t)?d.showClearFilter=!1:d.showClearFilter=!0},!0),d.searchTFIOfferList=function(a){var b=null!=a?a:d.filterParams,c={pageSize:1e7,tfiId:b.tfi?b.tfi.tfiId:b.tfiId,name:b.name,categoryId:b.category?b.category.categoryId:null};return d.ftiOfferPromise=g.searchTFIOffer(c).then(function(a){d.tfiOfferList=a,b.tfi.first=void 0,p.resetInitialState(m.current.name),p.setInitialState(m.current.name,b.tfi),p.appendFormData("fundsFilterParams",{category:b.category,name:b.name})},function(a){f.error("Error getting tfi offer list"),d.tfiOfferList=[]})},d.ftiOfferPromise=d.searchTFIOfferList(d.filterParams),d.searchItemsFromStorage=function(a){},d.searchItemsFromStorage("dbnext-funds.settings"),d.prepareNewRegister=function(a){p.resetInitialState("de.funds.registerForm.register"),p.setInitialState("de.funds.registerForm.register",{fundId:a.fundId}),r.validateFatcaCompletness(function(){m.go("de.funds.registerForm.register")})},d.prepareDetails=function(a){p.resetInitialState("de.funds.details"),p.setInitialState("de.funds.details",a),m.go("de.funds.details")}}]),dbnextFundsModule.controller("dbnext.funds.FundsTFIOfferDetails",["$scope","$rootScope","$log","fundsService","initialState","viewStateService",function(a,b,c,d,e,f){if(a.tfiOfferDetails={},angular.isDefined(e)&&null!=e&&angular.isDefined(e.tfiId)){var g=angular.copy(e);d.getTFI(g.tfiId).then(function(b){g.tfiName=b.tfiName,a.tfiOfferDetails=g},function(b){c.error("Error getting tfi list"),a.tfiOfferDetails={}})}}]),dbnextFundsModule.controller("dbnext.funds.FundsTFIOfferHistoryContentController",["searchWrapperService","fundFilterCriteria","initialState","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){e.tfiOfferList={},e.filterParams=b.getFilterOfferHistoryInitValues(),e.fundOffer=angular.copy(q.getInitialState(n.current.name)),e.itemsStorageParams={},e.showFilter=!1,e.showClearFilter=!1,e.showFilterWindow=function(){e.showFilter=!e.showFilter},e.clearFilter=function(){e.filterParams={},e.filterParams=b.getFilterOfferHistoryInitValues(),e.filterParams.isClearing=!0,e.showClearFilter=!1};var s=function(a){if("last"==a.periodDefinitionType&&"days"==a.periodUnitType){var b=new Date;return b.setDate(b.getDate()-a.periodCount),b}return a.dateFrom},t=function(a){return"last"==a.periodDefinitionType&&"days"==a.periodUnitType?k("dateParam")((new Date).setDate((new Date).getDate()+30)):a.dateTo},u=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=k("date")(a[c],"yyyy-MM-dd"));return b},v=b.getFilterOfferHistoryInitValues();v=[v.dateFrom,v.dateTo,v.periodCount,v.periodDefinitionType,v.periodUnitType,v.valuationValueFrom,v.valuationValueTo],e.$watchGroup(["filterParams.dateFrom","filterParams.dateTo","filterParams.periodCount","filterParams.periodDefinitionType","filterParams.periodUnitType","filterParams.valuationValueFrom","filterParams.valuationValueTo"],function(a,b){e.filterParams.isClearing=!1,JSON.stringify(u(a))===JSON.stringify(v)?e.showClearFilter=!1:e.showClearFilter=!0},!0),e.searchTFIOfferHistoryList=function(a){var b={dateFrom:s(a),dateTo:t(a),valuationValueFrom:a.valuationValueFrom,valuationValueTo:a.valuationValueTo,pageSize:1e7};return e.ftiOfferPromise=h.relationTFIOfferHistorySearch(c,b,"list_fund_valuations").then(function(a){e.tfiOfferList=a},function(a){g.error("Error getting tfi offer list"),e.tfiOfferList=[]})},e.ftiOfferPromise=e.searchTFIOfferHistoryList(e.filterParams),e.searchItemsFromStorage=function(a){},e.searchItemsFromStorage("dbnext-funds.settings")}]),dbnextFundsModule.controller("dbnext.funds.FundsTransactionContentController",["pathService","$scope","$rootScope","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","httpService","language","userService","domService","$log",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.fundsSettings={},b.rejectedTabUnseenAmount={count:0},b.initialState=m.getInitialState(j.current.name),b.filterParams={dateFrom:g("dateParam")((new Date).setDate((new Date).getDate()-30)),dateTo:g("dateParam")(new Date),periodDefinitionType:"range"},null!=b.initialState?(b.fund=b.initialState.fund,b.backState=b.initialState.backState,null!=b.initialState.filterParams&&(b.filterParams=b.initialState.filterParams)):(m.resetInitialState("de.funds.transactions"),j.go("de.funds.content.active")),b.showClearFilter=!1,b.currentTabState={},b.stateName=j.current.name,b.details=!1,b.tabs=[{id:"PENDING",label:"db.funds.transactions.tabs.pending",state:"de.funds.transactions.pending"},{id:"REJECTED",label:"db.funds.transactions.tabs.rejected",state:"de.funds.transactions.rejected"},{id:"REALIZED",label:"db.funds.transactions.tabs.realized",state:"de.funds.transactions.realized"},{id:"CANCELED",label:"db.funds.transactions.tabs.canceled",state:"de.funds.transactions.canceled"}],b.emitTabChange=function(a){b.$broadcast("changeTab",{direction:a})},m.resetInitialState("currentTabState"),angular.isUndefined(b.currentTabState.stateName)&&(b.currentTabState.stateName=b.stateName);var s={dateFrom:g("dateParam")((new Date).setDate((new Date).getDate()-30)),
dateTo:g("dateParam")(new Date),periodDefinitionType:"range"};s=[s.dateFrom,s.dateTo,s.periodDefinitionType],b.clearFilter=function(){b.filterParams=angular.extend(b.filterParams,{dateFrom:g("dateParam")((new Date).setDate((new Date).getDate()-30)),dateTo:g("dateParam")(new Date),periodDefinitionType:"range"}),b.filterParams.isClearing=!0,b.showClearFilter=!1};var t=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=g("date")(a[c],"yyyy-MM-dd"));return b};b.$watch("filterParams.dateFrom",function(a,c){JSON.stringify(t(a))!=JSON.stringify(t(s[0]))&&(b.filterParams.isClearing=!1,b.showClearFilter=!0)},!0),b.$watch("filterParams.dateTo",function(a,c){JSON.stringify(t(a))!=JSON.stringify(t(s[1]))&&(b.filterParams.isClearing=!1,b.showClearFilter=!0)},!0),b.searchItemsFromStorage=function(a){f.searchItemsFromStorage(a).then(function(a){null!=a&&(b.fundsSettings=a,b.fundsSettings.content[0]&&angular.forEach(b.fundsSettings.content[0].value,function(a){a.registerId==b.fund.registerId&&(b.modificationDateTimeFrom=a.rejectedTabLastEntryDate)})),d.searchFundTransactionSummary({registerId:b.fund.registerId,modificationDateTimeFrom:b.modificationDateTimeFrom,transactionStatusCriteria:"rejected"}).then(function(a){b.rejectedTabUnseenCount=a.content[0].filteredTransactionCount,c.$broadcast("updateTab",{id:"REJECTED",count:b.rejectedTabUnseenCount})},function(a){r.error("Error getting transaction summary"),b.rejectedTabUnseenCount=0})})},b.searchItemsFromStorage("dbnext-funds.transaction"),b.$on("FundsRejectedTransactionsLastEntryDateChangedEvent",function(a,c){b.searchItemsFromStorage("dbnext-funds.transaction")}),b.submit=function(){b.$broadcast("searchTransactionsEvent")},b.$on("$stateChangeStart",function(a,c,d,e,f){"de.funds.transactions.pending"==c.name?(m.resetInitialState(c.name),b.currentTabState.stateName=c.name,m.setInitialState("currentTabState",b.currentTabState)):"de.funds.transactions.rejected"==c.name?(m.resetInitialState(c.name),b.currentTabState.stateName=c.name,m.setInitialState("currentTabState",b.currentTabState)):"de.funds.transactions.realized"==c.name?(m.resetInitialState(c.name),b.currentTabState.stateName=c.name,m.setInitialState("currentTabState",b.currentTabState)):"de.funds.transactions.canceled"==c.name?(m.resetInitialState(c.name),b.currentTabState.stateName=c.name,m.setInitialState("currentTabState",b.currentTabState)):"de.funds.fund-details"!=e.name?b.details=!1:b.details=!1}),b.createTransactionLink=function(a){var b={accountId:0,formatType:"pdf",language:o.get()};h.getHref("download_",a).then(function(c){p.getIdentityDetails().then(function(d){a.link=n.appContext+c+n.serializeParams(angular.extend({customerId:d.id},b),!0),a.target=q.isIE()?"":"_blank"})})},b.prepareDetails=function(a){m.resetInitialState("de.funds.transactions-details"),m.setInitialState("de.funds.transactions-details",{backState:b.currentTabState.stateName,transactionId:a.transactionId,fund:b.fund}),b.initialState=m.getInitialState(j.current.name),null!=b.initialState&&null!=b.initialState.filterParams&&(b.filterParams=b.initialState.filterParams),b.initialState.filterParams=b.filterParams,m.setInitialState(j.current.name,b.initialState),j.go("de.funds.transactions-details")},b.prepareCancellation=function(a){m.resetInitialState("de.funds.cancelTransactionForm"),m.setInitialState("de.funds.cancelTransactionForm",{transactionId:a.transactionId,backState:b.currentTabState.stateName}),b.initialState.filterParams=b.filterParams,m.setInitialState(j.current.name,b.initialState),j.go("de.funds.cancelTransactionForm")}}]),dbnextFundsModule.controller("dbnext.funds.FundsTransactionContentTabController",["searchWrapperService","dbFundDownloadLinkService","fundsTransactionsService","fundFilterCriteria","pathService","$scope","$rootScope","$log","fundsService","fundsSummaryService","storageItemsService","$filter","gate","$timeout","$state","$stateParams","translate","viewStateService","$q",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){f.fundsSettings={},f.fund=f.$parent.fund,f.initialState=r.getInitialState(o.current.name),f.initialState&&f.initialState.filterParams?f.filterParams=f.initialState.filterParams:(f.initialState=f.$parent.initialState,f.filterParams.pageNumber=void 0,f.filterParams.pageSize=void 0);var t=function(a){return"de.funds.transactions.pending"==a?"pending":"de.funds.transactions.rejected"==a?"rejected":"de.funds.transactions.realized"==a?"realized":"de.funds.transactions.canceled"==a?"canceled":void 0};f.changeUnreadRejectedDate=function(a){f.fundsSettings=[],k.searchItemsFromStorage(a).then(function(b){b.content[0]&&angular.forEach(b.content[0].value,function(a){var b={registerId:a.registerId,rejectedTabLastEntryDate:a.rejectedTabLastEntryDate};a.registerId==f.fund.registerId&&(b.rejectedTabLastEntryDate=new Date,f.added=!0),f.fundsSettings.push(b)}),angular.isUndefined(f.added)&&f.fundsSettings.push({registerId:f.fund.registerId,rejectedTabLastEntryDate:new Date}),k.putIntoStorage(a,f.fundsSettings).then(function(){f.$emit("FundsRejectedTransactionsLastEntryDateChangedEvent")})})},"de.funds.transactions.rejected"==o.current.name&&f.changeUnreadRejectedDate("dbnext-funds.transaction"),f.findTransactions=function(){var a=null!=a?a:f.filterParams;if(angular.isDefined(f.fund))var d=angular.extend({dateFrom:f.$parent.filterParams.dateFrom,dateTo:f.$parent.filterParams.dateTo,registerId:f.fund.registerId,transactionStatusCriteria:t(o.current.name)},f.filterParams);f.fundsTransactionHistoryPromise=c.search(d).then(function(a){b.createTransactionLinks(a),f.fundsTransactionHistoryList=a,f.loading=!1,f.filterParams.pageNumber=a.pageNumber,f.filterParams.pageSize=a.pageSize,f.initialState.filterParams=f.filterParams,r.resetInitialState(o.current.name),r.setInitialState(o.current.name,f.initialState)},function(a){h.error("Error getting fund history list"),f.fundsTransactionHistoryList=[]})},f.findTransactions(),f.submit=function(a,d,e){if(angular.isDefined(a)){var g={dateFrom:f.$parent.filterParams.dateFrom,dateTo:f.$parent.filterParams.dateTo,registerId:f.fund.registerId,transactionStatusCriteria:t(o.current.name),pageNumber:d.pageNumber,pageSize:d.pageSize};return angular.extend(g,d),f.fundsTransactionHistoryPromise=c.relationSearch(a,g,e).then(function(a){b.createTransactionLinks(a),f.fundsTransactionHistoryList=a,f.filterParams.pageNumber=a.pageNumber,f.filterParams.pageSize=a.pageSize,f.initialState.filterParams=f.filterParams,r.resetInitialState(o.current.name),r.setInitialState(o.current.name,f.initialState)},function(a){h.error("Error getting fund history list"),f.fundsTransactionHistoryList=[]}),f.fundsTransactionHistoryPromise}},f.showFilter=!1,f.clearFilter=function(){f.filterParams={},f.filterParams=d.getFilterOfferInitValues(r.getInitialState(o.current.name))},f.$on("searchTransactionsEvent",function(){f.findTransactions()})}]),dbnextFundsModule.controller("dbnext.funds.FundsTransactionDetailsController",["$scope","$log","$q","$rootScope","fundsTransactionsService","$state","initialState","fundsService","translate","viewStateService",function(a,b,c,d,e,f,g,h,i,j){a.details=!0,a.$parent.details=!0,a.initialData=j.getInitialState(f.current.name),a.transactionDetailsPromise=e.get(g.transactionId).then(function(b){a.transaction=b},function(a){return b.error("Error getting transaction details"),c.reject(a)})}]),dbnextFundsModule.controller("dbnext.funds.TransactionHistoryController",["initialState","fundsTransactionsService","$stateParams","domService","viewStateService","$rootScope","$scope","translate","$state","transactionService","transactionFilterCriteria","pathService","$filter","formService","$timeout","$log","httpService","userService","gate","language",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){g.showFilter=!1,g.showClearFilter=!1;var u=e.getInitialState(i.current.name);if(angular.isDefined(u)){g.fund=u,angular.isDefined(e.getInitialState(i.current.name))&&(g.filterParams=e.getFormData("fundsTransactionHistoryFilterParams"));var v=function(a){if("last"==a.periodDefinitionType&&"days"==a.periodUnitType){var b=new Date;return b.setDate(b.getDate()-a.periodCount),b}return a.dateFrom},w=function(a){return"last"==a.periodDefinitionType&&"days"==a.periodUnitType?m("dateParam")((new Date).setDate((new Date).getDate()+30)):a.dateTo};if(angular.isDefined(g.fund)&&null==g.filterParams&&(g.filterParams=k.getTransactionFilterInitValues(g.fund.lastTransactionBookingDate,!0)),g.clearFilter=function(){g.filterParams={},g.filterParams=k.getTransactionFilterInitValues(g.fund.lastTransactionBookingDate,!0),g.showClearFilter=!1},g.submit=function(a,c,d){if(angular.isDefined(a)){g.loading=!0;var f={registerId:g.fund.registryId,dateTo:w(c)};return angular.extend(f,c),f.dateFrom=v(c),f.dateTo=w(c),g.fundsTransactionHistoryPromise=b.relationSearch(a,f,d).then(function(a){g.fundsTransactionHistoryList=a,g.loading=!1,g.filterParams.pageNumber=a.pageNumber,g.filterParams.pageSize=a.pageSize,e.appendFormData("fundsTransactionHistoryFilterParams",g.filterParams),n.scrollTo("fundsTransactionHistoryListId")},function(a){p.error("Error getting fund history list"),g.fundsTransactionHistoryList=[]}),g.fundsTransactionHistoryPromise}},angular.isDefined(a)){var x=angular.extend({registerId:g.fund.registryId},g.filterParams);x.dateTo=w(g.filterParams)}g.fundsTransactionHistoryPromise=b.search(x).then(function(a){g.fundsTransactionHistoryList=a,g.loading=!1,g.filterParams.pageNumber=a.pageNumber,g.filterParams.pageSize=a.pageSize,e.appendFormData("fundsTransactionHistoryFilterParams",g.filterParams)},function(a){p.error("Error getting fund history list"),g.fundsTransactionHistoryList=[]});var y=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=m("date")(a[c],"yyyy-MM-dd"));return b},z=k.getTransactionFilterInitValues(g.fund.lastTransactionBookingDate,!0);z=[z.dateFrom,z.dateTo],g.$watchGroup(["filterParams.dateFrom","filterParams.dateTo"],function(a,b){g.filterParams.isClearing=!1,JSON.stringify(y(a))===JSON.stringify(z)?g.showClearFilter=!1:g.showClearFilter=!0},!0)}}]),dbnextFundsModule.controller("dbnext.funds.ViewController",["$scope",function(a){a.selected={}}]),dbnextFundsModule.directive("dbFundsAcquittalTypeSelect",["pathService","fundsAcquittalTypeDictionary",function(a,b){return{restrict:"EA",require:"ngModel",replace:!1,scope:{placeholder:"@",prefixLabel:"@"},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsAcquittalTypeSelect/dbFundsAcquittalTypeSelect.html",link:function(a,c,d,e){a.fundsAcquittalTypesList=b,a.selectAcquittalType=function(b,c){a.ngModel=c}}}}]),dbnextFundsModule.directive("dbFundsConversionTypeSelect",["pathService","fundsConversionTypeDictionary",function(a,b){return{restrict:"EA",require:"ngModel",scope:{placeholder:"@",prefixLabel:"@"},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsConversionTypeSelect/dbFundsConversionTypeSelect.html",link:function(a,c,d,e){a.fundsConversionTypesList=b,a.selectFundConversionType=function(b,c){a.ngModel=c}}}}]),dbnextFundsModule.directive("dbFundsDispositionFilter",["$compile","ebTheming","fundsService","commonService","$rootScope","$timeout","$log","$http","$templateCache","pathService","accountsService","$state","$filter","$window","formService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",context:"=?",callback:"&"},templateUrl:j.generateTemplatePath("dbnext-funds")+"/directives/dbFundsDispositionFilter/dbFundsDispositionFilter.html",link:function(a,c,d){b.applyTheme(c),a.submitFilter=function(b){if(angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid)return o.scrollTo("tfiOfferList"),a.callback({ctx:a.context,params:a.ngModel})}}}}]),dbnextFundsModule.directive("dbFundsOfferFilter",["$compile","ebTheming","fundsService","commonService","$rootScope","$timeout","$log","$http","$templateCache","pathService","accountsService","$state","$filter","$window","formService","translate",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",context:"=",callback:"&"},templateUrl:j.generateTemplatePath("dbnext-funds")+"/directives/dbFundsOfferFilter/dbFundsOfferFilter.html",link:function(a,d,e){b.applyTheme(d),a.tfiCriteriaListPromise=c.searchTFI({pageSize:1e7}).then(function(b){var c={tfiId:null,tfiName:p.property("db.funds.offer.criteria.tfi.all")};a.tfiCriteriaList=b.content,a.tfiCriteriaList.splice(0,0,c)}),a.tfiCriteriaCategoryListPromise=c.searchFundCategory({pageSize:1e7}).then(function(b){a.tfiCriteriaCategoryList=b.content}),a.submitFilter=function(b){if(angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid)return o.scrollTo("tfiOfferList"),a.callback({ctx:a.context,params:a.ngModel})},a.selectTFI=function(b,c){a.model=c}}}}]),dbnextFundsModule.directive("dbFundsOfferHistoryFilter",["$compile","ebTheming","fundsService","commonService","$rootScope","$timeout","$log","$http","$templateCache","pathService","accountsService","$state","$filter","$window","formService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",context:"=",callback:"&"},templateUrl:j.generateTemplatePath("dbnext-funds")+"/directives/dbFundsOfferHistoryFilter/dbFundsOfferHistoryFilter.html",link:function(a,c,d){b.applyTheme(c),a.submitFilter=function(b){if(angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid)return o.scrollTo("tfiOfferList"),a.callback({ctx:a.context,params:a.ngModel})},a.selectTFI=function(b,c){a.model=c}}}}]),dbnextFundsModule.directive("dbFundsRegisterSelect",["pathService","fundsService",function(a,b){return{restrict:"EA",require:"ngModel",scope:{placeholder:"@",ngDisabled:"=",onlyActive:"=?",filterForConversionFromOwnRegister:"=?",filterForConversionFromAuthorizedRegister:"=?",currentRegister:"=?"},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsRegisterSelect/dbFundsRegisterSelect.html",link:function(a,c,d,e){a.registerList=[];var f={};f.pageSize=1e7,angular.isDefined(a.onlyActive)&&a.onlyActive&&(f.registerStatusCriteria="active"),angular.isDefined(a.filterForConversionFromOwnRegister)&&a.filterForConversionFromOwnRegister&&(f.partyRelationCriteria="participant"),angular.isDefined(a.filterForConversionFromAuthorizedRegister)&&a.filterForConversionFromAuthorizedRegister&&(f.partyRelationCriteria="authorized"),a.registerPromise=b.search(f).then(function(b){if(angular.isDefined(a.filterForConversionFromOwnRegister)&&a.filterForConversionFromOwnRegister&&angular.isDefined(a.currentRegister))for(var c=0;c<b.content.length;c++){var d=b.content[c];null==d.productName&&1==d.registerStates.length&&d.registerStates[0].fundId!=a.currentRegister.registerStates[0].fundId&&"ACTIVE"==d.status&&d.participant.participantId==a.currentRegister.participant.participantId&&a.registerList.push(d)}else if(angular.isDefined(a.filterForConversionFromAuthorizedRegister)&&a.filterForConversionFromAuthorizedRegister&&angular.isDefined(a.currentRegister))for(var c=0;c<b.content.length;c++){var d=b.content[c];null==d.productName&&1==d.registerStates.length&&d.registerStates[0].fundId!=a.currentRegister.registerStates[0].fundId&&"ACTIVE"==d.status&&d.tfi.tfiId==a.currentRegister.tfi.tfiId&&a.registerList.push(d)}else a.registerList=b.content}),a.selectRegister=function(b,c){a.ngModel=c}}}}]),dbnextFundsModule.directive("dbFundsSourceOfAssets",["pathService","fundsService","language",function(a,b,c){return{restrict:"EA",scope:{sourceId:"="},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsSourceOfAssets/dbFundsSourceOfAssets.html"}}]),dbnextFundsModule.directive("dbFundsSourceOfAssetsSelect",["pathService","fundsService","language",function(a,b,c){return{restrict:"EA",require:"ngModel",scope:{placeholder:"@"},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsSourceOfAssetsSelect/dbFundsSourceOfAssetsSelect.html",link:function(a,d,e,f){a.sourcesOfAssetsList=[];var g={pageSize:100,language:c.get()};a.sourcesOfAssetsPromise=b.searchSourcesOfAssets(g).then(function(b){a.sourcesOfAssetsList=b.content}),a.selectSourceOfAssets=function(b,c){a.ngModel=c}}}}]),dbnextFundsModule.directive("dbFundsTfiOfferSelect",["pathService","fundsService",function(a,b){return{restrict:"EA",require:"ngModel",scope:{placeholder:"@",tfiId:"=",ngDisabled:"=",blockedTfiOfferIds:"=?"},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsTFIOfferSelect/dbFundsTFIOfferSelect.html",link:function(a,c,d,e){a.tfiOfferList=[],a.$watch("tfiId",function(b,c){a.getTfiOfferList(b)}),a.getTfiOfferList=function(c){a.tfiOfferPromise=b.searchTFIOffer({tfiId:a.tfiId,pageSize:1e7}).then(function(b){if(angular.isDefined(a.blockedTfiOfferIds))for(var c=0;c<b.content.length;c++)a.blockedTfiOfferIds.indexOf(b.content[c].fundId)==-1&&a.tfiOfferList.push(b.content[c]);else a.tfiOfferList=b.content},function(b){a.tfiOfferList=[]})},a.selectTFIOffer=function(b,c){a.ngModel=b}}}}]),dbnextFundsModule.directive("dbFundsTfiSelect",["pathService","fundsService",function(a,b){return{restrict:"EA",require:"ngModel",replace:!1,scope:{placeholder:"@"},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsTFISelect/dbFundsTFISelect.html",link:function(a,c,d,e){a.tfiList=[],a.tfiPromise=b.searchTFI({pageSize:1e7}).then(function(b){a.tfiList=b.content}),a.selectTFI=function(b,c){a.ngModel=c}}}}]),dbnextFundsModule.directive("dbFundsTargetConversionTypeSelect",["pathService","fundsTargetConversionTypeDictionary",function(a,b){return{restrict:"EA",require:"ngModel",scope:{placeholder:"@",prefixLabel:"@"},templateUrl:a.generateTemplatePath("dbnext-funds")+"/directives/dbFundsTargetConversionTypeSelect/dbFundsTargetConversionTypeSelect.html",link:function(a,c,d,e){a.fundsTargetConversionTypesList=b,a.selectFundConversionType=function(b,c){a.ngModel=c}}}}]),dbnextFundsModule.controller("dbnext.funds.MenuElementController",["$scope","$rootScope",function(a,b){a.isStateActive=b.isStateActive}]),dbnextFundsModule.controller("dbnext.funds.WidgetController",["$log","$scope","$rootScope","$location","$timeout","$state","fundsService","fundsSummaryService","pathService","fundFatcaValidationService",function(a,b,c,d,e,f,g,h,i,j){b.params={pageSize:1e7},b.fundsPromise=h.search(b.params).then(function(a){b.fundSummary=a}),b.submit=function(a,b,c){if(angular.isDefined(a))return g.relationSearch(a,b,c).then(function(a){return a})},b.widgetContent=i.generateTemplatePath("dbnext-funds")+"/elements/widget/funds-widgetElementViewContent.html",b.newRegister=function(){j.validateFatcaCompletness(function(){f.go("de.funds.registerForm.register")})}}]),dbnextFundsModule.service("dbFundDownloadLinkService",["$rootScope","httpService","userService","gate","language",function(a,b,c,d,e){function f(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return!!(b>0||a.match(/Trident.*rv\:11/))}this.createTransactionLinks=function(g){angular.forEach(g.content,function(g){var h={transactionId:g.transactionId,formatType:"pdf",language:e.get()};a.hasLink(g,"download_fund_transaction")&&d.getHref("download_fund_transaction",g).then(function(a){c.getIdentityDetails().then(function(c){g.link=b.appContext+a+b.serializeParams(angular.extend({customerId:c.id},h),!0),g.target=f()?"":"_blank"})})})},this.createDispositionLinks=function(g){angular.forEach(g.content,function(g){var h={dispositionId:g.dispositionId,formatType:"pdf",language:e.get()};a.hasLink(g,"download_disposition_details")&&d.getHref("download_disposition_details",g).then(function(a){c.getIdentityDetails().then(function(c){g.link=b.appContext+a+b.serializeParams(angular.extend({customerId:c.id},h),!0),g.target=f()?"":"_blank"})})})}}]),dbnextFundsModule.service("fundFatcaValidationService",["$log","$modal","$q","translate","customerService",function(a,b,c,d,e){this.validateFatcaCompletness=function(f){return e.getUserData().then(function(a){if(a.completed)f();else var c={title:d.property("db.funds.register.fatca.info.title"),message:d.property("db.funds.register.fatca.info.content")},e=b.open({template:'<eb-dialog eb-icon="eb-icon eb-icon-basic-info info" eb-title="{{ reason.title }}" eb-message="{{ reason.message }}" eb-on-close="close()"></eb-dialog>',windowClass:"eb-dialog",backdrop:"static",backdropClass:"always-on",controller:["$scope",function(a){angular.extend(a,{reason:c,close:function(){e.dismiss()}})}]})},function(){return a.error("Error get user data"),c.reject("Error get user data.")})}}]),dbnextFundsModule.service("fundFilterCriteria",["$filter",function(a){var b=30,c=new Date,d=new Date((new Date).setDate(c.getDate()-b)),e=(d.setHours(0,0,0,0),{dateFrom:a("dateParam")((new Date).setDate((new Date).getDate()-30)),dateTo:a("dateParam")(new Date),periodCount:b,periodDefinitionType:"last",periodUnitType:"days",valuationValueFrom:null,valuationValueTo:null}),f={dateFrom:a("dateParam")((new Date).setDate((new Date).getDate()-30)),dateTo:a("dateParam")(new Date),periodDefinitionType:"range"};return{getFilterOfferHistoryInitValues:function(){var a=angular.copy(e);return a},getFilterOfferInitValues:function(a){return[a,void 0,void 0]},getFilterOfferInitValuesId:function(a){return[a.tfiId,void 0,void 0]},getFilterDispositionInitValues:function(a){var b=angular.copy(f);return b}}}]),angular.module("dbnext-funds").run(["$templateCache",function(a){a.put("templates/dbnext-funds/0.0.2/directives/dbFundsAcquittalTypeSelect/dbFundsAcquittalTypeSelect.html",'<ui-select eb-themable search-enabled="false" theme="select2" on-select="selectAcquittalType($item, $model)"><ui-select-match placeholder="{{placeholder | translate }}">{{prefixLabel + $select.selected.key | translate}}</ui-select-match><ui-select-choices class="block-choices" repeat="type.model as type in fundsAcquittalTypesList"><div>{{::prefixLabel + type.key | translate}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsConversionTypeSelect/dbFundsConversionTypeSelect.html",'<ui-select eb-themable search-enabled="false" theme="select2" on-select="selectFundConversionType($item, $model)"><ui-select-match placeholder="{{placeholder | translate }}">{{prefixLabel + $select.selected.key | translate}}</ui-select-match><ui-select-choices class="block-choices" repeat="type.model as type in fundsConversionTypesList"><div>{{::prefixLabel + type.key | translate}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsDispositionFilter/dbFundsDispositionFilter.html",'<form name="dispositionHistoryFilterForm" novalidate><div eb-themable class="list-filter"><div class="transaction-filter-container"><eb-responsive-row><div eb-themable class="date-range"><eb-date-range-select ng-model="ngModel" without-days="true" eb-form="dispositionHistoryFilterForm"></eb-date-range-select></div></eb-responsive-row><div class="account-filter-padding-detail"><eb-action-footer submit-label="db.funds.filter.label.button" submit-action="submitFilter(dispositionHistoryFilterForm)"></eb-action-footer></div></div></div></form>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsOfferFilter/dbFundsOfferFilter.html",'<div class="db-funds-tfi-filter"><form name="ftiFilterForm" novalidate><div><div eb-themable class="list-filter"><div class="tfi-filter-container"><div class="tfi-filter-padding-detail"><eb-responsive-row label="db.funds.offer.criteria.tfi"><div class="select-searchbox"><ui-select eb-themable close-on-select="true" reset-search-input="true" ng-disabled="tfiCriteriaListPromise && tfiCriteriaListPromise.$$state.status === 0" search-enabled="true" theme="select2" on-select="selectTFI($item, $model)" ng-model="ngModel.tfi"><ui-select-match placeholder="{{\'db.funds.offer.criteria.tfi.placeholder\'|translate}}"><span>{{ngModel.tfi.tfiName}}</span></ui-select-match><ui-select-choices class="block-choices" repeat="tfiCriteria in tfiCriteriaList | filter: $select.search"><div class="template-name">{{tfiCriteria.tfiName}}</div></ui-select-choices></ui-select></div></eb-responsive-row><eb-responsive-row label="db.funds.offer.criteria.contains" label-for="title"><input type="text" class="title-input" placeholder="{{::\'db.funds.offer.criteria.contains.placeholder\'|translate}}" id="title" ng-model="ngModel.name" maxlength="35"></eb-responsive-row><eb-responsive-row label="db.funds.offer.criteria.category"><div class="select-searchbox"><ui-select eb-themable close-on-select="true" reset-search-input="true" ng-disabled="tfiCriteriaCategoryListPromise && tfiCriteriaCategoryListPromise.$$state.status === 0" search-enabled="true" theme="select2" on-select="selectTFI($item, $model)" ng-model="ngModel.category"><ui-select-match placeholder="{{\'db.funds.offer.criteria.category.placeholder\'|translate}}"><span>{{ngModel.category.name}}</span></ui-select-match><ui-select-choices class="block-choices" repeat="tfiCriteria in tfiCriteriaCategoryList | filter: $select.search"><div class="template-name">{{tfiCriteria.name}}</div></ui-select-choices></ui-select></div></eb-responsive-row><eb-action-footer submit-label="db.funds.filter.label.button" submit-action="submitFilter(ftiFilterForm)"></eb-action-footer></div></div></div></div></form></div>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsOfferHistoryFilter/dbFundsOfferHistoryFilter.html",'<div class="db-acc-transaction-filter"><form name="tfiOfferHistoryFilterForm" novalidate><div><div eb-themable class="list-filter"><div class="transaction-filter-container"><eb-responsive-row center label="db.funds.filter.label.period" class="period-label"><div eb-themable class="date-range"><eb-date-range-select ng-model="ngModel" eb-form="tfiOfferHistoryFilterForm"></eb-date-range-select></div></eb-responsive-row><div class="account-filter-padding-detail"><eb-responsive-row center label="db.funds.offer.history.unit" label-for="amountFrom" class="top-label"><eb-amount-range-select eb-form="tfiOfferHistoryFilterForm" amount-from="ngModel.valuationValueFrom" amount-to="ngModel.valuationValueTo" eb-fault-amount-msg="{{:: \'db.funds.transactions.filter.amount_range_select.validation.amount_to_bigger_than_from\' | translate}}"></eb-amount-range-select></eb-responsive-row><eb-action-footer submit-label="db.funds.filter.label.button" submit-action="submitFilter(tfiOfferHistoryFilterForm)"></eb-action-footer></div></div></div></div></form></div>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsRegisterSelect/dbFundsRegisterSelect.html",'<ui-select ng-disabled="ngDisabled || (registerPromise && registerPromise.$$state.status === 0)" eb-themable search-enabled="false" theme="select2" on-select="selectRegister($item, $model)"><ui-select-match placeholder="{{(registerPromise && registerPromise.$$state.status === 0) && (\'platform.component.account_select.placeholder.loading\' | translate) || (placeholder|translate)}}"><span ng-if="registerPromise.$$state.status === 0">{{$select.placeholder}}</span> <span ng-if="registerPromise.$$state.status !== 0">{{$select.selected.registerNo}}</span></ui-select-match><ui-select-choices class="block-choices" repeat="register.registerId as register in registerList"><div>{{register.registerNo}}</div><div>{{register.registerStates[0].fundName}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsSourceOfAssets/dbFundsSourceOfAssets.html","<span>{{'db.funds.transactions.assets_origin.'+ sourceId |translate}}</span>"),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsSourceOfAssetsSelect/dbFundsSourceOfAssetsSelect.html",'<ui-select ng-disabled="sourcesOfAssetsPromise && sourcesOfAssetsPromise.$$state.status === 0" eb-themable search-enabled="false" theme="select2" on-select="selectSourceOfAssets($item, $model)"><ui-select-match placeholder="{{(sourcesOfAssetsPromise && sourcesOfAssetsPromise.$$state.status === 0) && (\'platform.component.account_select.placeholder.loading\' | translate) || (placeholder|translate)}}"><span ng-if="sourcesOfAssetsPromise.$$state.status === 0">{{$select.placeholder}}</span> <span ng-if="sourcesOfAssetsPromise.$$state.status !== 0">{{\'db.funds.transactions.assets_origin.\'+ $select.selected.sourceOfAssetsId | translate}}</span></ui-select-match><ui-select-choices class="block-choices" repeat="source.sourceOfAssetsId as source in sourcesOfAssetsList"><div>{{::\'db.funds.transactions.assets_origin.\'+source.sourceOfAssetsId|translate}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsTFIOfferSelect/dbFundsTFIOfferSelect.html",'<ui-select ng-disabled="ngDisabled || (tfiOfferPromise && tfiOfferPromise.$$state.status === 0)" eb-themable search-enabled="false" theme="select2" on-select="selectTFIOffer($item, $model)"><ui-select-match placeholder="{{(tfiOfferPromise && tfiOfferPromise.$$state.status === 0) && (\'platform.component.account_select.placeholder.loading\' | translate) || (placeholder|translate)}}"><span ng-if="tfiOfferPromise.$$state.status === 0">{{$select.placeholder}}</span> <span ng-if="tfiOfferPromise.$$state.status !== 0">{{$select.selected.fundName}}</span></ui-select-match><ui-select-choices class="block-choices" repeat="tfiOffer as tfiOffer in tfiOfferList"><div>{{tfiOffer.fundName}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsTFISelect/dbFundsTFISelect.html",'<ui-select ng-disabled="tfiPromise && tfiPromise.$$state.status === 0" eb-themable search-enabled="false" theme="select2" on-select="selectTFI($item, $model)"><ui-select-match placeholder="{{(tfiPromise && tfiPromise.$$state.status === 0) && (\'platform.component.account_select.placeholder.loading\' | translate) || (placeholder|translate)}}"><span ng-if="tfiPromise.$$state.status === 0">{{$select.placeholder}}</span> <span ng-if="tfiPromise.$$state.status !== 0">{{$select.selected.tfiName}}</span></ui-select-match><ui-select-choices class="block-choices" repeat="tfi.tfiId as tfi in tfiList"><div>{{tfi.tfiName}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-funds/0.0.2/directives/dbFundsTargetConversionTypeSelect/dbFundsTargetConversionTypeSelect.html",'<ui-select eb-themable search-enabled="false" theme="select2" on-select="selectTargetFundConversionType($item, $model)"><ui-select-match placeholder="{{placeholder | translate }}">{{prefixLabel + $select.selected.key | translate}}</ui-select-match><ui-select-choices class="block-choices" repeat="type.model as type in fundsTargetConversionTypesList"><div>{{::prefixLabel + type.key | translate}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-funds/0.0.2/elements/menu/funds-menuElementView.html",'<li ng-class="{\'active\': isStateActive(\'de.funds\')}" ng-controller="dbnext.funds.MenuElementController" ui-sref="de.funds.content.active"><span eb-themable class="eb-icon eb-icon-investment" style="vertical-align: top"></span> <span eb-msg="funds.investment.title"></span></li>'),a.put("templates/dbnext-funds/0.0.2/elements/widget/funds-widgetElementView.html",'<span ng-controller="dbnext.funds.WidgetController" ng-cloak><span db-lay-tile miniapp-name="dbnext-funds" edit-mode="editMode" product-count="{{fundSummary.totalElements}}"><eb-slide-widget class="fund-widget" content="{{widgetContent}}" items="fundSummary" max-indicators="10" eb-items-promise="fundsPromise" eb-update="submit(ctx, params, rel)"></eb-slide-widget><div ng-if="fundsPromise.$$state.status === 1 && fundSummary.content.length == 0" class="widget-content"><div class="widget-content-inner info-text">{{::\'db.funds.widget.empty_list.marketing_info\'|translate}}<br><a href="{{::\'db.funds.widget.empty_list.link_url\'|translate}}" target="_blank" ng-click="$event.stopPropagation()">{{::\'db.funds.widget.empty_list.link_name\'|translate}}</a></div></div><div class="box-action-panel" ng-click="$event.stopPropagation()"><div class="action-button"><!--<eb-button ui-sref="de.funds.registerForm.register" class="primary icon-right eb-icon eb-ico-plus">--><!--<i eb-themable class="eb-icon eb-icon-investment widget-action-icon"></i><span eb-msg="db.funds.widget.view.new_register"></span>--><!--</eb-button>--><eb-button ng-click="newRegister()" class="primary icon-right eb-icon eb-ico-plus"><i eb-themable class="eb-icon eb-ico-widget-funds widget-action-icon"></i><span eb-msg="db.funds.widget.view.new_register"></span></eb-button></div></div></span></span>'),
a.put("templates/dbnext-funds/0.0.2/elements/widget/funds-widgetElementViewContent.html",'<div class="widget-content"><span class="widget-name">{{::(item.registerStates[0].fundName)}}<br>{{::(item.registerNo)}}</span><div><eb-item-property label="db.funds.widget.content.value" class="widget-summary value-left"><eb-amount amount="item.registerStates[0].valuation" currency="{{item.registerStates[0].currency}}"></eb-amount></eb-item-property><eb-item-property label="db.funds.label.valuation" class="widget-summary big-value value-right"><span style="font-size: 15px; font-weight: 300">{{::(item.registerStates[0].unitBalance | number:6)}}</span></eb-item-property></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/acquisitionForm.html",'<div class="inner-payment-form center-app-header"><eb-content-navigation></eb-content-navigation><div eb-view-swap="viewLoaded"><div id="form-views" ui-view autoscroll="true"></div></div><eb-preloader visible delay="10" class="eb-preloader-default"></eb-preloader></div>'),a.put("templates/dbnext-funds/0.0.2/views/acquisitionFormAccept.html",'<div class="step2 inner-form-padding center-form"><div class="panel-details"><eb-section-header eb-header="db.funds.acquisition.form.step2.header" back-state="de.funds.content.active"></eb-section-header><div class="funds-shaded-header"><div eb-responsive-row label="db.funds.acquisition.step2.row.tfi_offer.label">{{registerNo || acquistionDetails.transactionDetails.registerNo}}</div><div eb-responsive-row label="db.funds.acquisition.step2.row.tfi.label">{{acquistionDetails.transactionDetails.fundName}}</div></div><div class="eb-dbnext-theme form-body"><div eb-responsive-row label="db.funds.acquisition.step2.row.amount.label"><eb-amount amount="acquistionDetails.amount" currency="{{acquistionDetails.currency}}"></eb-amount></div><div eb-responsive-row label="db.funds.acquisition.step2.row.discount_description.label" ng-show="acquistionDetails.transactionDetails.discountDescription != null">{{acquistionDetails.transactionDetails.discountDescription}}</div><div eb-responsive-row label="db.funds.acquisition.step2.row.discount.label" ng-show="acquistionDetails.transactionDetails.discount != null && acquistionDetails.transactionDetails.discount > 0">{{acquistionDetails.transactionDetails.discount}} %</div><div eb-responsive-row label="db.funds.acquisition.step2.row.realization_date.label">{{acquistionDetails.executionDate | amDateFormat : \'DD.MM.YYYY\'}}</div><div eb-responsive-row label="db.funds.acquisition.step2.row.participant.label">{{acquistionDetails.transactionDetails.participant.name}}<br>{{acquistionDetails.transactionDetails.participant.addressPart1}}<br>{{acquistionDetails.transactionDetails.participant.addressPart2}}</div><div eb-responsive-row label="db.funds.acquisition.step2.row.principal.label">{{ acquistionDetails.transactionDetails.principal.name }}</div><div eb-responsive-row label="db.funds.conversion.step1.row.plenipotentiary.label" ng-show="authorizedDetails.isAuthorized">{{\'db.funds.conversion.step1.row.plenipotentiary.value.\' + authorizedDetails.plenipotentiaryDetails.plenipotentiaryType | translate}}</div><div eb-responsive-row label="db.funds.acquisition.step2.row.order_in_promotion.label" ng-if="showDiscount">{{\'db.funds.acquisition.step2.row.order_in_promotion.row.\' + acquistionDetails.transactionDetails.agreementForPromotions | translate }}</div><div eb-responsive-row label="db.funds.acquisition.step2.row.principal_identification.label">{{\'db.funds.acquisition.step2.row.principal_identification.type.value.\'+acquistionDetails.transactionDetails.principal.idType | translate}}{{\'db.funds.acquisition.step2.row.identification.row.number\' | translate}}&nbsp;{{acquistionDetails.transactionDetails.principal.idNumer}}</div></div><div class="shaded-section"><form name="authForm" novalidate><div eb-authorization eb-model="auth" eb-disposition-id="acquistionDetails.transactionId" eb-resource-type="fund_transaction" eb-relation="accept" eb-error-code="{{errorCode}}" eb-text="text" eb-form="authForm" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><span class="regulations-accept-section" ng-include="::pathPrefix + \'/views/fundsTransactionCancellationTerms.html\'"></span><eb-action-footer cancel-label="db.funds.acquisition.step2.form.accept.back" submit-label="db.funds.acquisition.step2.form.accept.submit" cancel-action="back()" submit-action="accept(authForm)"></eb-action-footer></form></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/acquisitionFormFields.html",'<eb-content-navigation></eb-content-navigation><div><div class="inner-form-padding center-form"><div eb-themable><eb-section-header style="padding-top:15px; padding-bottom: 15px" eb-header="db.funds.section_header.acquisition" back-state="de.funds.content.active"></eb-section-header><div class="eb-dbnext-theme"><form name="acquisitionForm" novalidate><div class="eb-dbnext-theme funds-shaded-header"><eb-responsive-row label="db.funds.acquisition.step1.row.tfi.label"><span ng-model="formData.tmpRegisterNo" name="registerNo">{{ register.registerNo }}</span><div eb-validation-messages eb-name="registerNo"><div eb-message-key="contract.purchasesAccountId.error.lack.of.access.in.active.mode"><span eb-msg="db.funds.acquisition.new.step1.row.account_select.validate.access_denied"></span></div><div eb-message-key="register.client.client.has.no.permission.to.registry"><span eb-msg="db.funds.register.client.has.no.permission.to.registry"></span></div><div eb-message-key="register.product.register.is.product"><span eb-msg="db.funds.conversion.step1.row.existing_register.validation.target.register.is_product"></span></div><div eb-message-key="register.tfi.company.is.inactive"><span eb-msg="db.funds.register.new.step1.row.tfi_offer.validate.inactive"></span></div><div eb-message-key="register.plenipotentiary.plenipotentiary.is.inactive"><span eb-msg="db.funds.register.plenipotentiary.is.inactive"></span></div><div eb-message-key="customer.fund.client.has.no.permission.to.module"><span eb-msg="db.funds.customer.client.has.no.permission.to.module"></span></div></div></eb-responsive-row><eb-responsive-row label="db.funds.acquisition.step1.row.fund_name.label">{{ register.registerStates[0].fundName }}</eb-responsive-row></div><div class="form-body form-body-step1"><div eb-responsive-row top label="db.funds.acquisition.step1.row.tbd.label" ng-show="fundDetails.eligibleForPromotion"><div><div eb-checkbox eb-model="formData.formModel.registryDiscount" eb-name="registryDiscount" eb-required="false" ng-click="repeatScroll()" ng-mouseenter="isCheckboxHover = true" ng-mouseleave="isCheckboxHover = false" ng-class="{\'eb-checkbox-hover\' : isCheckboxHover}"></div><!-- no whitespace fix\n\t\t\t\t\t\t\t\t\t--><a class="tbd-message" href="{{fundDetails.promotionRegulationsUrl}}" target="blank" eb-msg="db.funds.register.new.step1.row.tbd.discount.label"></a></div></div><div eb-responsive-row label="db.funds.acquisition.step1.row.amount.label"><div eb-input-amount eb-name="amount" eb-currency-model="{{formData.currencyAcquisition}}" ng-model="formData.formModel.amount" eb-form="acquisitionForm" eb-required="true" eb-missing-amount-msg="{{::\'db.funds.acquisition.step1.row.amount.validate.required\' | translate}}"></div><div eb-validation-messages eb-name="amount"><div eb-message-key="transfer.amount.error.exceeds.available.funds.for.agreement"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.exceeds_available_funds"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.user"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.exceeds_daily_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.user"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.exceeds_single_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.agreement"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.exceeds_daily_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.agreement"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.exceeds_single_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error_amount_exceeds_max_amount_for_elixir"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.exceeds_max_amount_for_elixir"></span></div><div eb-message-key="transfer_order.amount.DecimalMin"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.decimal_min"></span></div><div eb-message-key="transfer_order.amount.DecimalMax"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.decimal_max"></span></div><div eb-message-key="register.transaction.amount.too.low"><span eb-msg="db.funds.acquisition.step1.row.amount.validate.min_acquisition"></span></div><div eb-message-key="register.transaction.limit.exceeded"><span eb-msg="db.funds.register.plenipotentiary.acquisition.limit.exceeded"></span></div></div></div><div eb-responsive-row label="db.funds.acquisition.step1.row.min_amount.label"><eb-amount amount="formData.minAcquisitionValue" currency="{{formData.currencyAcquisition}}"></eb-amount></div><div eb-responsive-row label="db.funds.acquisition.step1.row.acquisition_date.label"><div eb-date-input ng-model="formData.formModel.executionDate" eb-title="{{::\'db.funds.acquisition.step1.row.date_input.placeholder\'|translate}}" date-format="dd.MM.yyyy" name="executionDate" eb-max-date="maxDate" eb-disable-weekend="false" eb-disable-past-dates="true" ng-required="true" date-input-validation-past></div><div eb-validation-messages eb-name="executionDate"><div eb-message-key="past"><span eb-msg="db.funds.acquisition.step1.row.realization_date.validate.past"></span></div><div eb-message-key="required"><span eb-msg="db.funds.acquisition.step1.row.realization_date.validate.required"></span></div><div eb-message-key="format"><span eb-msg="db.funds.acquisition.step1.row.realization_date.validate.format"></span></div><div eb-message-key="maxDate"><span eb-msg="db.funds.register.new.step1.row.realization_date.validate.format"></span></div></div></div><eb-action-footer submit-label="db.funds.acquisition.step1.row.form.submit" submit-action="submit(acquisitionForm)" submit-icon="eb-ico-widget-payments"></eb-action-footer></div></form></div></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/acquittalForm.html",'<div class="inner-payment-form center-app-header"><eb-content-navigation></eb-content-navigation><form name="acquittalForm" novalidate><div><div id="form-views" ui-view autoscroll="true"></div></div></form></div>'),a.put("templates/dbnext-funds/0.0.2/views/acquittalFormAccept.html",'<div class="step2 inner-form-padding center-form"><div class="panel-details"><eb-section-header eb-header="db.funds.section_header.acquittal" back-state="de.funds.content.active"></eb-section-header><div class="funds-shaded-header"><div eb-responsive-row label="db.funds.row.register_number.label">{{registerNo || acquittalDetails.transactionDetails.registerNo}}</div><div eb-responsive-row label="db.funds.details.fund_name">{{acquittalDetails.transactionDetails.fundName}}</div></div><div class="form-body form-body-step2"><div eb-responsive-row label="db.funds.acquittal.step1.row.acquittal_type.label"><span ng-show="acquittalDetails.fullyRepurchasesOrConversion" eb-msg="db.funds.conversion.step2.row.conversion_type.full"></span> <span ng-show="!acquittalDetails.fullyRepurchasesOrConversion && acquittalDetails.numberOfUnits != null" eb-msg="db.funds.conversion.step2.row.conversion_type.units"></span> <span ng-show="!acquittalDetails.fullyRepurchasesOrConversion && acquittalDetails.numberOfUnits == null && acquittalDetails.amount != null" eb-msg="db.funds.conversion.step2.row.conversion_type.amount"></span></div><eb-responsive-row label="db.funds.acquittal.step2.row.amount.label" ng-show="!acquittalDetails.fullyRepurchasesOrConversion && acquittalDetails.amount != null"><eb-amount amount="acquittalDetails.amount" currency="{{ acquittalDetails.currency || \'PLN\'}}"></eb-amount></eb-responsive-row><eb-responsive-row label="db.funds.acquittal.step2.row.units_count.label" ng-show="!acquittalDetails.fullyRepurchasesOrConversion && acquittalDetails.amount == null"><span class="units-count-value">{{acquittalDetails.numberOfUnits | number:6}}</span></eb-responsive-row><div eb-responsive-row label="db.funds.acquittal.step2.row.participant.label">{{acquittalDetails.transactionDetails.participant.name}}<br>{{acquittalDetails.transactionDetails.participant.addressPart1}}<br>{{acquittalDetails.transactionDetails.participant.addressPart2}}</div><div eb-responsive-row label="db.funds.acquittal.step2.row.principal.label">{{acquittalDetails.transactionDetails.principal.name}}</div><div eb-responsive-row label="db.funds.acquittal.step2.row.principal_identification.label">{{\'db.funds.conversion.step2.row.principal_identification.type.value.\'+acquittalDetails.transactionDetails.principal.idType | translate}}{{\'db.funds.conversion.step2.row.identification.row.number\' | translate}}&nbsp;{{acquittalDetails.transactionDetails.principal.idNumer}}</div></div><div class="shaded-section"><form name="authform" novalidate><div><div eb-authorization eb-model="auth" eb-disposition-id="acquittalDetails.transactionId" eb-resource-type="fund_transaction" eb-relation="accept_fund_transaction" eb-error-code="{{errorCode}}" eb-text="text" eb-form="authform" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><span class="regulations-accept-section" ng-include="::pathPrefix + \'/views/fundsTransactionCancellationTerms.html\'"></span><eb-action-footer cancel-label="db.funds.acquittal.step2.form.back" submit-label="db.funds.acquittal.step2.form.submit" cancel-action="back()" submit-action="accept(authform)"></eb-action-footer></div></form></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/acquittalFormFields.html",'<eb-content-navigation></eb-content-navigation><div><div class="inner-form-padding center-form"><div eb-themable><eb-section-header style="padding-top:15px; padding-bottom: 15px" eb-header="db.funds.section_header.acquittal" back-state="de.funds.content.active"></eb-section-header><div class="funds-shaded-header"><eb-responsive-row label="db.funds.acquisition.step1.row.tfi.label">{{ formData.registerNo }}</eb-responsive-row><eb-responsive-row label="db.funds.acquisition.step1.row.fund_name.label">{{ formData.tfi_offer }}</eb-responsive-row></div><div class="form-body form-body-step1"><div eb-responsive-row label="db.funds.acquittal.step1.row.acquittal_type.label"><div db-funds-conversion-type-select prefix-label="db.funds.conversion.step1.row.conversion_type." placeholder="{{::\'db.funds.conversion.step1.row.conversion_type.placeholder\'|translate}}" ng-model="formData.formModel.acquittalType" name="acquittalType"></div><div eb-validation-messages eb-name="acquittalType"><div eb-message-key="funds_register.acquittalType.NotNull"><span eb-msg="db.funds.acquittal.step1.row.acquittal_type.validation.not_null"></span></div><div eb-message-key="customer.fund.client.has.no.permission.to.module"><span eb-msg="db.funds.customer.client.has.no.permission.to.module"></span></div></div></div><div eb-responsive-row label="db.funds.register.new.step1.row.amount.label"><div eb-input-amount eb-name="amount" eb-currency-model="{{formData.register.registerStates[0].currency}}" ng-model="formData.formModel.amount" eb-form="acquittalForm" eb-required="formData.amountFieldRequired" convert-units-unit-validators eb-disabled="formData.amountFieldDisabled" eb-missing-amount-msg="{{::\'db.funds.acquittal.step1.row.amount.validate.null\' | translate}}"></div><div eb-validation-messages eb-name="amount"><div eb-message-key="transfer.amount.error.exceeds.available.funds.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_available_funds"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.user"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_daily_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.user"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_single_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_daily_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_single_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error_amount_exceeds_max_amount_for_elixir"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_max_amount_for_elixir"></span></div><div eb-message-key="transfer_order.amount.DecimalMin"><span eb-msg="db.payments.new.step1.row.amount.validate.decimal_min"></span></div><div eb-message-key="transfer_order.amount.DecimalMax"><span eb-msg="db.payments.new.step1.row.amount.validate.decimal_max"></span></div></div></div><div eb-responsive-row label="db.funds.acquittal.step1.row.units_quantity.label"><input type="text" class="funds-units-quantity-input" ng-model="formData.formModel.numberOfUnits" name="numberOfUnits" placeholder="{{::\'db.funds.acquittal.step1.row.units_quantity.placeholder\' | translate}}" acqittal-unit-validators ng-focus="isEditModeUnits=true" ng-blur="isEditModeUnits=false" ng-disabled="formData.numerFieldDisabled" ng-required="formData.numerFieldRequired" eb-number-pattern="[0-9]{0,12}([,\\.]|([,\\.][0-9]{1,6}))?"><div eb-validation-messages eb-name="numberOfUnits"><div eb-message-key="acquittal.numberOfUnits.too.low"><span eb-msg="db.funds.acquittal.step1.row.numberOfUnits.validate.numberOfUnits.too.low"></span></div><div eb-message-key="minUnits"><span eb-msg="db.funds.acquittal.step1.row.numberOfUnits.validate.numberOfUnits.too.low"></span></div><div eb-message-key="required"><span eb-msg="db.funds.acquittal.step1.row.numberOfUnits.validate.required"></span></div><div eb-message-key="noDigits"><span eb-msg="db.funds.acquittal.step1.row.numberOfUnits.validate.required"></span></div></div></div><eb-action-footer submit-label="db.funds.acquittal.step1.form.submit" submit-action="submit(acquittalForm)"></eb-action-footer></div></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/cancellationTransactionForm.html",'<div eb-themable><div><eb-section-header eb-header="db.funds.transactions.cancellation.form.header" back-state="{{ backState }}"></eb-section-header><div class="eb-dbnext-theme form-body" ng-show="transactionDetailsPromise.$$state.status === 1"><eb-responsive-row label="db.funds.transactions.details.register_no"><span ng-show="transaction.transactionDetails.registerNo">{{transaction.transactionDetails.registerNo}}</span> <span ng-show="!transaction.transactionDetails.registerNo">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.fund_name"><span ng-show="transaction.transactionDetails.fundName">{{transaction.transactionDetails.fundName}}</span> <span ng-show="!transaction.transactionDetails.fundName">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.ref_no"><span ng-show="transaction.transactionDetails.referenceNumber">{{transaction.transactionDetails.referenceNumber}}</span> <span ng-show="!transaction.transactionDetails.referenceNumber">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_type"><span ng-show="transaction.transactionType" eb-msg-var key="db.funds.transactions.type" variable="transaction.transactionType"></span> <span ng-show="!transaction.transactionType">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_tfi_type"><span ng-show="transaction.transactionDetails.tfiTransactionType">{{transaction.transactionDetails.tfiTransactionType}}</span> <span ng-show="!transaction.transactionDetails.tfiTransactionType">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_status"><span ng-show="transaction.status" eb-msg-var key="db.funds.transactions.status" variable="transaction.status"></span> <span ng-show="!transaction.status">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_tfi_status">{{transaction.transactionDetails.tfiStatus}} <span ng-show="transaction.transactionDetails.tfiStatus">{{transaction.transactionDetails.tfiStatus}}</span> <span ng-show="!transaction.transactionDetails.tfiStatus">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.realization_date"><span ng-show="transaction.executionDate">{{ transaction.executionDate| date: \'dd.MM.yyyy\'}}</span> <span ng-show="!transaction.executionDate">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.process_date"><span ng-show="transaction.transactionDetails.convertationDate">{{ transaction.transactionDetails.convertationDate | date: \'dd.MM.yyyy\'}}</span> <span ng-show="!transaction.transactionDetails.convertationDate">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.amount"><eb-amount ng-show="!transaction.fullyRepurchasesOrConversion && transaction.amount != null" amount="transaction.amount" currency="{{ transaction.currency || \'PLN\'}}"></eb-amount><span ng-show="transaction.fullyRepurchasesOrConversion" class="full-unit-conversion" eb-msg="db.funds.transactions.amount.full"></span><span ng-show="!transaction.fullyRepurchasesOrConversion && transaction.amount == null"><span class="units-count-value">{{transaction.numberOfUnits}}</span>&nbsp;<span class="units-count-label" eb-msg="db.funds.transactions.units_count"></span></span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.discount_description" ng-show="transaction.transactionDetails.agreementForPromotions">{{transaction.transactionDetails.discountDescription}}</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.discount" ng-show="transaction.transactionDetails.agreementForPromotions">{{transaction.transactionDetails.discount}} %</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.source_of_income"><span ng-show="transaction.transactionDetails.assetsOrigin != null" db-funds-source-of-assets source-id="transaction.transactionDetails.assetsOrigin"></span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.sender"><span ng-show="transaction.transactionDetails.principal.name">{{transaction.transactionDetails.principal.name}}</span> <span ng-show="!transaction.transactionDetails.principal.name">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.is_pep_client"><span eb-msg-var key="db.funds.transactions.pep" variable="transaction.transactionDetails.pep" ng-show="transaction.transactionDetails.pep != null"></span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.participant" top>{{transaction.transactionDetails.participant.name}}<br>{{transaction.transactionDetails.participant.addressPart1}}<br>{{transaction.transactionDetails.participant.addressPart2}}</eb-responsive-row><div class="shaded-section"><form name="authForm" novalidate><div eb-authorization eb-model="auth" eb-disposition-id="transaction.transactionId" eb-resource-type="fund_transaction" eb-relation="cancel" eb-error-code="{{errorCode}}" eb-text="text" eb-form="authForm" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><span class="regulations-accept-section" ng-include="::pathPrefix + \'/views/fundsTransactionCancellationTerms.html\'"></span><eb-action-footer cancel-label="db.funds.transactions.cancellation.accept.back" submit-label="db.funds.transactions.cancellation.accept.submit" cancel-action="back()" submit-action="submit(authForm)"></eb-action-footer></form></div></div></div><eb-preloader eb-promise="transactionDetailsPromise" class="eb-preloader-default" eb-rejected-message="{{::\'db.funds.transactions.details.rejected_response\'|translate}}"></eb-preloader></div>'),a.put("templates/dbnext-funds/0.0.2/views/convertUnitsForm.html",'<div class="inner-payment-form center-app-header"><eb-content-navigation></eb-content-navigation><div style="position:relative" eb-view-swap="viewLoaded"><div class="inner-form-padding center-form"><div eb-themable><eb-section-header eb-header="db.funds.convertion.step1.form.header" back-state="{{currentTabState.stateName}}"></eb-section-header><form name="conversionUnitsForm" novalidate><div class="funds-shaded-header"><div eb-responsive-row label="db.funds.conversion.step1.row.no.label">{{formData.registerNo}} <input ng-model="formData.account" type="hidden" name="account"><div eb-validation-messages eb-name="account"><div eb-message-key="register.account.register.no.accounts"><span eb-msg="db.funds.conversion.step1.row.no.validate.no_account"></span></div><div eb-message-key="register.participance.participance.not.individual"><span eb-msg="db.funds.conversion.step1.row.no.validate.participance_no_individual"></span></div><div eb-message-key="contract.purchasesAccountId.error.lack.of.access.in.active.mode"><span eb-msg="db.funds.conversion.new.step1.row.account_select.validate.access_denied"></span></div><div eb-message-key="register.participance.participance.not.active"><span eb-msg="db.funds.conversion.step1.row.no.validate.participance_no_active"></span></div><div eb-message-key="register.fund.fund.is.inactive"><span eb-msg="db.funds.conversion.step1.row.new_register.validate.inactive"></span></div><div eb-message-key="register.plenipotentiary.plenipotentiary.is.inactive"><span eb-msg="db.funds.register.plenipotentiary.is.inactive"></span></div><div eb-message-key="customer.fund.client.has.no.permission.to.module"><span eb-msg="db.funds.customer.client.has.no.permission.to.module"></span></div></div></div><div eb-responsive-row label="db.funds.conversion.step1.row.tfi_offer.label">{{formData.tfi_offer}}</div><div eb-responsive-row label="db.funds.conversion.step1.row.plenipotentiary.label" ng-if="formData.register.plenipotentiaryDetails">{{\'db.funds.conversion.step1.row.plenipotentiary.value.\' + formData.register.plenipotentiaryDetails.plenipotentiaryType | translate}}</div></div><div class="form-body"><div ui-view autoscroll="true"></div><eb-action-footer submit-label="db.funds.conversion.step1.form.submit" submit-action="submit(\tconversionUnitsForm)" submit-icon="eb-ico-widget-payments"></eb-action-footer></div></form></div></div></div><eb-preloader visible delay="10" class="eb-preloader-default"></eb-preloader></div>'),a.put("templates/dbnext-funds/0.0.2/views/convertUnitsFormAccept.html",'<div class="step2 inner-form-padding center-form"><div class="panel-details"><eb-section-header eb-header="db.funds.convertion.step2.form.header" back-state="de.funds.content.active"></eb-section-header><div class="form-body form-body-step2"><div eb-responsive-row label="db.funds.conversion.step2.row.no.label">{{registerNo || conversionDetails.transactionDetails.registerNo}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.tfi_offer.label">{{conversionDetails.transactionDetails.fundName}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.plenipotentiary.label" ng-if="plenipotentiaryDetails">{{\'db.funds.conversion.step2.row.plenipotentiary.value.\' + plenipotentiaryDetails.plenipotentiaryType | translate}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.conversion_type.label"><span ng-show="conversionDetails.fullyRepurchasesOrConversion" eb-msg="db.funds.conversion.step2.row.conversion_type.full"></span> <span ng-show="!conversionDetails.fullyRepurchasesOrConversion && conversionDetails.numberOfUnits != null" eb-msg="db.funds.conversion.step2.row.conversion_type.units"></span> <span ng-show="!conversionDetails.fullyRepurchasesOrConversion && conversionDetails.numberOfUnits == null && conversionDetails.amount != null" eb-msg="db.funds.conversion.step2.row.conversion_type.amount"></span></div><div eb-responsive-row label="db.funds.conversion.step2.row.units_quantity.label" ng-show="!conversionDetails.fullyRepurchasesOrConversion && conversionDetails.numberOfUnits != null">{{conversionDetails.numberOfUnits}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.amount.label" ng-show="!conversionDetails.fullyRepurchasesOrConversion && conversionDetails.numberOfUnits == null && conversionDetails.amount != null"><eb-amount amount="conversionDetails.amount" currency="{{conversionDetails.currency}}"></eb-amount></div><div eb-responsive-row label="db.funds.conversion.step2.row.discount.label" ng-show="conversionDetails.transactionDetails.discount != null && conversionDetails.transactionDetails.discount > 0">{{conversionDetails.transactionDetails.discount}}%</div><div eb-responsive-row label="db.funds.conversion.step2.row.discount_description.label" ng-show="acquistionDetails.transactionDetails.discountDescription != null">{{conversionDetails.transactionDetails.discountDescription}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.target_conversion_type.label"><span ng-show="conversionDetails.transactionDetails.targetPartRegister.registerId == null" eb-msg="db.funds.conversion.step2.row.target_conversion_type.NEW_REGISTER"></span> <span ng-show="conversionDetails.transactionDetails.targetPartRegister.registerId != null" eb-msg="db.funds.conversion.step2.row.target_conversion_type.EXISTING_REGISTER"></span></div><div eb-responsive-row label="db.funds.conversion.step2.row.tfi_offer.label">{{conversionDetails.transactionDetails.targetPartRegister.fundName}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.assets_origin.label" ng-if="conversionDetails.transactionDetails.assetsOrigin"><span ng-show="conversionDetails.transactionDetails.assetsOrigin != null" db-funds-source-of-assets source-id="conversionDetails.transactionDetails.assetsOrigin"></span></div><div eb-responsive-row label="db.funds.conversion.step2.row.participant.label">{{conversionDetails.transactionDetails.participant.name}}<br>{{conversionDetails.transactionDetails.participant.addressPart1}}<br>{{conversionDetails.transactionDetails.participant.addressPart2}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.principal.label">{{conversionDetails.transactionDetails.principal.name}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.pep.label" ng-if="conversionDetails.transactionDetails.pep">{{\'db.funds.conversion.step2.row.pep.value.\'+ conversionDetails.transactionDetails.pep | translate}}</div><div eb-responsive-row label="db.funds.conversion.step2.row.principal_identification.label">{{\'db.funds.conversion.step2.row.principal_identification.type.value.\'+conversionDetails.transactionDetails.principal.idType | translate}}{{\'db.funds.conversion.step2.row.identification.row.number\' | translate}}&nbsp;{{conversionDetails.transactionDetails.principal.idNumer}}</div></div><div class="shaded-section"><form name="authForm" novalidate><div eb-authorization eb-model="auth" eb-disposition-id="conversionDetails.transactionId" eb-resource-type="fund_transaction" eb-relation="accept" eb-error-code="{{errorCode}}" eb-text="text" eb-form="authForm" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><span class="regulations-accept-section" ng-include="::pathPrefix + \'/views/fundsTransactionCancellationTerms.html\'"></span><eb-action-footer cancel-label="db.funds.conversion.step2.form.back" submit-label="db.funds.conversion.step2.form.submit" cancel-action="back()" submit-action="accept(authForm)"></eb-action-footer></form></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/convertUnitsFormFields.html",'<div eb-responsive-row label="db.funds.conversion.step1.row.conversion_type.label"><div db-funds-conversion-type-select prefix-label="db.funds.conversion.step1.row.conversion_type." placeholder="{{::\'db.funds.conversion.step1.row.conversion_type.placeholder\'|translate}}" ng-model="formData.formModel.convesionType" name="convesionType"></div><div eb-validation-messages eb-name="convesionType"><div eb-message-key="funds_register.convesionType.NotNull"><span eb-msg="db.funds.conversion.step1.row.conversion_type.validation.not_null"></span></div></div></div><div eb-responsive-row label="db.funds.conversion.step1.row.amount.label"><div eb-input-amount eb-name="amount" eb-currency-model="{{formData.register.registerStates[0].currency}}" ng-model="formData.formModel.amount" eb-min-amount="fundDetails.minConvertionValue" eb-form="conversionUnitsForm" eb-required="formData.amountFieldRequired" eb-disabled="formData.amountFieldDisabled" eb-missing-amount-msg="{{::\'db.funds.conversion.step1.row.amount.validate.null\' | translate}}" eb-min-amount-msg="{{::\'db.funds.conversion.step1.row.amount.validate.amount.too.low\' | translate}}"></div><div eb-validation-messages eb-name="amount"><div eb-message-key="transfer.amount.error.exceeds.available.funds.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_available_funds"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.user"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_daily_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.user"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_single_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_daily_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_single_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error_amount_exceeds_max_amount_for_elixir"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_max_amount_for_elixir"></span></div><div eb-message-key="transfer_order.amount.DecimalMin"><span eb-msg="db.payments.new.step1.row.amount.validate.decimal_min"></span></div><div eb-message-key="transfer_order.amount.DecimalMax"><span eb-msg="db.payments.new.step1.row.amount.validate.decimal_max"></span></div><div eb-message-key="conversion.amount.amount.too.low"><span eb-msg="db.funds.conversion.step1.row.amount.validate.amount.too.low"></span></div><div eb-message-key="minAmountConvert"><span eb-msg="db.funds.conversion.step1.row.amount.validate.amount.too.low"></span></div></div></div><div eb-responsive-row label="db.funds.conversion.step1.row.units_quantity.label"><input type="text" convert-units-unit-validators min-units="{{fundDetails.minConvertionUnit}}" ng-focus="isEditModeUnits=true" ng-blur="isEditModeUnits=false" ng-model="formData.formModel.numberOfUnits" class="funds-units-quantity-input" name="numberOfUnits" ng-disabled="formData.numerFieldDisabled" ng-required="formData.numerFieldRequired" placeholder="{{::\'db.funds.conversion.step1.row.units_quantity.placeholder\' | translate}}" eb-number-pattern="[0-9]{0,12}([,\\.]|([,\\.][0-9]{1,6}))?"><div eb-validation-messages eb-name="numberOfUnits"><div eb-message-key="coversion.numberOfUnits.numberOfUnits.too.low"><span eb-msg="db.funds.conversion.step1.row.numberOfUnits.validate.numberOfUnits.too.low"></span></div><div eb-message-key="required"><span eb-msg="db.funds.conversion.step1.row.numberOfUnits.validate.required"></span></div><div eb-message-key="minUnits"><span eb-msg="db.funds.conversion.step1.row.numberOfUnits.validate.minUnits"></span></div><div eb-message-key="maxUnits"><span eb-msg="db.funds.conversion.step1.row.numberOfUnits.validate.maxUnits"></span></div><div eb-message-key="noDigits"><span eb-msg="db.funds.conversion.step1.row.numberOfUnits.validate.required"></span></div></div></div><div eb-responsive-row label="db.funds.conversion.step1.row.target_conversion_type.label"><div db-funds-target-conversion-type-select prefix-label="db.funds.conversion.step1.row.target_conversion_type." placeholder="{{::\'db.funds.conversion.step1.row.target_conversion_type.placeholder\'|translate}}" ng-model="formData.formModel.targetConversionType" name="targetConversionType"></div><div eb-validation-messages eb-name="targetConversionType"><div eb-message-key="funds_register.targetConversionType.NotNull"><span eb-msg="db.funds.conversion.step1.row.target_conversion_type.validation.not_null"></span></div></div></div><div collapse="formData.formModel.targetConversionType == undefined || formData.formModel.targetConversionType == \'NEW_REGISTER\'"><div eb-responsive-row label="db.funds.conversion.step1.row.existing_register.label"><div db-funds-register-select placeholder="{{::\'db.funds.conversion.step1.row.existing_register.placeholder\'|translate}}" name="targetRegisterId" ng-model="formData.formModel.targetRegisterId" ng-disabled="formData.targetRegisterSelectDisabled" ng-required="formData.targetRegisterSelectRequired" only-active="true" filter-for-conversion-from-own-register="!formData.register.isAuthorized" filter-for-conversion-from-authorized-register="formData.register.isAuthorized" current-register="formData.register"></div><div eb-validation-messages eb-name="targetRegisterId"><div eb-message-key="required"><span eb-msg="db.funds.conversion.step1.row.existing_register.validation.not_null"></span></div><div eb-message-key="funds_register.targetRegisterId.NotNull"><span eb-msg="db.funds.conversion.step1.row.existing_register.validation.not_null"></span></div><div eb-message-key="customer.participance.customer.is.not.participant"><span eb-msg="db.funds.conversion.step1.row.existing_register.validation.not_participant"></span></div><div eb-message-key="conversion.targetRegisterId.target.register.different.from.participation"><span eb-msg="db.funds.conversion.step1.row.existing_register.validation.target.register.different.from.participation"></span></div><div eb-message-key="register.register.register.is.not.active"><span eb-msg="db.funds.conversion.step1.row.existing_register.validation.target.register.not_active"></span></div><div eb-message-key="register.product.register.is.product"><span eb-msg="db.funds.conversion.step1.row.existing_register.validation.target.register.is_product"></span></div></div></div></div><div collapse="formData.formModel.targetConversionType == undefined || formData.formModel.targetConversionType != \'NEW_REGISTER\'"><div eb-responsive-row label="db.funds.conversion.step1.row.new_register.label"><div db-funds-tfi-offer-select tfi-id="formData.register.tfi.tfiId" placeholder="{{::\'db.funds.conversion.step1.row.new_register.placeholder\'|translate}}" ng-model="formData.targetFund" ng-disabled="formData.targetFundSelectDisabled" ng-required="formData.targetFundSelectRequired" name="fund" blocked-tfi-offer-ids="formData.blockedTfiOfferIds"></div><div eb-validation-messages eb-name="fund"><div eb-message-key="required"><span eb-msg="db.funds.register.new.step1.row.tfi_offer.validate.required"></span></div></div></div><div eb-responsive-row><div class="tbd-pep"><div class="pep-checkbox" eb-checkbox eb-model="formData.formModel.pep" eb-name="pep" eb-required="false" ng-click="repeatScroll()" ng-mouseenter="isPepCheckboxHover = true" ng-mouseleave="isPepCheckboxHover = false" ng-class="{\'eb-checkbox-hover\' : isPepCheckboxHover}"></div><!-- no whitespace fix\n        --><span class="tbd-message" ng-click="formData.formModel.pep = !formData.formModel.pep" eb-msg="db.funds.conversion.step1.row.pep.label" ng-mouseenter="isPepCheckboxHover = true" ng-mouseleave="isPepCheckboxHover = false"></span></div></div><div eb-responsive-row label="db.funds.conversion.step1.row.assets_origin.label"><div db-funds-source-of-assets-select ng-model="formData.formModel.moneySourceId" name="moneySourceId" placeholder="{{::\'db.funds.conversion.step1.row.assets_origin.placeholder\'|translate}}"></div><div eb-validation-messages eb-name="moneySourceId"><div eb-message-key="funds_register.moneySourceId.NotNull"><span eb-msg="db.funds.register.new.step1.row.assets_origin.validation.not_null"></span></div></div></div></div>'),
a.put("templates/dbnext-funds/0.0.2/views/dispositionContent.html",'<div eb-themable><eb-section-header eb-header="db.funds.disposition.history" eb-description="{{::register.registerStates[0].fundName}}" back-state="{{backState}}"></eb-section-header><div class="eb-filter-header-container"><div class="row eb-filter-header"><span eb-container class="padding small"><div class="col-xs-6 col-md-6 text-left eb-filter-clean"><span ng-show="showClearFilter" ng-click="clearFilter()" style="cursor: pointer" eb-msg="funds.filter.label.clear"></span></div><div class="col-xs-6 col-md-6 text-right eb-filter-switch" ng-class="{\'pull-right\': !showFilter}"><div ng-click="showFilterWindow()" style="cursor: pointer"><i eb-themable class="eb-icon" style="font-size: 1.3em" ng-class="{\'eb-ico-filter-applied\': showFilter == true , \'eb-ico-filter-show\': showFilter == false}"></i> <span ng-if="showFilter" class="link" eb-msg="transaction.filter.label.hide"></span> <span ng-if="!showFilter" class="link" eb-msg="transaction.filter.label.show"></span></div></div></span></div></div><div ng-show="showFilter"><db-funds-disposition-filter ng-model="filterParams" context="dispositionList" callback="submit(ctx, params)"></db-funds-disposition-filter></div><db-tabs eb-model="filterParams.statusFundCriteria" eb-tabs="tabs" ng-hide="details"></db-tabs><div ui-view autoscroll="true" ng-class="anim_class" ng-swipe-left="emitTabChange(\'left\')" ng-swipe-right="emitTabChange(\'right\')" class="animate-on"></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/dispositionContentTab.html",'<div eb-themable><eb-list class="time-based-list" eb-promise="dispositionListPromise"><div eb-list-item class="row" ng-repeat="disposition in dispositionList.content | filter:{wrappedText : filterOptions.paymentName}"><eb-list-item-content class="item-content-with-actions"><div class="date-cell cell_1_in_3"><span>{{::disposition.executionDate | date : \'dd.MM.yyyy\'}}</span></div><!-- no whitespace fix--><div class="actions-cell"><div class="default-desktop-option"><a ng-click="prepareDetails(disposition)" store-context="fund"><span eb-msg="db.funds.dispositions.options.details"></span></a></div><div class="options" ng-click="$event.stopPropagation()"><div eb-list-options ng-class="{\'editable-option-hide\': fund.visible}"><li class="option-hidden-when-desktop"><a class="option-row" ng-click="prepareDetails(disposition)"><span eb-themable class="eb-icon eb-ico-details options-icon"></span><span class="option-label" eb-msg="db.funds.dispositions.options.details"></span></a></li><li ng-if="hasLink(disposition, \'download_disposition_details\')"><a href="{{disposition.link}}" target="{{disposition.target}}" class="option-row"><span eb-themable class="eb-icon eb-icon-print options-icon"></span> <span class="option-label" eb-msg="db.funds.dispositions.download"></span></a></li></div></div></div><!-- no whitespace fix--><div class="amount-property-cell date-cell cell_3_in_3">{{::disposition.conversionDate | date : \'dd.MM.yyyy\'}}</div><!-- no whitespace fix--><div class="description-property-cell cell_2_in_3">{{\'db.funds.dispositions.type.\'+disposition.type | translate}}</div></eb-list-item-content></div><div class="miniapp-empty-list" ng-if="dispositionList.content.length == 0">{{::"db.funds.dispositions.empty_list"|translate}}</div><div class="miniapp-empty-list" ng-if="dispositionList.length == 0">{{::"db.funds.dispositions.list_data_error"|translate}}</div></eb-list><div ng-show="dispositionListPromise.$$state.status === 1"><eb-pagination eb-data="dispositionList" eb-params="filterParams" eb-loading="loading" eb-pagination-count="5" scroll-to="dispositionListId" callback="relationSearch(ctx, params, rel)"></eb-pagination></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/dispositionDetails.html",'<div eb-themable><div ng-show="dispositionDetailsPromise.$$state.status === 1"><eb-section-header eb-header="db.funds.dispositions.details" back-state="{{initialData.backState}}"></eb-section-header><div class="eb-dbnext-theme form-body"><eb-responsive-row label="db.funds.disposition.details.tfi">{{register.registerNo}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.fund_name">{{register.registerStates[0].fundName}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.ref_no">{{dispositionDetails.referenceNumber}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.distributor">{{dispositionDetails.distributor.fullName}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.dealer">{{dispositionDetails.dealer}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.pok">{{dispositionDetails.servicePointDetails.name}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.status">{{\'db.funds.disposition.status.\'+dispositionDetails.status | translate}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.type">{{\'db.funds.dispositions.type.\'+dispositionDetails.type | translate}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.tfi_type">{{dispositionDetails.typeByTfi}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.date">{{dispositionDetails.executionDate | date: \'dd.MM.yyyy\'}}</eb-responsive-row><eb-responsive-row label="db.funds.disposition.details.at_date">{{dispositionDetails.conversionDate | date: \'dd.MM.yyyy\'}}</eb-responsive-row></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/fundsAcceptTerms.html",'<div eb-themable class="funds-accept-terms"><div class="funds-accept-terms-content"><div class="funds-accept-terms-title"><span eb-msg="db.funds.accept_terms.title"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.intro"></span></div><div class="funds-accept-terms-link"><a href="{{::\'db.funds.accept_terms.link_url\' | translate}}" target="_blank"><span eb-msg="db.funds.accept_terms.link_label"></span></a></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.1"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.2"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.3"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.4"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.5"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.6"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.7"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.8"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.9"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.10"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.11"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.12"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.13"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.14"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.15"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.16"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.accept_terms.paragraph.content.end"></span></div><form name="fundsTermsAcceptForm" novalidate ng-submit="submit(fundsTermsAcceptForm)"><div class="funds-accept-terms-paragraph"><div eb-checkbox eb-model="fundsTermsAcceptForm.acceptTerms" eb-required="true" eb-name="fundsTerms" ng-mouseenter="isCheckboxHover = true" ng-mouseleave="isCheckboxHover = false" ng-class="{\'eb-checkbox-hover\' : isCheckboxHover}"></div><span class="accept-term-message" ng-click="fundsTermsAcceptForm.acceptTerms=!fundsTermsAcceptForm.acceptTerms" eb-msg="db.funds.accept_terms.checkbox.label" prevent-orphans ng-mouseenter="isCheckboxHover = true" ng-mouseleave="isCheckboxHover = false"></span><div eb-validation-messages eb-name="fundsTerms"><div eb-message-key="required"><span eb-msg="db.funds.accept_terms.checkbox.validate.required"></span></div></div></div></form></div><div class="accept-button-footer"><eb-action-footer submit-label="db.funds.accept_terms.submit" submit-action="submitAcceptFundsTerms(fundsTermsAcceptForm)"></eb-action-footer></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/fundsTransactionCancellationTerms.html",'<div eb-themable class="funds-accept-terms"><div class="funds-accept-terms-content"><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.1"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.2"></span></div><div class="funds-accept-terms-link"><a href="{{::\'db.funds.transactions.cancellation.accept_terms.link_url\' | translate}}" target="_blank"><span eb-msg="db.funds.transactions.cancellation.accept_terms.link_label"></span></a> <span class="funds-accept-terms-link-text-after" eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.2.text_after_link"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.3"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.4"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.5"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.6"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.7"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.8"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.9"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.10"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.11"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.12"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.13"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.13.p1"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.13.p2"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.13.p3"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.14"></span></div><div class="funds-accept-terms-paragraph"><span prevent-orphans eb-msg="db.funds.transactions.cancellation.accept_terms.paragraph.content.15"></span></div><div class="funds-accept-terms-paragraph"><div eb-checkbox eb-model="fundsTermsAcceptForm.acceptTerms" eb-required="true" eb-name="fundsTerms" ng-mouseenter="isCheckboxHover = true" ng-mouseleave="isCheckboxHover = false" ng-class="{\'eb-checkbox-hover\' : isCheckboxHover}"></div><span class="accept-term-message" ng-click="fundsTermsAcceptForm.acceptTerms=!fundsTermsAcceptForm.acceptTerms" eb-msg="db.funds.accept_terms.checkbox.label" prevent-orphans ng-mouseenter="isCheckboxHover = true" ng-mouseleave="isCheckboxHover = false"></span><div eb-validation-messages eb-name="fundsTerms"><div eb-message-key="required"><span eb-msg="db.funds.accept_terms.checkbox.validate.required"></span></div></div></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/fundsTransactionHistory.html",'<div eb-themable><eb-section-header eb-header="funds.transactions.label.header" eb-description="{{fund.registerStates.fundName}}" back-state="de.funds.content"></eb-section-header><!--<div class="eb-filter-header-container">\n        <div class="row eb-filter-header">\n            <span eb-container class="padding small">\n                <div class="col-xs-6 col-md-6 text-left eb-filter-clean">\n                    <span ng-show="showClearFilter" ng-click="clearFilter()"  style="cursor: pointer;" eb-msg="funds.transactions.filter.label.clear"></span>\n                </div>\n                <div class="col-xs-6 col-md-6 text-right eb-filter-switch" ng-class="{\'pull-right\': !showFilter}">\n                    <div ng-click="showFilterWindow()" style="cursor: pointer;">\n                        <i eb-themable class="eb-icon" style="font-size: 1.3em"\n                           ng-class="{\'eb-ico-filter-applied\': showFilter == true , \'eb-ico-filter-show\': showFilter == false}"></i>\n                        <span ng-if="showFilter" class="link" eb-msg="funds.transactions.filter.label.hide"></span>\n                        <span ng-if="!showFilter" class="link" eb-msg="funds.transactions.filter.label.show"></span>\n                    </div>\n                </div>\n            </span>\n        </div>\n    </div>--><div eb-filter-control show-filter="showFilter"></div><div ng-show="showFilter"><db-fnd-transaction-filter ng-model="filterParams" context="fundsTransactionHistoryList" callback="submit(ctx, params)"></db-fnd-transaction-filter></div><eb-list id="fundsTransactionHistoryListId" class="time-based-list" ng-class="{\'filter-displayed\':showFilter}" eb-promise="fundsTransactionHistoryPromise"><eb-list-item class="row" ng-repeat="transaction in fundsTransactionHistoryList.content | filter:searchFilter"><eb-list-item-content class="item-content-with-actions"><div class="date-cell cell_1_in_3"><span>{{transaction.executionDate | amDateFormat : \'DD.MM.YYYY\'}}</span></div><!-- no whitespace fix--><div class="actions-cell"><div class="default-desktop-option"><a ui-sref="^.details" store-context="transaction"><span eb-msg="de.funds.options.label.details"></span></a></div><div class="options"><div eb-list-options><li class="option-hidden-when-desktop"><a class="option-row" ui-sref="^.details" store-context="transaction"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="funds.options.label.details"></span></a></li><li ng-if="hasLink(transaction, \'create_payment_cancellation\')"><a class="option-row" ui-sref="de.funds.cancel" store-context="transaction"><span eb-themable class="eb-icon eb-ico-close options-icon"></span> <span class="option-label" eb-msg="db.funds.templates.list.options.delete"></span></a></li><li ng-if="hasLink(transaction, \'download_payment_details\')"><a href="{{transaction.link}}" target="{{transaction.target}}"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="funds.statements.options.label.download"></span></a></li></div></div></div><!-- no whitespace fix--><div class="amount-property-cell cell_3_in_3"><eb-amount amount="transaction.amount" currency="{{transaction.currency}}" highlight-negative></eb-amount></div><!-- no whitespace fix--><div class="description-property-cell cell_2_in_3"><div><span eb-msg-var key="funds.transactions.type" variable="transaction.transactionType"></span> <span ng-show="transaction.title[0] != null && transaction.transactionUsDetails.formCode != null">&nbsp;{{transaction.transactionUsDetails.formCode}}</span></div></div></eb-list-item-content></eb-list-item></eb-list></div><div class="miniapp-empty-list" ng-if="fundsTransactionHistoryList.length == 0">{{::"db.funds.list_data_error"|translate}}</div><div class="miniapp-empty-list" ng-if="fundsTransactionHistoryList.content.length == 0">{{::"transaction.list.empty_list"|translate}}</div><div class="eb-pagination-container" ng-show="fundsTransactionHistoryPromise.$$state.status === 1"><eb-pagination eb-data="fundsTransactionHistoryList" eb-params="filterParams" eb-loading="loading" eb-pagination-count="5" scroll-to="fundsTransactionHistoryListId" callback="submit(ctx, params, rel)"></eb-pagination></div><eb-options-under-list ng-if="fundsTransactionHistoryList.content.length > 0" ng-show="fundsTransactionHistoryPromise.$$state.status === 1"><div class="under-list-option first-option"><a href="{{fundsTransactionHistoryList.link}}" target="{{fundsTransactionHistoryList.target}}" style="color: #0098db"><span eb-themable class="eb-icon eb-icon-print options-icon" style="font-size: 1.3em"></span> <span class="option-label" eb-msg="funds.list.options.downloadList"></span></a></div><!--<form > <span style="color: #0098db">Eksportuj historię do pliku</span>\n            <div style="margin-top: 15px">\n                 <ui-select eb-themable search-enabled="false" ng-model="$parent.ngModel" theme="select2" ng-disabled="disabled" on-select="selectTransaction($item, $model)">\n                    <ui-select-match>{{$select.selected.name}}</ui-select-match>\n                    <ui-select-choices class="block-choices" repeat="transaction.id as transaction in transactionTypes">\n                        <div>{{transaction.name}}</div>\n                    </ui-select-choices>\n                </ui-select>\n             </div>\n             <div>\n                <button class="primary eb-button eb-dbnext-theme">\n                    <span>Eksportuj</span>\n                </button>\n            </div>\n        </form>--></eb-options-under-list>'),a.put("templates/dbnext-funds/0.0.2/views/registerChangeAccount.html",'<div eb-themable><eb-section-header eb-header="db.funds.change.account.section_header.change_account" back-state="de.funds.fund-details"></eb-section-header><form name="changeAccountForm" novalidate><div class="funds-shaded-header"><div eb-responsive-row label="db.funds.change.account.row.number.label">{{fund.registerNo}}</div><div eb-responsive-row label="db.funds.change.account.row.tfi.label">{{fund.tfi.name}}</div></div><div class="form-body form-body-step2"><div eb-responsive-row label="db.funds.change.account.row.account_number.label"><div ng-if="formData.accountCurrency == \'PLN\'" eb-account-select name="newPurchaseAccountId" ng-model="formData.formModel.newPurchaseAccountId" primary-account-number="fund.purchasesAccountNo" account="formData.remitterAccount" ng-required="true" currency="PLN" placeholder="{{::\'db.funds.change.account.row.account_select.placeholder\'|translate}}"></div><div ng-if="formData.accountCurrency != \'PLN\'" eb-account-select name="newPurchaseAccountId" ng-model="formData.formModel.newPurchaseAccountId" primary-account-number="fund.purchasesAccountNo" account="formData.remitterAccount" ng-required="true" placeholder="{{::\'db.funds.change.account.row.account_select.placeholder\'|translate}}"></div><div eb-validation-messages eb-name="newPurchaseAccountId"><div eb-message-key="required"><span eb-msg="db.funds.change.account.row.account_select.validate"></span></div><div eb-message-key="contract.contractId.no.permission"><span eb-msg="db.funds.change.account.row.account_select.validate.passive_access"></span></div><div eb-message-key="contract.newPurchaseAccountId.error.lack.of.access.in.active.mode"><span eb-msg="db.funds.change.account.row.account_select.validate.passive_access"></span></div></div></div><eb-action-footer submit-label="db.funds.change.account.form.submit" submit-action="submit(changeAccountForm)"></eb-action-footer></div></form></div>'),a.put("templates/dbnext-funds/0.0.2/views/registerDetails.html",'<div eb-themable><eb-section-header eb-header="db.funds.section_header.details" back-state="{{initialData.backState}}"></eb-section-header><div class="eb-dbnext-theme form-body" ng-if="fundsDetailsPromise.$$state.status === 1"><eb-responsive-row label="db.funds.details.number">{{ found.registerNo }}</eb-responsive-row><eb-responsive-row label="db.funds.details.tfi">{{ found.tfi.name }}</eb-responsive-row><eb-responsive-row label="db.funds.details.register_number">{{ found.participant.participantExternalId }}</eb-responsive-row><eb-responsive-row label="db.funds.details.status"><div>{{\'db.funds.details.tax.status.\'+found.status | translate}}</div></eb-responsive-row><eb-responsive-row label="db.funds.details.purchases_account_no">{{found.purchasesAccountNo | nrbIbanFilter}}</eb-responsive-row><eb-responsive-row label="db.funds.details.opening_date">{{found.openingDate | date: \'dd.MM.yyyy\'}}</eb-responsive-row><eb-responsive-row label="db.funds.details.tax_liability_status"><div>{{\'db.funds.details.tax.status.\'+found.taxLiabilityStatus | translate}}</div></eb-responsive-row><eb-responsive-row label="db.funds.details.distributor.name"><div ng-if="found.distributor.fullName">{{ found.distributor.fullName }}<span ng-if="found.distributor.postCode && found.distributor.city && found.distributor.address">,&nbsp;{{found.distributor.postCode}}&nbsp;{{found.distributor.city}},&nbsp;{{found.distributor.address}}</span></div><div ng-if="!found.distributor.fullName">{{::\'db.funds.details.distributor.name.not_defined\' | translate}}</div></eb-responsive-row><eb-responsive-row label="db.funds.details.pok"><div ng-if="found.servicePointDetails.name">{{ found.servicePointDetails.name}}</div><div ng-if="!found.servicePointDetails.name">{{::\'db.funds.disposition.details.pok.not_defined\' | translate}}</div></eb-responsive-row><eb-responsive-row label="db.funds.details.register_kind">{{ found.productName | translate }}</eb-responsive-row><hr ng-style="{\'margin-top\':\'0px\'}"><eb-responsive-row label="db.funds.details.fund_name">{{found.registerStates[0].fundName}}</eb-responsive-row><eb-responsive-row label="db.funds.details.unit_balance">{{found.registerStates[0].unitBalance | number:6}}</eb-responsive-row><eb-responsive-row label="db.funds.details.unit_class">{{found.registerStates[0].unitClass}}</eb-responsive-row><eb-responsive-row label="db.funds.details.last_valuation_date">{{found.registerStates[0].lastValuationDate | date: \'dd.MM.yyyy\' }}</eb-responsive-row><eb-responsive-row label="db.funds.details.valuation"><eb-amount amount="found.registerStates[0].valuation" currency="{{found.registerStates[0].currency}}"></eb-amount></eb-responsive-row></div><eb-preloader eb-promise="fundsDetailsPromise" class="eb-preloader-default" eb-rejected-message="{{::\'db.accounts.details.rejected_response\'|translate}}"></eb-preloader><div class="options-funds-under-list register-details"><div class="under-list-option first-option" ng-hide="authorized"><a ng-click="changeAccount(found)"><span class="option-label" eb-msg="db.funds.details.label.change_account"></span></a></div><div class="under-list-option second-option" ng-class="{false: \'under-list-option second-option\', true: \'under-list-option first-option\'} [authorized]"><a ng-click="getHistory(found)"><span class="option-label" eb-msg="db.funds.details.label.transaction_history"></span></a></div><div class="under-list-option third-option" ng-hide="authorized"><a ng-click="prepareDispositions(found)"><span class="option-label" eb-msg="db.funds.details.label.disposition_history"></span></a></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/registerForm.html",'<div ng-show="!fundsTermsAccepted"><span ng-include="::pathPrefix + \'/views/fundsAcceptTerms.html\'"></span></div><div ng-show="fundsTermsAccepted" class="inner-payment-form center-app-header"><eb-content-navigation></eb-content-navigation><form name="registerForm" novalidate><div eb-view-swap="viewLoaded"><div ui-view autoscroll="true"></div></div></form><eb-preloader visible delay="10" class="eb-preloader-default"></eb-preloader></div>'),a.put("templates/dbnext-funds/0.0.2/views/registerFormAccept.html",'<div class="step2 inner-form-padding center-form" eb-preloader-content promise="tfiPromise"><div class="panel-details"><eb-section-header ng-if="!formData.fromTfiOfferList" eb-header="db.funds.register.new.form.step2.header" back-state="de.funds.content.active"></eb-section-header><eb-section-header ng-if="formData.fromTfiOfferList" eb-header="db.funds.register.new.form.step2.header" back-state="de.funds.tfi-offer"></eb-section-header><div class="funds-shaded-header"><div eb-responsive-row label="db.funds.register.new.step2.row.tfi_offer.label">{{registerDetails.transactionDetails.fundName}}</div></div><div class="eb-dbnext-theme form-body"><div eb-responsive-row label="db.funds.register.new.step2.row.tfi.label">{{tfiDetails.tfiName}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.last_evaluation_date.label">{{fundDetails.lastValuation.valuationDate | amDateFormat : \'DD.MM.YYYY\'}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.unit_value.label"><eb-amount amount="fundDetails.lastValuation.valuationValue" currency="{{fundDetails.currency}}"></eb-amount></div><div eb-responsive-row label="db.funds.register.new.step2.row.fund_account_number.label">{{fundDetails.fundAccount | nrbIbanFilter}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.participant_number.label"><span ng-show="registerDetails.transactionDetails.participant.participantId == null" eb-msg="db.funds.register.new.step2.row.new_participation.value"></span> <span ng-show="registerDetails.transactionDetails.participant.participantId != null">{{registerDetails.transactionDetails.participant.participantId | emptyFilter}}</span></div><div eb-responsive-row label="db.funds.register.new.step2.row.account_number.label">{{registerDetails.transactionDetails.sourceAccountNo | nrbIbanFilter}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.amount.label"><eb-amount amount="registerDetails.amount" currency="{{registerDetails.currency}}"></eb-amount></div><div eb-responsive-row label="db.funds.register.new.step2.row.discount_description.label" ng-if="registerDetails.transactionDetails.discount > 0">{{registerDetails.transactionDetails.discountDescription | emptyFilter}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.discount.label" ng-if="registerDetails.transactionDetails.discount > 0"><span>{{registerDetails.transactionDetails.discount}}%</span></div><div eb-responsive-row label="db.funds.register.new.step2.row.assets_origin.label"><span db-funds-source-of-assets source-id="registerDetails.transactionDetails.assetsOrigin"></span></div><div eb-responsive-row label="db.funds.register.new.step2.row.realization_date.label">{{registerDetails.executionDate | amDateFormat : \'DD.MM.YYYY\'}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.participant.label">{{registerDetails.transactionDetails.participant.name}}<br>{{registerDetails.transactionDetails.participant.addressPart1}}<br>{{registerDetails.transactionDetails.participant.addressPart2}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.principal.label">{{registerDetails.transactionDetails.principal.name}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.pep.label">{{\'db.funds.register.new.step2.row.pep.value.\'+ registerDetails.transactionDetails.pep | translate}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.order_in_promotion.label" ng-if="showDiscount">{{\'db.funds.register.new.step2.row.order_in_promotion.value.\' + registerDetails.transactionDetails.agreementForPromotions | translate}}</div><div eb-responsive-row label="db.funds.register.new.step2.row.principal_identification.label">{{\'db.funds.register.new.step2.row.principal_identification.type.value.\'+ registerDetails.transactionDetails.principal.idType | translate}}{{\'db.funds.acquisition.step2.row.identification.row.number\' | translate}}&nbsp;{{registerDetails.transactionDetails.principal.idNumer}}</div></div><div class="shaded-section"><form name="authForm" novalidate><div eb-authorization eb-model="auth" eb-disposition-id="registerDetails.transactionId" eb-resource-type="fund_transaction" eb-relation="accept" eb-error-code="{{errorCode}}" eb-text="text" eb-form="authForm" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><span class="regulations-accept-section" ng-include="::pathPrefix + \'/views/fundsTransactionCancellationTerms.html\'"></span><eb-action-footer cancel-label="db.funds.register.new.step2.form.accept.back" submit-label="db.funds.register.new.step2.form.accept.submit" cancel-action="back()" submit-action="accept(authForm)"></eb-action-footer></form></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/registerFormFields.html",'<eb-content-navigation></eb-content-navigation><div><div class="inner-form-padding center-form"><div eb-themable><eb-section-header ng-if="!formData.fromTfiOfferList" eb-header="db.funds.register.new.step1.form.header" back-state="de.funds.content.active"></eb-section-header><eb-section-header ng-if="formData.fromTfiOfferList" eb-header="db.funds.register.new.step1.form.header" back-state="de.funds.tfi-offer"></eb-section-header><div class="funds-shaded-header"><div ng-show="formData.fromTfiOfferList"><div eb-responsive-row label="db.funds.register.new.step1.row.tfi_offer.label"><span>{{formData.fund.fundName}}</span></div></div><div ng-show="!formData.fromTfiOfferList"><div eb-responsive-row label="db.funds.register.new.step1.row.tfi.label"><div db-funds-tfi-select ng-model="formData.formModel.idTFI" name="tfiName" id="tfiName" ng-change="resetFund(registerForm)" placeholder="{{::\'db.funds.register.new.step1.row.tfi.placeholder\'|translate}}" ng-required="true"></div><div eb-validation-messages eb-name="tfiName"><div eb-message-key="required"><span eb-msg="db.funds.register.new.step1.row.tfi.validate.required"></span></div><div eb-message-key="register.tfi.company.is.inactive"><span eb-msg="db.funds.register.new.step1.row.tfi_offer.validate.inactive"></span></div></div></div><div eb-responsive-row label="db.funds.register.new.step1.row.tfi_offer.label"><div db-funds-tfi-offer-select ng-model="formData.fund" name="fund" placeholder="{{::\'db.funds.register.new.step1.row.tfi_offer.placeholder\'|translate}}" tfi-id="formData.formModel.idTFI" ng-required="true"></div></div></div><div eb-responsive-row class="close-section" ng-show="registerForm.fund.$invalid"><div eb-validation-messages eb-name="fund"><div eb-message-key="required"><span eb-msg="db.funds.register.new.step1.row.tfi_offer.validate.required"></span></div><div eb-message-key="register.fund.fund.is.inactive"><span eb-msg="db.funds.register.new.step1.row.tfi_offer.validate.inactive"></span></div><div eb-message-key="register.tfi.company.is.inactive"><span eb-msg="db.funds.register.new.step1.row.tfi_offer.validate.inactive"></span></div><div eb-message-key="customer.fund.client.has.no.permission.to.module"><span eb-msg="db.funds.customer.client.has.no.permission.to.module"></span></div></div></div></div><div class="form-body form-body-step1"><div ng-show="formData.fund.eligibleForPromotion==true" eb-responsive-row top label="db.funds.register.new.step1.row.tbd.label" style="padding-bottom: 20px"><div><div eb-checkbox eb-model="formData.formModel.registryDiscount" eb-name="registryDiscount" eb-required="false" ng-click="repeatScroll()" ng-mouseenter="isCheckboxHover = true" ng-mouseleave="isCheckboxHover = false" ng-class="{\'eb-checkbox-hover\' : isCheckboxHover}"></div><!-- no whitespace fix \n\t\t\t\t\t\t--><a class="tbd-message" href="{{formData.fund.promotionRegulationsUrl}}" target="blank" eb-msg="db.funds.register.new.step1.row.tbd.discount.label"></a></div></div><div eb-responsive-row class="close-section"><div class="pep-checkbox" eb-checkbox eb-model="formData.formModel.pep" eb-name="pep" eb-required="false" ng-click="repeatScroll()" ng-mouseenter="isPepCheckboxHover = true" ng-mouseleave="isPepCheckboxHover = false" ng-class="{\'eb-checkbox-hover\' : isPepCheckboxHover}"></div><!-- no whitespace fix\n\t\t\t\t\t\t--><span class="tbd-message" ng-click="formData.formModel.pep = !formData.formModel.pep" eb-msg="db.funds.register.new.step1.row.tbd.pep.label" ng-mouseenter="isPepCheckboxHover = true" ng-mouseleave="isPepCheckboxHover = false"></span> <i eb-themable class="eb-icon {{tooltip.icon}} tooltip-label tbd-pep-tooltip" eb-tooltip="{{tooltip.content}}" side="{{tooltip.side}}" handler="{{tooltip.handler}}" ng-if="tooltip"></i></div><div eb-responsive-row label="db.funds.register.new.step1.row.account_number.label"><div eb-account-select name="purchasesAccountId" ng-model="formData.formModel.purchasesAccountId" account="formData.remitterAccount" ng-required="true" placeholder="{{::\'db.funds.register.new.step1.row.account_select.placeholder\'|translate}}"></div><div eb-validation-messages eb-name="purchasesAccountId"><div eb-message-key="required"><span eb-msg="db.funds.register.new.step1.row.account_select.validate"></span></div><div eb-message-key="contract.contractId.no.permission"><span eb-msg="db.funds.register.new.step1.row.account_select.validate.passive_access"></span></div><div eb-message-key="contract.purchasesAccountId.error.lack.of.access.in.active.mode"><span eb-msg="db.funds.register.new.step1.row.account_select.validate.passive_access"></span></div></div></div><div eb-responsive-row label="db.funds.register.new.step1.row.amount.label"><div eb-input-amount eb-name="amount" eb-currency-model="{{formData.minAmountCurrency}}" ng-model="formData.formModel.amount" eb-form="registerForm" eb-required="true"></div><div eb-validation-messages eb-name="amount"><div eb-message-key="transfer.amount.error.exceeds.available.funds.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_available_funds"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.user"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_daily_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.user"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_single_limit_for_user"></span></div><div eb-message-key="transfer.amount.error.exceeds.daily.limit.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_daily_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error.exceeds.single.limit.for.agreement"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_single_limit_for_agreement"></span></div><div eb-message-key="transfer.amount.error_amount_exceeds_max_amount_for_elixir"><span eb-msg="db.payments.new.step1.row.amount.validate.exceeds_max_amount_for_elixir"></span></div><div eb-message-key="transfer_order.amount.DecimalMin"><span eb-msg="db.payments.new.step1.row.amount.validate.decimal_min"></span></div><div eb-message-key="transfer_order.amount.DecimalMax"><span eb-msg="db.payments.new.step1.row.amount.validate.decimal_max"></span></div><div eb-message-key="register.transaction.amount.too.low"><span eb-msg="db.funds.register.new.step1.row.amount.validate.too_low"></span></div></div></div><div eb-responsive-row label="db.funds.register.new.step1.row.min_amount.label"><eb-amount amount="formData.minAmount" currency="{{formData.minAmountCurrency}}"></eb-amount></div><div eb-responsive-row label="db.funds.register.new.step1.row.assets_origin.label"><div db-funds-source-of-assets-select -select ng-model="formData.formModel.moneySourceId" name="moneySourceId" id="moneySourceId" placeholder="{{::\'db.funds.register.new.step1.row.assets_origin.placeholder\'|translate}}"></div><div eb-validation-messages eb-name="moneySourceId"><div eb-message-key="funds_register.moneySourceId.NotNull"><span eb-msg="db.funds.register.new.step1.row.assets_origin.validation.not_null"></span></div></div></div><div eb-responsive-row label="db.funds.register.new.step1.row.realization_date.label"><div eb-date-input ng-model="formData.formModel.executionDate" eb-title="{{::\'db.funds.register.new.step1.row.date_input.placeholder\'|translate}}" date-format="dd.MM.yyyy" eb-max-date="maxDate" name="executionDate" eb-disable-weekend="false" eb-disable-past-dates="true" ng-required="true" date-input-validation-past></div><div eb-validation-messages eb-name="executionDate"><div eb-message-key="past"><span eb-msg="db.funds.register.new.step1.row.realization_date.validate.past"></span></div><div eb-message-key="required"><span eb-msg="db.funds.register.new.step1.row.realization_date.validate.required"></span></div><div eb-message-key="format"><span eb-msg="db.funds.register.new.step1.row.realization_date.validate.format"></span></div><div eb-message-key="maxDate"><span eb-msg="db.funds.register.new.step1.row.realization_date.validate.format"></span></div></div></div><eb-action-footer submit-label="db.funds.register.new.step1.form.submit" submit-action="submit(registerForm)" submit-icon="eb-ico-widget-payments"></eb-action-footer></div></div></div></div>'),
a.put("templates/dbnext-funds/0.0.2/views/registersContent.html",'<div eb-themable><div ng-if="!fundsTermsAccepted"><span ng-include="::pathPrefix + \'/views/fundsAcceptTerms.html\'"></span></div><div ng-if="fundsTermsAccepted" class="funds-content"><eb-mini-bar ng-hide="details" search-text="filterOptions.fundName" eb-search-placeholder="{{::\'db.funds.content.mini_bar.placeholder\'|translate}}" eb-disable-add="true"></eb-mini-bar><db-tabs eb-model="filterParams.statusFundCriteria" eb-tabs="tabs" ng-hide="details"></db-tabs><div ui-view autoscroll="true" ng-class="anim_class" ng-swipe-left="emitTabChange(\'left\')" ng-swipe-right="emitTabChange(\'right\')" class="animate-on"></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/registersContentTab.html",'<eb-list eb-themable class="product-list funds-list-no-border" eb-title="(hasAuthorizedFunds?\'db.funds.registers.participant\':null)" eb-promise="allPromises"><div eb-list-item ng-repeat="fund in filteredFundParticipant = (fundParticipantList.content | filter:{wrappedText : filterOptions.fundName})"><eb-list-item-content eb-list-item-collapse-trigger on-open="getHistoryShort(fund)" is-collapsed="fund.isCollapsed"><div class="identification-cell"><div id="editableDiv" class="not-editable-product-name"><span class="text">{{fund.registerStates[0].fundName}}</span></div><div class="productNo">{{fund.registerNo}}</div></div><!-- no whitespace fix--><div class="actions-cell" ng-class="{\'edit-mode\': fund.visible}"><div ng-class="{ \'desktop-option-hidden\': !hasLink(fund, \'purchase\'), \'desktop-option-none\' :  !hasListLink(fundParticipantList.content, \'purchase\')}" class="default-desktop-option"><a ng-click="prepareAcquisition(fund); $event.stopPropagation();"><span eb-msg="db.funds.options.acquisition"></span></a></div><div class="options" ng-click="$event.stopPropagation()"><div eb-list-options ng-class="{\'editable-option-hide\': fund.visible}"><li class="option-hidden-when-desktop" ng-if="hasLink(fund, \'purchase\')"><a class="option-row" ng-click="prepareAcquisition(fund)"><span eb-themable class="eb-icon eb-ico-new-payment options-icon"></span> <span class="option-label" eb-msg="db.funds.options.acquisition"></span></a></li><li ng-if="hasLink(fund, \'convert\')"><a class="option-row" ng-click="prepareConversion(fund)"><span eb-themable class="eb-icon eb-ico-transaction-history options-icon"></span> <span class="option-label" eb-msg="db.funds.options.conversion"></span></a></li><li ng-if="hasLink(fund, \'acquit\')"><a class="option-row" ng-click="prepareAcquittance(fund)"><span eb-themable class="eb-icon eb-ico-new-payment options-icon"></span> <span class="option-label" eb-msg="db.funds.options.acquittal"></span></a></li><li class="option-row"><a class="option-row" ng-click="prepareDetails(fund)"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.details"></span></a></li><li><a class="option-row" ng-click="prepareDispositions(fund)"><span eb-themable class="eb-icon eb-ico-transaction-history options-icon"></span> <span class="option-label" eb-msg="funds.options.label.history"></span></a></li><li><a class="option-row" ng-click="getHistory(fund)"><span eb-themable class="eb-icon eb-ico-transaction-history options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.transaction_history"></span></a></li></div></div></div><!-- no whitespace fix--><div class="properties-group-cell"><div class="secondary-property-cell"><eb-item-property label="db.funds.label.valuation"><span class="funds-quantity">{{fund.registerStates[0].unitBalance | number:6}}</span></eb-item-property></div><!-- no whitespace to fix 2 x 50%--><div class="primary-property-cell"><eb-item-property label="db.funds.label.balance"><eb-amount amount="fund.registerStates[0].valuation" currency="{{fund.registerStates[0].currency}}" highlight-negative></eb-amount></eb-item-property></div></div></eb-list-item-content><eb-collapse class="fund-list-details" is-collapsed="fund.isCollapsed" on-open="getHistoryShort(fund, $index)"><div eb-list-details><div eb-list-details-item key="db.fund.accountNo" class="collapse-details-item"><eb-account-number nrb="{{fund.purchasesAccountNo}}"></eb-account-number></div><div eb-list-details-item key="db.fund.category" class="collapse-details-item"><span>{{::fund.registerStates[0].fundCategory}}</span></div><div eb-list-details-item key="db.fund.openingDate" class="collapse-details-item">{{::fund.openingDate | date : \'dd.MM.yyyy\'}}</div></div></eb-collapse></div><div class="miniapp-empty-list" ng-if="filteredFundParticipant.length == 0">{{::"db.funds.label.empty_list"|translate}}</div></eb-list><!-- AUTH --><eb-list ng-if="hasAuthorizedFunds" eb-themable class="product-list funds-authorized-list funds-list-no-border" eb-title="(hasAuthorizedFunds?\'db.funds.registers.authorized\':null)" eb-promise="allPromises"><div eb-list-item ng-repeat="fund in filteredFundAuthorized = (fundAuthorizedList.content | filter:{wrappedText : filterOptions.fundName})"><eb-list-item-content eb-list-item-collapse-trigger on-open="getHistoryShort(fund)" is-collapsed="fund.isCollapsed"><div class="identification-cell" ng-class="{\'edit-mode\': fund.visible}"><div id="editableDiv" class="not-editable-product-name"><span class="text">{{fund.registerStates[0].fundName}}</span></div><div class="productNo">{{fund.registerNo}}</div></div><!-- no whitespace fix--><div class="actions-cell" ng-class="{\'edit-mode\': fund.visible}"><div ng-class="{ \'desktop-option-hidden\': !hasLink(fund, \'purchase\'), \'desktop-option-none\': !hasListLink(fundAuthorizedList.content, \'purchase\')}" class="default-desktop-option"><a ng-click="prepareAcquisitionFromAuthorized(fund); $event.stopPropagation();"><span eb-msg="db.funds.options.acquisition"></span></a></div><div class="options" ng-click="$event.stopPropagation()"><div eb-list-options ng-class="{\'editable-option-hide\': fund.visible}"><li class="option-hidden-when-desktop" ng-if="hasLink(fund, \'purchase\')"><a class="option-row" ng-click="prepareAcquisitionFromAuthorized(fund)"><span eb-themable class="eb-icon eb-ico-new-payment options-icon"></span> <span class="option-label" eb-msg="db.funds.options.acquisition"></span></a></li><li ng-if="hasLink(fund, \'convert\')"><a class="option-row" ng-click="prepareConversionFromAuthorized(fund)"><span eb-themable class="eb-icon eb-ico-transaction-history options-icon"></span> <span class="option-label" eb-msg="db.funds.options.conversion"></span></a></li><li ng-if="hasLink(fund, \'acquit\')"><a class="option-row" ng-click="prepareAcquittance(fund)"><span eb-themable class="eb-icon eb-ico-new-payment options-icon"></span> <span class="option-label" eb-msg="db.funds.options.acquittal"></span></a></li><li class="option-row"><a class="option-row" ng-click="prepareDetailsAuthorized(fund)"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.details"></span></a></li><li><a class="option-row" ng-click="getHistory(fund)"><span eb-themable class="eb-icon eb-ico-transaction-history options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.transaction_history"></span></a></li></div></div></div><!-- no whitespace fix--><div class="properties-group-cell"><div class="secondary-property-cell"><eb-item-property label="db.funds.label.valuation"><span class="funds-quantity">{{fund.registerStates[0].unitBalance | number:6}}</span></eb-item-property></div><!-- no whitespace to fix 2 x 50%--><div class="primary-property-cell"><eb-item-property label="db.funds.label.balance"><eb-amount amount="fund.registerStates[0].valuation" currency="{{fund.registerStates[0].currency}}" highlight-negative></eb-amount></eb-item-property></div></div></eb-list-item-content><eb-collapse class="fund-list-details" is-collapsed="fund.isCollapsed" on-open="getHistoryShort(fund, $index)"><div eb-list-details><div eb-list-details-item key="db.fund.owner" class="collapse-details-item">{{::(fund.participant.customer.customerDetails.firstName + \' \' + fund.participant.customer.customerDetails.surname)}}</div><div eb-list-details-item key="db.fund.accountNo" class="collapse-details-item"><eb-account-number nrb="{{fund.purchasesAccountNo}}"></eb-account-number></div><div eb-list-details-item key="db.fund.category" class="collapse-details-item"><span ng-if="::fund.category">{{::fund.category}}</span> <span ng-if="::!fund.category">{{::"db.funds.category.empty" | translate}}</span></div><div eb-list-details-item key="db.fund.openingDate" class="collapse-details-item">{{::fund.openingDate | date : \'dd.MM.yyyy\'}}</div></div></eb-collapse></div><div class="miniapp-empty-list" ng-if="filteredFundAuthorized.length == 0">{{::"db.funds.label.empty_list"|translate}}</div><!-- AUTH --></eb-list><eb-list eb-themable class="product-list summary"><div class="miniapp-empty-list" ng-if="fundList.length == 0">{{::"db.funds.list_data_error"|translate}}</div><div ng-show="fundList.content.length > 0 || funds.length > 0" class="product-list-summary-item"><div ng-if="fundList.summary.length > 0" class="product-list-summary-label"><span eb-msg="de.funds.summary"></span></div><!-- no whitespace fix--><div class="actions-cell"><div class="default-desktop-option" ng-class="{ \'desktop-option-none\' :  !(hasListLink(fundAuthorizedList.content, \'purchase\') || hasListLink(fundParticipantList.content, \'purchase\')) }"><a><span eb-msg="db.funds.options.acquisition"></span></a></div><div class="options" ng-click="$event.stopPropagation()"><div></div></div></div><!-- no whitespace to fix 2 x 50%--><div class="product-list-summary"><div class="secondary-property-cell property-summary-cell"></div><!-- no whitespace to fix 2 x 50%--><div class="primary-property-cell property-summary-cell"><span ng-repeat="fundSummary in fundList.summary"><span ng-if="$index == 0"><eb-item-property label="db.funds.label.balance"><eb-amount amount="fundSummary.valuation" currency="{{fundSummary.currency}}" highlight-negative></eb-amount></eb-item-property></span> <span ng-if="$index != 0"><eb-amount amount="fundSummary.valuation" currency="{{fundSummary.currency}}" highlight-negative></eb-amount></span></span></div></div></div></eb-list><eb-options-under-list ng-show="allPromises.$$state.status === 1"><div class="under-list-option first-option"><a ui-sref="de.funds.tfi"><span class="option-label" eb-msg="db.funds.content.list.underlist_option_1"></span></a></div><div class="under-list-option second-option"><a ng-click="prepareOpening()"><span class="option-label" eb-msg="db.funds.content.list.underlist_option_2"></span></a></div></eb-options-under-list>'),a.put("templates/dbnext-funds/0.0.2/views/registersOpeningContent.html",'<div eb-themable><div eb-section-header eb-header="db.funds.opening.label.header" back-state="{{::initialData.backState}}"></div><db-tabs eb-model="filterParams.statusFundCriteria" eb-tabs="tabs" ng-hide="details"></db-tabs><div ui-view autoscroll="true" ng-class="anim_class" ng-swipe-left="emitTabChange(\'left\')" ng-swipe-right="emitTabChange(\'right\')" class="animate-on"></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/registersOpeningContentTab.html",'<div eb-list eb-themable class="time-based-list" eb-promise="openingListPromise"><div eb-list-item class="row" ng-repeat="fund in fundOpeningList.content | filter:{wrappedText : filterOptions.fundName}"><div eb-list-item-content class="item-content-with-actions"><div class="identification-cell" ng-class="{\'edit-mode\': fund.visible}"><div class="date-cell cell_1_in_3"><span>{{fund.executionDate | amDateFormat : \'DD.MM.YYYY\'}}</span></div><!-- no whitespace fix--><div class="actions-cell"><div class="default-desktop-option"><a ng-click="prepareDetails(fund)"><span eb-msg="db.funds.opening.details"></span></a></div><div class="options"><div eb-list-options ng-class="{\'editable-option-hide\': fund.visible}"><li class="option-hidden-when-desktop"><a class="option-row" ng-click="prepareDetails(fund)"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.details"></span></a></li><li ng-if="hasLink(fund, \'create_cancellation_transaction\')"><a class="option-row" ng-click="prepareCancellation(fund)"><span eb-themable class="eb-icon eb-ico-close options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.transaction_cancellation"></span></a></li><li ng-if="hasLink(fund, \'download_fund_transaction\')"><a class="option-row" href="{{fund.link}}" target="{{fund.target}}"><span eb-themable class="eb-icon eb-icon-print options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.download"></span></a></li></div></div></div><!-- no whitespace fix--><div class="amount-property-cell cell_3_in_3"><span ng-show="fund.fullyRepurchasesOrConversion" class="full-unit-conversion" eb-msg="db.funds.transactions.amount.full"></span><div eb-amount ng-show="!fund.fullyRepurchasesOrConversion && fund.amount != null" amount="fund.amount" currency="{{fund.currency || \'PLN\'}}" highlight-negative></div><span ng-show="!fund.fullyRepurchasesOrConversion && fund.amount == null"><span class="units-count-value">{{fund.numberOfUnits}}</span>&nbsp;<span eb-msg="db.funds.transactions.units_count" class="units-count-label"></span></span></div><!-- no whitespace fix--><div class="description-property-cell cell_2_in_3"><div><div eb-msg-var key="db.funds.transactions.type" variable="fund.transactionType"></div><div ng-show="(fund.transactionType == \'KONWERSJA\' || fund.transactionType == \'ANULOWANIE_KONWERSJI\') && fund.transactionDetails.targetPartRegister != null"><span eb-msg="db.funds.transactions.registry_number"></span>&nbsp;{{fund.transactionDetails.targetPartRegister.fundName}}&nbsp;{{fund.transactionDetails.targetPartRegister.registerNo}}</div></div></div></div></div></div><div class="miniapp-empty-list" ng-if="fundOpeningList.length == 0">{{::"db.funds.opening.list_data_error"|translate}}</div><div class="miniapp-empty-list" ng-if="fundOpeningList.content.length == 0">{{::"db.funds.opening.label.empty_list"|translate}}</div></div>'),a.put("templates/dbnext-funds/0.0.2/views/registersView.html",'<eb-full-screen-widget miniapp-name="funds"><div class="funds"><eb-screen-content><div ui-view autoscroll="true"></div></eb-screen-content></div></eb-full-screen-widget>'),a.put("templates/dbnext-funds/0.0.2/views/tfiContentTab.html",'<div class="inner-payment-form center-app-header"><eb-content-navigation></eb-content-navigation><div style="position:relative"><div class="inner-form-padding center-form"><div eb-themable><eb-section-header eb-header="db.funds.fti.section_header.header" back-state="de.funds.content.active"></eb-section-header><div eb-list eb-themable class="events-list" id="tfiList" eb-promise="tfiPromise"><div eb-list-item class="row" ng-repeat="tfi in tfiList.content"><div eb-list-item-content class="item-content-with-actions"><div class="actions-cell funds-tfi-actions-cell" ng-click="$event.stopPropagation()"><div class="show-when-desktop default-desktop-option funds-link"><a ng-click="prepareOffer(tfi)"><span eb-msg="db.funds.options.offer.registers"></span></a></div><div class="options hidden-when-desktop"><div eb-list-options><li><a class="option-row" ng-click="prepareOffer(tfi)"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.funds.tfi.list.options.offer"></span></a></li></div></div></div><div class="funds-content-cell cell_4_in_4"><span>{{::tfi.tfiName}}</span></div></div></div><div class="miniapp-empty-list" ng-if="tfiList.content.length == 0">{{::"db.fund.tfi.content.list.empty_list"|translate}}</div></div></div></div></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/tfiOfferContentTab.html",'<div eb-themable class="funds-content"><eb-section-header eb-header="db.funds.fti.section_header.header" eb-description="{{::filterParams.tfi.tfiName}}" back-state="de.funds.offer"></eb-section-header><div class="eb-filter-header-container"><div class="row eb-filter-header"><span eb-container class="padding small"><div class="col-xs-6 col-md-6 text-left eb-filter-clean"><span ng-show="showClearFilter" ng-click="clearFilter()" style="cursor: pointer" eb-msg="transaction.filter.label.clear"></span></div><div class="col-xs-6 col-md-6 text-right eb-filter-switch" ng-class="{\'pull-right\': !showFilter}"><div ng-click="showFilterWindow()" style="cursor: pointer"><i eb-themable class="eb-icon" style="font-size: 1.3em" ng-class="{\'eb-ico-filter-applied\': showFilter == true , \'eb-ico-filter-show\': showFilter == false}"></i> <span ng-if="showFilter" class="link" eb-msg="transaction.filter.label.hide"></span> <span ng-if="!showFilter" class="link" eb-msg="transaction.filter.label.show"></span></div></div></span></div></div><div ng-show="showFilter"><db-funds-offer-filter ng-model="filterParams" context="depositHistoryList" callback="searchTFIOfferList(params)"></db-funds-offer-filter></div><eb-list id="tfiOfferList" class="product-list" eb-promise="ftiOfferPromise"><div eb-list-item ng-repeat="tfiOffer in tfiOfferList.content | filter:{wrappedText : filterOptions.fundName}" ng-class="{\'filter-displayed\':showFilter}"><eb-list-item-content eb-list-item-collapse-trigger on-open="getHistoryShort(fund)" is-collapsed="fund.isCollapsed"><div class="identification-cell"><div id="editableDiv" class="not-editable-product-name"><span class="text">{{tfiOffer.fundName}}</span></div></div><!-- no whitespace fix--><div class="actions-cell funds-action-cell" ng-class="{\'edit-mode\': fund.visible}"><div class="default-desktop-option"><a><span eb-msg="db.funds.widget.view.new_register" ng-click="prepareNewRegister(tfiOffer)"></span></a></div><div class="options" ng-click="$event.stopPropagation()"><div eb-list-options ng-class="{\'editable-option-hide\': fund.visible}"><li class="option-hidden-when-desktop" ng-click="prepareNewRegister(tfiOffer)"><a class="option-row"><span eb-themable class="eb-icon eb-ico-new-payment options-icon"></span><span class="option-label" eb-msg="db.funds.widget.view.new_register"></span></a></li><li><a class="option-row" ui-sref="de.funds.tfi-offer-history" store-context="tfiOffer"><span eb-themable class="eb-icon eb-ico-transaction-history options-icon"></span><span class="option-label" eb-msg="db.funds.offer.history"></span></a></li><li class="option-row" ng-click="prepareDetails(tfiOffer)"><a class="option-row"><span eb-themable class="eb-icon eb-ico-details options-icon"></span><span class="option-label" eb-msg="db.funds.options.label.details"></span></a></li></div></div></div><!-- no whitespace fix--><div class="properties-group-cell"><div class="secondary-property-cell"><eb-item-property label="db.funds.offer.label.valuation"><eb-amount amount="tfiOffer.lastValuation.valuationValue" currency="{{tfiOffer.currency}}" highlight-negative></eb-amount></eb-item-property></div><!-- no whitespace to fix 2 x 50%--><div class="primary-property-cell"><eb-item-property label="db.funds.offer.label.last.price.date">{{::tfiOffer.lastValuation.valuationDate | date : \'dd.MM.yyyy\'}}</eb-item-property></div></div></eb-list-item-content><eb-collapse class="fund-list-details" is-collapsed="fund.isCollapsed" on-open="getHistoryShort(fund, $index)" ng-click="$event.stopPropagation()"><div eb-list-details><div eb-list-details-item key="db.fund.category" class="collapse-details-item"><span>{{::tfiOffer.categoryName}}</span></div></div></eb-collapse></div><div class="miniapp-empty-list" ng-if="tfiOfferList.content.length == 0">{{::"db.fund.tfi.content.list.empty_list"|translate}}</div></eb-list></div>'),a.put("templates/dbnext-funds/0.0.2/views/tfiOfferDetails.html",'<div eb-themable><eb-section-header eb-header="db.funds.tfi.offer.section_header.details" back-state="de.funds.tfi-offer"></eb-section-header><div class="eb-dbnext-theme form-body"><eb-responsive-row label="db.funds.tfi.offer.details.tfi">{{tfiOfferDetails.tfiName}}</eb-responsive-row><eb-responsive-row label="db.funds.tfi.offer.details.fund_name">{{ tfiOfferDetails.fundName}}</eb-responsive-row><eb-responsive-row label="db.funds.tfi.offer.details.category">{{tfiOfferDetails.categoryName}}</eb-responsive-row><eb-responsive-row label="db.funds.tfi.offer.details.currency">{{tfiOfferDetails.currency}}</eb-responsive-row><eb-responsive-row label="db.funds.tfi.offer.details.last_valuation_date">{{tfiOfferDetails.lastValuation.valuationDate | date: \'dd.MM.yyyy\'}}</eb-responsive-row><eb-responsive-row label="db.funds.tfi.offer.details.unit_value"><span>{{tfiOfferDetails.lastValuation.valuationValue | currency:\'\'}}</span></eb-responsive-row><eb-responsive-row label="db.funds.tfi.offer.details.account_number">{{tfiOfferDetails.fundAccount | nrbIbanFilter}}</eb-responsive-row></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/tfiOfferHistoryContentTab.html",'<div eb-themable><eb-section-header eb-header="db.funds.offer.history" eb-description="{{::fundOffer.fundName}}" back-state="de.funds.tfi-offer"></eb-section-header><div class="eb-filter-header-container"><div class="row eb-filter-header"><span eb-container class="padding small"><div class="col-xs-6 col-md-6 text-left eb-filter-clean"><span ng-show="showClearFilter" ng-click="clearFilter()" style="cursor: pointer" eb-msg="transaction.filter.label.clear"></span></div><div class="col-xs-6 col-md-6 text-right eb-filter-switch" ng-class="{\'pull-right\': !showFilter}"><div ng-click="showFilterWindow()" style="cursor: pointer"><i eb-themable class="eb-icon" style="font-size: 1.3em" ng-class="{\'eb-ico-filter-applied\': showFilter == true , \'eb-ico-filter-show\': showFilter == false}"></i> <span ng-if="showFilter" class="link" eb-msg="transaction.filter.label.hide"></span> <span ng-if="!showFilter" class="link" eb-msg="transaction.filter.label.show"></span></div></div></span></div></div><div ng-show="showFilter"><db-funds-offer-history-filter ng-model="filterParams" context="depositHistoryList" callback="searchTFIOfferHistoryList(params)"></db-funds-offer-history-filter></div><eb-list id="tfiOfferList" class="product-list no-details" eb-promise="ftiOfferPromise"><div eb-list-item ng-repeat="tfiOffer in tfiOfferList.content | filter:{wrappedText : filterOptions.fundName}" ng-class="{\'filter-displayed\':showFilter}"><eb-list-item-content eb-list-item-collapse-trigger on-open="getHistoryShort(fund)" is-collapsed="fund.isCollapsed"><div class="identification-cell" ng-class="{\'edit-mode\': fund.visible}"><eb-item-property label="db.funds.offer.history.date"><span class="funds-quantity">{{::tfiOffer.valuationDate | date : \'dd.MM.yyyy\'}}</span></eb-item-property></div><!-- no whitespace fix--><div class="actions-cell" ng-class="{\'edit-mode\': fund.visible}"></div><!-- no whitespace fix--><div class="properties-group-cell"><div class="secondary-property-cell"><eb-item-property label="db.funds.offer.history.unit"><span class="funds-quantity">{{::tfiOffer.valuationValue | number}}</span></eb-item-property></div><!-- no whitespace to fix 2 x 50%--><div class="primary-property-cell"><eb-item-property label="db.funds.offer.history.class">{{::tfiOffer.unitClass}}</eb-item-property></div></div></eb-list-item-content></div><div class="miniapp-empty-list" ng-if="tfiOfferList.content.length == 0">{{::"db.funds.offer.history.empty"|translate}}</div></eb-list></div>'),a.put("templates/dbnext-funds/0.0.2/views/transactionDetails.html",'<div eb-themable><div><eb-section-header eb-header="db.funds.transactions.details" back-state="{{initialData.backState}}"></eb-section-header><div class="eb-dbnext-theme form-body" ng-show="transactionDetailsPromise.$$state.status === 1"><eb-responsive-row label="db.funds.transactions.details.register_no" ng-hide="initialData.backState== \'de.funds.opening.pending\'">{{transaction.transactionDetails.registerNo}}</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.fund_name">{{transaction.transactionDetails.fundName}}</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.ref_no"><span ng-show="transaction.transactionDetails.referenceNumber">{{transaction.transactionDetails.referenceNumber}}</span> <span ng-show="!transaction.transactionDetails.referenceNumber">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_type"><span eb-msg-var key="db.funds.transactions.type" variable="transaction.transactionType"></span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_tfi_type"><span ng-show="transaction.transactionDetails.tfiTransactionType">{{transaction.transactionDetails.tfiTransactionType}}</span> <span ng-show="!transaction.transactionDetails.tfiTransactionType">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_status"><span eb-msg-var key="db.funds.transactions.status" variable="transaction.status"></span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.transaction_tfi_status"><span ng-show="transaction.transactionDetails.tfiStatus">{{transaction.transactionDetails.tfiStatus}}</span> <span ng-show="!transaction.transactionDetails.tfiStatus">—</span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.realization_date">{{ transaction.executionDate| date: \'dd.MM.yyyy\'}}</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.process_date"><span ng-show="transaction.transactionDetails.convertationDate">{{transaction.transactionDetails.convertationDate | date: \'dd.MM.yyyy\'}}</span> <span ng-show="!transaction.transactionDetails.convertationDate">—</span></eb-responsive-row><div eb-responsive-row label="db.funds.transactions.details.acquittal_type.label" ng-show="transaction.transactionType == \'ACQUITTAL\' && transaction.fullyRepurchasesOrConversion"><span ng-show="transaction.fullyRepurchasesOrConversion" eb-msg="db.funds.transactions.details.conversion_type.FULL"></span></div><eb-responsive-row label="db.funds.transactions.details.amount" ng-show="!transaction.fullyRepurchasesOrConversion && transaction.amount != null"><eb-amount amount="transaction.amount" currency="{{ transaction.currency || \'PLN\'}}"></eb-amount></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.units_count.label" ng-show="!transaction.fullyRepurchasesOrConversion && transaction.amount == null"><span class="units-count-value">{{transaction.numberOfUnits | number:6}}</span></eb-responsive-row><eb-responsive-row top label="db.funds.transactions.details.discount_description" ng-show="transaction.transactionDetails.discount > 0">{{transaction.transactionDetails.discountDescription}}</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.discount" ng-show="transaction.transactionDetails.discount > 0">{{transaction.transactionDetails.discount}}%</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.source_of_income"><span ng-show="transaction.transactionDetails.assetsOrigin != null" db-funds-source-of-assets source-id="transaction.transactionDetails.assetsOrigin"></span></eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.sender">{{transaction.transactionDetails.principal.name}}</eb-responsive-row><eb-responsive-row label="db.funds.transactions.details.is_pep_client"><span eb-msg-var key="db.funds.transactions.pep" variable="transaction.transactionDetails.pep" ng-show="transaction.transactionDetails.pep != null"></span></eb-responsive-row><eb-responsive-row top label="db.funds.transactions.details.participant">{{transaction.transactionDetails.participant.name}}<br>{{transaction.transactionDetails.participant.addressPart1}}<br>{{transaction.transactionDetails.participant.addressPart2}}</eb-responsive-row></div></div><eb-preloader eb-promise="transactionDetailsPromise" class="eb-preloader-default" eb-rejected-message="{{::\'db.funds.transactions.details.rejected_response\'|translate}}"></eb-preloader></div>'),a.put("templates/dbnext-funds/0.0.2/views/transactionsContent.html",'<div eb-themable><div eb-section-header eb-header="db.funds.transactions.label.header" eb-description="{{fund.registerStates[0].fundName}}" back-state="{{backState}}"></div><div eb-filter-control show-filter="showFilter" show-clear-filter="showClearFilter" clear-callback="clearFilter()"></div><div ng-show="showFilter"><db-funds-disposition-filter ng-model="filterParams" callback="submit(ctx, params)"></db-funds-disposition-filter></div><db-tabs eb-model="filterParams.statusFundCriteria" eb-tabs="tabs" ng-hide="details"></db-tabs><div ui-view autoscroll="true" ng-class="anim_class" ng-swipe-left="emitTabChange(\'left\')" ng-swipe-right="emitTabChange(\'right\')" class="animate-on"></div></div>'),a.put("templates/dbnext-funds/0.0.2/views/transactionsContentTab.html",'<div><eb-list id="fundsTransactionHistoryListId" class="time-based-list" ng-class="{\'filter-displayed\':showFilter}" eb-promise="fundsTransactionHistoryPromise"><eb-list-item class="row" ng-repeat="transaction in fundsTransactionHistoryList.content"><eb-list-item-content class="item-content-with-actions"><div class="date-cell cell_1_in_3"><span>{{transaction.executionDate | amDateFormat : \'DD.MM.YYYY\'}}</span></div><!-- no whitespace fix--><div class="actions-cell"><div class="default-desktop-option"><a ng-click="prepareDetails(transaction)"><span eb-msg="db.funds.options.label.details"></span></a></div><div class="options"><div eb-list-options><li class="option-hidden-when-desktop"><a class="option-row" ng-click="prepareDetails(transaction)"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.details"></span></a></li><li ng-if="hasLink(transaction, \'create_cancellation_transaction\')"><a class="option-row" ng-click="prepareCancellation(transaction)"><span eb-themable class="eb-icon eb-ico-close options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.cancel"></span></a></li><li ng-if="hasLink(transaction, \'download_fund_transaction\')"><a href="{{transaction.link}}" target="{{transaction.target}}" class="option-row"><span eb-themable class="eb-icon eb-icon-print options-icon"></span> <span class="option-label" eb-msg="db.funds.options.label.download"></span></a></li></div></div></div><!-- no whitespace fix--><div class="amount-property-cell cell_3_in_3"><span ng-show="transaction.fullyRepurchasesOrConversion" class="full-unit-conversion" eb-msg="db.funds.transactions.amount.full"></span><eb-amount ng-show="!transaction.fullyRepurchasesOrConversion && transaction.amount != null" amount="transaction.amount" currency="{{transaction.currency || \'PLN\'}}" highlight-negative></eb-amount><span ng-show="!transaction.fullyRepurchasesOrConversion && transaction.amount == null"><span class="units-count-value">{{transaction.numberOfUnits}}</span>&nbsp;<span eb-msg="db.funds.transactions.units_count" class="units-count-label"></span></span></div><!-- no whitespace fix--><div class="description-property-cell cell_2_in_3"><div><div eb-msg-var key="db.funds.transactions.type" variable="transaction.transactionType"></div><div ng-show="(transaction.transactionType == \'KONWERSJA\' || transaction.transactionType == \'ANULOWANIE_KONWERSJI\') && transaction.transactionDetails.targetPartRegister != null"><span eb-msg="db.funds.transactions.registry_number"></span>&nbsp;{{transaction.transactionDetails.targetPartRegister.fundName}}&nbsp;{{transaction.transactionDetails.targetPartRegister.registerNo}}</div></div></div></eb-list-item-content></eb-list-item><div class="miniapp-empty-list" ng-if="fundsTransactionHistoryList.length == 0">{{::"db.funds.list_data_error"|translate}}</div><div class="miniapp-empty-list" ng-if="fundsTransactionHistoryList.content.length == 0">{{::"db.funds.transaction.list.empty_list"|translate}}</div></eb-list><div class="eb-pagination-container" ng-show="fundsTransactionHistoryPromise.$$state.status === 1"><eb-pagination eb-data="fundsTransactionHistoryList" eb-params="filterParams" eb-loading="loading" eb-pagination-count="5" scroll-to="fundsTransactionHistoryListId" callback="submit(ctx, params, rel)"></eb-pagination></div></div>');
}]);