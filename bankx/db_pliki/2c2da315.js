var dbnextNotificationsModule=angular.module("dbnext-notifications",["ebanking-shared"]).config(["translationsLoaderProvider","$urlRouterProvider","guiProvider","pathServiceProvider","stateServiceProvider",function(a,b,c,d,e){var f="de",g="dbnext",h="notifications",i=g+"."+h,j=g+"-"+h,k=f+"."+h;webComponentRegistry[j].simpleName=h,webComponentRegistry[j].startState=k+".content",c.registerElement(j,"header"),a.addTranslationsPath(d.generateRootPath(j)+"/i18n/messages_{{language}}.json"),e.state(f,{url:"/"+f,"abstract":!0,template:"<div ui-view></div>"}).state(k,{url:"/"+h,"abstract":!0,templateUrl:d.generateTemplatePath(j)+"/views/notificationsView.html",controller:i+".ViewController"}).state(k+".content",{url:"/content",templateUrl:d.generateTemplatePath(j)+"/views/notificationsContent.html",controller:i+".ContentController"}).state(k+".details",{url:"/:id/details",templateUrl:d.generateTemplatePath(j)+"/views/notificationsDetails.html",controller:i+".DetailsController"}).state(k+".new",{url:"/new",templateUrl:d.generateTemplatePath(j)+"/views/notificationsNew.html","abstract":!0}).state(k+".new.step1",{url:"/form",templateUrl:d.generateTemplatePath(j)+"/views/notificationsNewStep1.html",controller:i+".NewStep1Controller"}).state(k+".new.step2",{url:"/:notificationDispositionId/accept",templateUrl:d.generateTemplatePath(j)+"/views/notificationsNewStep2.html",controller:i+".NewStep2Controller",previous:[k+".new.step1"]})}]).run(["$rootScope","$state",function(a,b){a.$on("$stateChangeStart",function(a,c,d,e,f){var g=e.name,h=c.name;""!=g&&angular.isDefined(c.previous)&&c.previous.indexOf(g)==-1&&(a.preventDefault(),h.indexOf(webComponentRegistry["dbnext-notifications"].simpleName)!=-1&&b.go(webComponentRegistry["dbnext-notifications"].startState))})}]);dbnextNotificationsModule.controller("dbnext.notifications.ContentController",["$rootScope","$scope","$state","$stateParams","$filter","$timeout","formService","notificationsService","notificationFilterCriteria","searchWrapperService","viewStateService","notificationTypesDictionary","staticFind","storageItemsService","language","dbNtfCountService","$log","$sce",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=3e3,t="yyyy-MM-dd";b.notificationsList=null,b.filterOptions={subject:""},k.setInitialState("de.notifications.new.step1",{}),null==k.getInitialState(c.current.name)&&k.setInitialState(c.current.name,{}),b.showFilter=!1,b.showClearFilter=!1,b.notificationsSettings={},b.itemsStorageParams={},b.filterParams=k.getFormData("notificationsFilterParams"),null==b.filterParams&&(b.filterParams=i.getNotificationFilterInitValues()),k.resetInitialState("de.notifications.new.step1"),b.showFilterWindow=function(){b.showFilter=!b.showFilter},b.clearFilter=function(){b.filterParams={},b.filterParams=i.getNotificationFilterInitValues(),b.filterParams.isClearing=!0,b.showClearFilter=!1};var u=function(a){if("last"==a.periodDefinitionType&&"days"==a.periodUnitType){var b=new Date;return b.setDate(b.getDate()-a.periodCount),e("date")(b,t)}return a.dateFrom},v=function(a){return"last"==a.periodDefinitionType&&"days"==a.periodUnitType?e("date")(new Date,t):a.dateTo};b.submit=function(a,c,d){if(angular.isDefined(a)){b.loading=!0;var e={dateTo:v(c),text:c.text,notificationDirection:c.notificationDirection,notificationStatus:c.notificationStatus,notificationType:c.notificationType,pageNumber:c.pageNumber};return angular.extend(e,c),e.dateFrom=u(c),angular.extend(b.filterParams,e),b.notificationsListPromise=h.relationSearch(a,e,d).then(function(a){y(a),g.scrollTo("notificationsDetailsList")},function(a){q.error("Error getting notifications list"),y([])}),b.notificationsListPromise}};var w=function(){b.notificationsList.content=b.notificationsList.content.map(function(a){return angular.extend(a,j.wrapNotificationFields(a))})};b.notificationsListPromise=h.search(b.filterParams).then(function(a){y(a)},function(a){q.error("Error getting notifications list"),y([])});var x=a.$on("update_notifications_list",function(){h.search(b.filterParams).then(function(a){angular.forEach(a.content,function(a){a.markAsNotSeen=!1}),y(a),g.scrollTo("notificationsDetailsList")})});b.$on("$destroy",function(){x()});var y=function(a){z(a.content),b.notificationsList=a,b.loading=!1,b.notificationsList.totalElements>0&&(b.filterParams.pageNumber=a.pageNumber,b.filterParams.pageSize=a.pageSize,w(),k.appendFormData("notificationsFilterParams",b.filterParams),A(b.notificationsList.content))},z=function(a){n.searchItemsFromStorage("dbnext-notifications.settings").then(function(c){if(null!=c&&c.content&&c.content[0]){var d=c.content[0].value.modificationDateTimeFrom;angular.forEach(a,function(a){a.markAsNotSeen=new Date(a.receivedData)>=new Date(d)})}1==b.notificationsList.pageNumber&&B()})};b.trustAsHtml=function(a){return r.trustAsHtml(a)};var A=function(a){f(function(){angular.forEach(a,function(a){a.markAsNotSeen=!1}),p.refreshNotificationsCount()},s)},B=function(){b.notificationsSettings.modificationDateTimeFrom=new Date,n.putIntoStorage("dbnext-notifications.settings",b.notificationsSettings).then(function(){b.searchItemsFromStorage("dbnext-notifications.settings")})};b.searchItemsFromStorage=function(a){n.searchItemsFromStorage(a).then(function(a){null!=a&&(b.itemsStorageParams.modificationDateTimeFrom=a.content[0].value.modificationDateTimeFrom)})};var C=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=e("date")(a[c],"yyyy-MM-dd"));return b},D=i.getNotificationFilterInitValues();D=[D.dateFrom,D.dateTo,D.periodCount,D.periodDefinitionType,D.periodUnitType,D.text,D.notificationDirection,D.notificationType,D.notificationStatus],b.$watchGroup(["filterParams.dateFrom","filterParams.dateTo","filterParams.periodCount","filterParams.periodDefinitionType","filterParams.periodUnitType","filterParams.text","filterParams.notificationDirection","filterParams.notificationType","filterParams.notificationStatus"],function(a,c){b.filterParams.isClearing=!1,JSON.stringify(C(a))===JSON.stringify(D)?b.showClearFilter=!1:b.showClearFilter=!0},!0),b.openMessage=function(a){k.setInitialState("de.notifications.details",a),c.go("de.notifications.details")}}]),dbnextNotificationsModule.controller("dbnext.notifications.DetailsController",["$scope","$stateParams","$filter","$log","notificationsService","viewStateService","initialState","domService","$state","resourceViewService","$timeout","$sce","accountsService","creditsService","depositsService","cardsService","translate","events","language",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(b){if(angular.isDefined(b._links.previous_notification)){var c={};c.loadingPromise=e.relationSearch(b,{},"previous_notification").then(function(b){b.loadingPromise={$$state:{status:1}},a.detailsList.pop(),b.relatedResourceDisplayLinkDetails=j.getResourceViewForResource(b.notificationDetails.relatedResourceType),a.detailsList.push(b),t(b)},function(b){d.error("Error getting notifications details list"),a.detailsList=[]}),a.detailsList.push(c)}}function u(b){if("SYSTEM_NOTIFICATION"==b.type&&angular.isDefined(b.notificationDetails)&&angular.isDefined(b.notificationDetails.productType)&&"NONE"!=b.notificationDetails.productType)switch(a.notificationDetailsContent=!0,b.notificationDetails.productType){case"ACCOUNT":a.productDetailsPromise=m.get(b.notificationDetails.productId).then(function(d){x.push(c("maskNrbFilter")(d.accountNo),d.accountName,c("date")(b.notificationDetails.realizationDate,w),b.notificationDetails.amount,b.notificationDetails.currency,b.notificationContent),a.detailsProductContent=q.property("db.notifications.detail.big.transfer.content",x)});break;case"CREDIT":a.productDetailsPromise=n.get(b.notificationDetails.productId).then(function(d){x.push(c("maskNrbFilter")(d.accountNo),d.accountName,c("date")(b.notificationDetails.realizationDate,w),b.notificationDetails.amount,b.notificationDetails.currency,b.notificationContent),a.detailsProductContent=q.property("db.notifications.detail.big.credit.content",x)});break;case"DEPOSIT":a.productDetailsPromise=o.get(b.notificationDetails.productId).then(function(d){x.push(c("maskNrbFilter")(d.accountNo),d.accountName,c("date")(b.notificationDetails.realizationDate,w),b.notificationDetails.amount,b.notificationDetails.currency,b.notificationContent),a.detailsProductContent=q.property("db.notifications.detail.big.dedposit.content",x)});break;case"CARD":a.productDetailsPromise=p.self(b.notificationDetails.productId).then(function(d){x.push(c("maskNrbFilter")(d.accountNo),d.accountName,c("date")(b.notificationDetails.realizationDate,w),b.notificationDetails.amount,b.notificationDetails.currency,b.notificationContent),a.detailsProductContent=q.property("db.notifications.detail.big.card.content",x)})}}var v=2e3,w="yyyy-MM-dd";a.detailsList=[];var x=[];a.notificationDetailsContent=!1,a.detailsProduc="";var y=null;"BANK_NOTIFICATION"==g.type&&(y={language:s.get()}),a.notificationDetailsPromise=e.get(g.notificationId,y).then(function(b){b.loadingPromise={$$state:{status:1}},u(b),null!=b.notificationDetails.relatedResourceId&&(b.relatedResourceDisplayLinkDetails=j.getResourceViewForResource(b.notificationDetails.relatedResourceType)),a.detailsList.push(b),t(b),a.setAsRead(a.detailsList[0])},function(b){d.error("Error getting notifications details list"),a.detailsList=[]}),a.reply=function(){f.setInitialState("de.notifications.new.step1",a.detailsList[0]),i.go("de.notifications.new.step1")},a.goToRelatedResourceDetails=function(a){f.resetInitialState(a.relatedResourceDisplayLinkDetails.linkEntryState),f.setInitialState(a.relatedResourceDisplayLinkDetails.linkEntryState,{id:a.notificationDetails.relatedResourceId,backState:i.current.name}),i.go(a.relatedResourceDisplayLinkDetails.linkEntryState,{id:a.notificationDetails.relatedResourceId})},a.setAsRead=function(a){k(function(){"de.notifications.details"==i.current.name&&e.action({},"mark_as_read",a).then(function(a){r.broadcast("eb.notifications.messageMarkedAsRead")})},v)},a.trustAsHtml=function(a){return l.trustAsHtml(a)}}]),dbnextNotificationsModule.controller("dbnext.notifications.NewStep1Controller",["$scope","$rootScope","$timeout","$log","$filter","toaster","$state","$stateParams","notificationsService","initialState","viewStateService","translate",function(a,b,c,d,e,f,g,h,i,j,k,l){a.messageForm={},a.messageForm.formModel={},a.messageForm.replyMessage=!1,k.resetInitialState("de.notifications.content");var m=function(){return angular.isDefined(a.messageForm.messageInit)&&angular.isDefined(a.messageForm.messageInit._links)&&angular.isDefined(a.messageForm.messageInit._links.reply_to_message)},n=function(){if(angular.isDefined(a.messageForm.messageInit.notificationSubject)){var b=l.property("db.notifications.new.step1.reply");a.messageForm.formModel.title=b+a.messageForm.messageInit.notificationSubject.substring(0,200-b.length)}a.messageForm.replyMessage=!0};null!=k.getInitialState(g.current.name)&&(a.messageForm.messageInit=k.getInitialState(g.current.name),m()&&n(),angular.isDefined(k.getFormData("messageForm"))&&(a.messageForm.formModel=k.getFormData("messageForm")));var o=function(a){for(var b in a)b&&angular.isDefined(a[b])&&angular.isDefined(a[b].$setDirty)&&a[b].$setDirty();a.$setDirty()};a.submit=function(b){console.log(b),b.$valid?(k.setInitialState(g.current.name,{}),k.appendFormData("messageForm",a.messageForm.formModel),k.setInitialState("de.notifications.new.step2",a.messageForm),g.go("de.notifications.new.step2")):o(b)}}]),dbnextNotificationsModule.controller("dbnext.notifications.NewStep2Controller",["$scope","initialState","viewStateService","$modal","$state","$stateParams","staticFind","accountsService","notificationsService","dbNtfNotificationService","notificationTypesDictionary","language",function(a,b,c,d,e,f,g,h,i,j,k,l){a.notificationTypes=[];var m=function(b){var c=g.findById(a.notificationTypes,b);return c&&angular.isDefined(c.name)?c.name:null};i.searchGroup({pageSize:1e4,language:l.get()}).then(function(b){angular.forEach(b.content,function(b){b.id=b.groupId,b.type="GROUP",a.notificationTypes.push(b)}),a.messageTypeTypeLabel=m(a.messageForm.formModel.type)}),null!=c.getInitialState(e.current.name)&&(a.messageForm=c.getInitialState(e.current.name)),a.accept=function(){return a.isReply()?void a.acceptReply():i.action({groupId:a.messageForm.formModel.type,messageSubject:a.messageForm.formModel.title,messageContent:a.messageForm.formModel.content},"create_message").then(function(b){a.messageForm={},c.resetInitialState("de.notifications.new.step1"),c.resetInitialState("de.notifications.new.step2"),e.go("de.notifications.content"),j.showNotificationAcceptedDialog(b)})},a.acceptReply=function(){return i.action({notificationId:a.messageForm.messageInit.notificationId,messageSubject:a.messageForm.formModel.title,messageContent:a.messageForm.formModel.content},"reply_to_message",a.messageForm.messageInit).then(function(b){a.messageForm={},c.resetInitialState("de.notifications.new.step1"),c.resetInitialState("de.notifications.new.step2"),e.go("de.notifications.content"),j.showNotificationAcceptedDialog(b)})},a.change=function(a){e.go("de.notifications.new.step1")},a.isReply=function(){return angular.isDefined(a.messageForm.messageInit)&&angular.isDefined(a.messageForm.messageInit._links)&&angular.isDefined(a.messageForm.messageInit._links.reply_to_message)}}]),dbnextNotificationsModule.controller("dbnext.notifications.ViewController",["$scope","$rootScope","$location","$timeout","$log","$filter","$state",function(a,b,c,d,e,f,g){a.selected={}}]),dbnextNotificationsModule.directive("dbNtfContentTextarea",["pathService","translate","ebTheming",function(a,b,c){return{restrict:"EA",replace:!0,scope:{placeholder:"@",ngModel:"=",ebName:"@"},templateUrl:a.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfContentTextarea/dbNtfContentTextarea.html",link:function(a,b,d,e){c.applyTheme(b)}}}]),dbnextNotificationsModule.directive("dbNtfFilter",["ebTheming","notificationFilterCriteria","commonService","$rootScope","$timeout","$log","$http","$templateCache","pathService","accountsService","$state","$filter","$window","formService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",context:"=",callback:"&"},templateUrl:i.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfFilter/dbNtfFilter.html",link:function(b,c,d){a.applyTheme(c),b.submitFilter=function(a){if(a.$valid)return n.scrollTo("notificationsDetailsList"),b.ngModel.pageNumber=1,b.callback({ctx:b.context,params:b.ngModel})},b.formatAmount=function(a){}}}}]),dbnextNotificationsModule.directive("dbNtfGroupSelect",["pathService","translate","notificationsService","language",function(a,b,c,d){return{restrict:"EA",replace:!0,scope:{placeholder:"@"},templateUrl:a.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfGroupSelect/dbNtfGroupSelect.html",link:function(a,b,e){a.notificationTypes=[],c.searchGroup({pageSize:1e4,language:d.get()}).then(function(b){angular.forEach(b.content,function(b){b.id=b.groupId,b.type="GROUP",a.notificationTypes.push(b)})})}}}]),dbnextNotificationsModule.directive("dbNtfStatusSelect",["pathService","translate","notificationStatusDictionary",function(a,b,c){return{restrict:"EA",replace:!0,scope:{placeholder:"@"},templateUrl:a.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfStatusSelect/dbNtfStatusSelect.html",link:function(a,b,d){a.notificationStatus=c}}}]),dbnextNotificationsModule.directive("dbNtfTitleInput",["pathService","translate","ebTheming",function(a,b,c){return{restrict:"EA",replace:!0,require:"ngModel",scope:{placeholder:"@",ngModel:"=",ebName:"@"},templateUrl:a.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfTitleInput/dbNtfTitleInput.html",link:function(a,b,d,e){c.applyTheme(b);b.find("input")}}}]),dbnextNotificationsModule.directive("dbNtfTypeIcon",["pathService",function(a){return{restrict:"EA",replace:!0,scope:{notificationType:"="},templateUrl:a.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfTypeIcon/dbNtfTypeIcon.html",link:function(a,b,c){switch(a.iconClass="",a.notificationType){case"INFO":a.iconClass="eb-icon-msg-info-category db-ntf-type-icon-info";break;case"WARN":a.iconClass="eb-icon-msg-wrn-category db-ntf-type-icon-warn";break;case"OFFER":a.iconClass="eb-icon-msg-star-category db-ntf-type-icon-offer";break;default:a.iconClass="eb-icon-msg-info-category db-ntf-type-icon-info"}}}}]),dbnextNotificationsModule.directive("dbNtfTypeSelect",["pathService","translate","notificationTypesDictionary","notificationsService","language","staticFind",function(a,b,c,d,e,f){return{restrict:"EA",replace:!0,scope:{placeholder:"@",params:"=?"},templateUrl:a.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfTypeSelect/dbNtfTypeSelect.html",link:function(a,b,g){a.notificationTypes=[],a.disableAll?a.notificationTypes=[]:a.notificationTypes=angular.copy(c),d.searchGroup({pageSize:1e4,language:e.get()}).then(function(b){angular.forEach(b.content,function(b){b.id=a.notificationTypes.length,b.type="GROUP",a.notificationTypes.push(b)})}),a.selectType=function(b,c){angular.extend(a.params,h(c))};var h=function(b){var c={},d=f.findById(a.notificationTypes,b);return d?angular.isDefined(d.key)?(c.notificationType=d.key,c.groupId=""):(c.notificationType="MESSAGE",c.groupId=d.groupId):(c.notificationType=null,c.groupId=null),c}}}}]),dbnextNotificationsModule.directive("dbNtfWaySelect",["pathService","translate","notificationWayDictionary",function(a,b,c){return{restrict:"EA",replace:!0,scope:{placeholder:"@"},templateUrl:a.generateTemplatePath("dbnext-notifications")+"/directives/dbNtfWaySelect/dbNtfWaySelect.html",link:function(a,b,d){a.notificationWay=c}}}]),dbnextNotificationsModule.controller("dbnext.notifications.IconController",["$scope","$rootScope","events","$state","dbNtfCountService","notificationsService","notificationFilterCriteria",function(a,b,c,d,e,f,g){e.refreshNotificationsCount(),a.showNewMessages=!1,a.goTo=function(){d.go("de.notifications.content")},c.listener(a,"ebEvent.ebankingSharedModule.notificationsCountUpdate",function(c,e){e.quantity>a.notificationsCountControll&&"de.notifications.content"==d.current.name&&b.$emit("update_notifications_list"),a.notificationsCountControll=e.quantity,e.quantity>0?(a.notificationsCount=e.quantity,a.showNewMessages=!0):a.showNewMessages=!1,a.style=h()});var h=function(){if(a.notificationsCount){var b=8*a.notificationsCount.toString().length+10;return{buttonStyle:{"min-width":b+12+"px"},itemsStyle:{width:b+"px !important"},titleStyle:{"padding-left":b-12+"px"}}}return{}}}]),dbnextNotificationsModule.service("dbNtfCountService",["storageItemsService","notificationsService","events","$interval",function(a,b,c,d){var e=0,f=function(){a.searchItemsFromStorage("dbnext-notifications.settings").then(function(a){if(c.broadcast("eb.ebankingShared.notificationsCountCheck"),a&&a.content&&a.content[0]){var d={modificationDateTimeFrom:a.content[0].value.modificationDateTimeFrom};b.searchSummary(d).then(function(a){null!=a&&(c.broadcast("ebEvent.ebankingSharedModule.notificationsCountUpdate",{quantity:a.quantity}),a.quantity>0&&e!=a.quantity&&c.broadcast("eb.dashboard.headerUpdate"),e=a.quantity)})}})};d(f,3e4);return{refreshNotificationsCount:f}}]),dbnextNotificationsModule.service("dbNtfNotificationService",["$modal","$state","translate",function(a,b,c){return{showNotificationAcceptedDialog:function(d){var e=a.open({template:'<eb-choice-dialog eb-icon="{{icoClass}}" eb-title="{{::\'db.notifications.new.notification.title\'|translate}}" eb-message="{{::confirmationText}}" eb-on-close="cancel()" eb-choices="choices"></eb-choice-dialog>',windowClass:"eb-choice-dialog",backdropClass:"always-on",controller:["$scope",function(a){var f="eb-icon-confirm-success success",g="";switch(d.status){case"REJECTED":f="eb-icon-confirm-error error",g=c.property("db.notifications.new.notification.rejected")+d.reason;break;case"REALIZED":f="eb-icon-confirm-success success",g=c.property("db.notifications.new.notification.realized");break;case"INTRODUCED":f="eb-icon-confirm-success success",g=c.property("db.notifications.new.notification.introduced");break;default:f="eb-icon-confirm-success success",g=c.property("db.notifications.notification.default")}angular.extend(a,{cancel:function(){e.dismiss()},choices:[{type:"full-rounded positive primary",name:c.property("db.notifications.new.notification.new"),make:function(){e.dismiss(),b.go("de.notifications.new.step1",{currentObject:{}})}},{type:"full-text",name:c.property("db.notifications.notification.back"),make:function(){e.dismiss(),b.go("de.dashboard")}}],icoClass:f,confirmationText:g})}]})}}}]),angular.module("dbnext-notifications").run(["$templateCache",function(a){a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfContentTextarea/dbNtfContentTextarea.html",'<div><textarea placeholder="{{::placeholder|translate}}" class="message-content" name="{{ebName}}" maxlength="4000" ng-required="true" ng-model="ngModel" ng-pattern="/^[ABCDEFGHIJKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz1234567890\\u0104\\u0105\\u015a\\u015b\\u0118\\u0119\\u017b\\u017c\\u0179\\u017a\\u0106\\u0107\\u0143\\u0144\\u0141\\u0142\\u00d3\\u00f3\\u0022 ~`!@#%^&*()_+-={}\\[\\]\\:;\'?,./\\n\\r\\t\\\\\\>$äÄöÖüÜß]*$/">\n</div>'),a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfFilter/dbNtfFilter.html",'<form name="notificationFilterForm" novalidate><div eb-themable class="list-filter"><div class="transaction-filter-container"><eb-responsive-row center label="db.notifications.filter.label.period" class="period-label"><div eb-themable class="date-range"><eb-date-range-select ng-model="ngModel" eb-form="notificationFilterForm"></eb-date-range-select></div></eb-responsive-row><div class="account-filter-padding-detail"><eb-responsive-row label="db.notification.filter.label.notification_content" label-for="content"><input type="text" class="title-input" placeholder="{{::\'db.notification.filter.content.plaseholder\'|translate}}" id="content" ng-model="ngModel.text" maxlength="35"></eb-responsive-row><eb-responsive-row label="db.notification.filter.label.notification_way" label-for="way"><db-ntf-way-select name="way" ng-model="ngModel.notificationDirection" placeholder="{{::\'eb.notification.way.select.placeholder\'|translate}}"></db-ntf-way-select></eb-responsive-row><eb-responsive-row center label="db.notification.filter.label.notification_type" label-for="type"><db-ntf-type-select name="type" ng-model="ngModel.notificationTypeId" params="ngModel" placeholder="{{::\'eb.notification.type.select.placeholder\'|translate}}"></db-ntf-type-select></eb-responsive-row><eb-responsive-row center label="db.notification.filter.label.notification_status" label-for="status"><db-ntf-status-select name="status" ng-model="ngModel.notificationStatus" placeholder="{{::\'eb.notification.status.select.placeholder\'|translate}}"></db-ntf-status-select></eb-responsive-row><eb-action-footer submit-label="db.notifications.filter.label.button" submit-action="submitFilter(notificationFilterForm)"></eb-action-footer></div></div></div></form>'),a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfGroupSelect/dbNtfGroupSelect.html",'<div><ui-select eb-themable search-enabled="false" theme="select2"><ui-select-match placeholder="{{::placeholder|translate}}"><div ng-if="$select.selected.type !=\'GROUP\'">{{$select.selected.label | translate}}</div><div ng-if="$select.selected.type ==\'GROUP\'">{{$select.selected.name | emptyFilter}}</div></ui-select-match><ui-select-choices class="block-choices" repeat="notification.id as notification in notificationTypes"><div ng-if="notification.type !=\'GROUP\'">{{notification.label | translate}}</div><div ng-if="notification.type ==\'GROUP\'">{{notification.name | emptyFilter}}</div></ui-select-choices></ui-select></div>'),a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfStatusSelect/dbNtfStatusSelect.html",'<div><ui-select eb-themable search-enabled="false" theme="select2"><ui-select-match placeholder="{{::placeholder|translate}}">{{$select.selected.label | translate}}</ui-select-match><ui-select-choices class="block-choices" repeat="notification.key as notification in notificationStatus"><div>{{notification.label | translate}}</div></ui-select-choices></ui-select></div>'),a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfTitleInput/dbNtfTitleInput.html",'<div><input type="text" placeholder="{{::placeholder|translate}}" maxlength="200" class="notification-title-input" name="{{ebName}}" ng-model="ngModel" ng-required="true" ng-pattern="/^[ABCDEFGHIJKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz1234567890\\u0104\\u0105\\u015a\\u015b\\u0118\\u0119\\u017b\\u017c\\u0179\\u017a\\u0106\\u0107\\u0143\\u0144\\u0141\\u0142\\u00d3\\u00f3\\u0022 ~`!@#%^&*()_+-={}\\[\\]\\:;\'?,./\\n\\r\\t\\\\\\>$äÄöÖüÜß]*$/"></div>'),a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfTypeIcon/dbNtfTypeIcon.html",'<span class="db-ntf-type-icon"><i eb-themable ng-class="iconClass" class="eb-icon"></i></span>'),a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfTypeSelect/dbNtfTypeSelect.html",'<div><ui-select eb-themable search-enabled="false" theme="select2" on-select="selectType($item, $model)"><ui-select-match placeholder="{{::placeholder|translate}}"><span ng-if="$select.selected.type !=\'GROUP\'">{{$select.selected.label | translate}}</span> <span ng-if="$select.selected.type ==\'GROUP\'">{{$select.selected.name | emptyFilter}}</span></ui-select-match><ui-select-choices class="block-choices" repeat="notification.id as notification in notificationTypes"><div ng-if="notification.type !=\'GROUP\'">{{notification.label | translate}}</div><div ng-if="notification.type ==\'GROUP\'">{{notification.name | emptyFilter}}</div></ui-select-choices></ui-select></div>'),a.put("templates/dbnext-notifications/0.0.9/directives/dbNtfWaySelect/dbNtfWaySelect.html",'<div><ui-select eb-themable search-enabled="false" theme="select2"><ui-select-match placeholder="{{::placeholder|translate}}">{{$select.selected.label | translate}}</ui-select-match><ui-select-choices class="block-choices" repeat="notification.key as notification in notificationWay"><div>{{notification.label | translate}}</div></ui-select-choices></ui-select></div>'),a.put("templates/dbnext-notifications/0.0.9/elements/header/notifications-headerElementView.html",'<span ng-controller="dbnext.notifications.IconController"><eb-button ng-click="goTo()" class="db-ntf-header-icon" ng-style="style.buttonStyle"><i eb-themable class="eb-icon eb-ico-notifications"></i> <span ng-hide="!showNewMessages" class="eb-header-icon-unread-messages-count" ng-style="style.itemsStyle">{{notificationsCount}}</span> <span class="header-item-title" ng-style="style.titleStyle" eb-msg="db.notifications.dashboard.widget.title"></span></eb-button></span>'),a.put("templates/dbnext-notifications/0.0.9/views/notificationsContent.html",'<div eb-themable><eb-mini-bar class="eb-container-padding-off" search-text="filterOptions.subject" eb-disable-more="true" add-url="de.notifications.new.step1" add-icon-name="eb-ico-notifications" add-title="{{::\'db.notifications.content.button.new_message\'|translate}}" eb-search-placeholder="{{::\'db.notifications.content.mini_bar.placeholder\'|translate}}" add-widget-name="notifications"></eb-mini-bar><div class="eb-filter-header-container eb-container-padding-horizontal-off"><div class="row eb-filter-header notifications-filter-header"><span eb-container class="padding small"><div class="col-xs-6 col-md-6 text-left eb-filter-clean"><span ng-show="showClearFilter" ng-click="clearFilter()" style="cursor: pointer" eb-msg="transaction.filter.label.clear"></span></div><div class="col-xs-6 col-md-6 text-right eb-filter-switch" ng-class="{\'pull-right\': !showFilter}"><div ng-click="showFilterWindow()" style="cursor: pointer"><i eb-themable class="eb-icon" style="font-size: 1.3em" ng-class="{\'eb-ico-filter-applied\': showFilter == true , \'eb-ico-filter-show\': showFilter == false}"></i> <span ng-if="showFilter" class="link" eb-msg="transaction.filter.label.hide"></span> <span ng-if="!showFilter" class="link" eb-msg="transaction.filter.label.show"></span></div></div></span></div></div><div ng-show="showFilter"><db-ntf-filter ng-model="filterParams" context="notificationsList" callback="submit(ctx, params)"></db-ntf-filter></div><eb-list id="notificationsDetailsList" eb-themable class="notifications notification-based-list" eb-promise="notificationsListPromise"><eb-list-item class="row" ng-repeat="notification in notifications = (notificationsList.content | filter: {wrappedText : filterOptions.subject})" ng-class="{\'item-content-active-action\' : notification.notificationStatus ==\'NOT_READ\' || notification.notificationStatus == \'RECEIVED\'}" ng-click="openMessage(notification)"><eb-list-item-content class="item-content-with-actions"><div class="actions-cell" ng-click="$event.stopPropagation()"><div class="default-desktop-option"><a ui-sref="^.details" store-context="notification"><span eb-msg="db.notifications.content.list.options.details"></span></a></div><div class="options"><div eb-list-options class="no-desktop-options"><!--                             <li ng-if="notification._links.reply_to_message">\n                                <a class="option-row" ui-sref="de.notifications.new.step1" store-context="notification">\n                                    <span eb-themable class="eb-icon eb-icon-reply options-icon"></span>\n                                    <span class="option-label" eb-msg="db.notifications.content.list.options.reply"></span>\n                                </a>\n                            </li> --><li><a class="option-row" ui-sref="^.details" store-context="notification"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.notifications.content.list.options.details"></span></a></li></div></div></div><!-- no whitespace fix  --><div class="info-cell cell_1_in_4"><div><div ng-show="notification.markAsNotSeen && (notification.notificationStatus ==\'NOT_READ\' || notification.notificationStatus == \'RECEIVED\')" class="info-read-message"><span class="notification-unread animate-on"></span></div><!--                         <div ng-if="notification.notificationDirection == \'OUTGOING\'">\n                            <span class="notification-reply">\n                                <i eb-themable class="eb-icon eb-icon-reply"></i>\n                            </span>\n                        </div> --><div class="date-cell"><span class="notification-reply" ng-if="notification.notificationDirection == \'OUTGOING\'"><i eb-themable class="eb-icon eb-icon-reply"></i></span> <span class="data-cell-dekstop" ng-style="notification.notificationDirection == \'OUTGOING\' ? { \'padding-left\': \'0px\'} : { \'padding-left\' : \'20px\' }">{{notification.entryDate | dateFilter | emptyFilter}}</span></div><!-- no whitespace fix\n                     --><div style="display: block"><span ng-if="notification.type == \'MESSAGE\' && notification.counter > 1" class="notification-messages-count">{{notification.counter}}</span></div></div></div><!-- no whitespace fix --><div class="content-cell cell_3_in_4"><div class="type-cell cell_1_in_2"><div class="date-cell data-cell-mobile"><span>{{notification.entryDate | dateFilter | emptyFilter}}</span></div>&nbsp;<span db-ntf-type-icon notification-type="notification.priority"></span>&nbsp;<span class="ntf_sub_name" ng-if="!notification.groupName" eb-msg-var key="db.notifications.notification_sub_type" variable="notification.type"></span><span class="ntf-group-name" ng-if="notification.groupName">{{notification.groupName + \' \'}}</span></div><div class="description-property-cell cell_2_in_2" ng-switch="notification.notificationContentFormat"><span ng-switch-when="HTML_FORMAT"><span ng-bind-html="trustAsHtml(notification.notificationSubject)" class="notification-html-content"><p style="margin: 0"></p></span></span> <span ng-switch-default><p style="margin: 0">{{notification.notificationSubject}}</p></span></div></div></eb-list-item-content></eb-list-item><div class="miniapp-empty-list" ng-if="notificationsList.content.length == 0">{{::"db.notifications.content.list.empty_list"|translate}}</div><div class="miniapp-empty-list" ng-if="notificationsList.length == 0">{{::"db.notifications.list_data_error"|translate}}</div></eb-list><div ng-show="notificationsListPromise.$$state.status === 1"><eb-pagination eb-data="notificationsList" eb-params="filterParams" eb-loading="loading" eb-pagination-count="5" scroll-to="notificationsDetailsList" callback="submit(ctx, params, rel)" class="eb-container-padding-horizontal-off"></eb-pagination></div></div>'),
a.put("templates/dbnext-notifications/0.0.9/views/notificationsDetails.html",'<div eb-themable><div><eb-section-header eb-header="db.notifications.details.header" eb-description="" back-state="de.notifications.content" class="eb-details-notifications-header" options><eb-button ng-show="detailsList[0]._links.reply_to_message" ng-click="reply()" class="eb-details-header-button"><i eb-themable class="eb-icon eb-icon-reply"></i><span eb-msg="db.notifications.details.header.button"></span></eb-button></eb-section-header><div class="details-body"><eb-list eb-themable class="notifications_details notification-details-based-list" eb-promise="notificationDetailsPromise"><eb-list-item class="row" ng-repeat="details in detailsList"><div eb-preloader-content promise="details.loadingPromise"><div eb-themable class="eb-list-item-content notification-details-header"><div class="notification-details-header-row"><div class="info-cell" ng-if="details.type == \'MESSAGE\' && details.counter > 0"><span class="notification-messages-count notification-messages-count-details">{{details.counter - $index}}</span></div><div class="direction-cell" ng-if="details.notificationDirection == \'OUTGOING\'"><span class="details-notification-reply"><i eb-themable class="eb-icon eb-icon-reply"></i></span></div><div class="date-cell" ng-class="{\'first-date-cell\' : details.type != \'MESSAGE\' && details.notificationDirection != \'OUTGOING\'}"><span>{{details.entryDate | dateFilter | emptyFilter}}</span></div><div class="type-cell"><span ng-if="!details.groupName" eb-msg-var key="db.notifications.notification_sub_type" variable="details.type"></span> <span ng-if="details.groupName">{{details.groupName}}</span></div></div></div><div class="notification-details-content-row"><div eb-themable class="eb-list-item-content item-content-with-actions"><div class="row subject-cell cell_2_in_2 notification-wrap-content" ng-switch="details.notificationContentFormat"><span ng-switch-when="HTML_FORMAT"><span ng-bind-html="trustAsHtml(details.notificationSubject)" class="notification-html-content"><p style="margin: 0"></p></span></span> <span ng-switch-default><p style="margin: 0">{{details.notificationSubject}}</p></span></div><div class="content-property-cell cell_2_in_2" ng-switch="details.notificationContentFormat"><div class="notification-wrap-content" ng-show="!notificationDetailsContent"><span ng-switch-when="HTML_FORMAT"><span ng-bind-html="trustAsHtml(details.notificationContent)" class="notification-html-content"><p style="margin: 0"></p></span></span> <span ng-switch-default><p style="margin: 0">{{details.notificationContent}}</p></span></div><div ng-show="notificationDetailsContent"><div class="notification-wrap-content" eb-preloader-content promise="productDetailsPromise"><span ng-if="details.notificationDetails.productType == \'ACCOUNT\'"><p style="margin: 0">{{detailsProductContent}}</p></span> <span ng-if="details.notificationDetails.productType == \'CREDIT\'"><p style="margin: 0">{{detailsProductContent}}</p></span> <span ng-if="details.notificationDetails.productType == \'DEPOSIT\'"><p style="margin: 0">{{detailsProductContent}}</p></span> <span ng-if="details.notificationDetails.productType == \'CARD\'"><p style="margin: 0">{{detailsProductContent}}</p></span></div></div><div class="notification-link" ng-show="details.relatedResourceDisplayLinkDetails"><a href="javascript:void(0)" ng-click="goToRelatedResourceDetails(details)"><span eb-msg reference-key="details.relatedResourceDisplayLinkDetails.linkTextKey"></span></a></div></div></div></div></div></eb-list-item><div class="miniapp-empty-list" ng-if="detailsList.length == 0">{{::"db.notifications.list_data_error"|translate}}</div></eb-list></div></div></div>'),a.put("templates/dbnext-notifications/0.0.9/views/notificationsNew.html",'<div class="inner-payment-form center-app-header"><eb-content-navigation></eb-content-navigation><form name="notificationAddForm" novalidate ng-submit="submit(notificationAddForm)"><div><div id="form-views" ui-view autoscroll="true"></div></div></form></div>'),a.put("templates/dbnext-notifications/0.0.9/views/notificationsNewStep1.html",'<eb-content-navigation></eb-content-navigation><div><div class="inner-form-padding center-form"><div eb-themable><eb-section-header style="padding-top:15px; padding-bottom: 15px" eb-header="db.notifications.new.step1.header" back-state="de.notifications.content"></eb-section-header><div class="form-body"><div ng-if="!messageForm.replyMessage" eb-responsive-row label="db.notifications.new.step1.type.label"><db-ntf-group-select name="type" placeholder="db.notifications.new.step1.type.placeholder" ng-required="true" ng-model="messageForm.formModel.type"></db-ntf-group-select><eb-validation-messages eb-name="type"><div eb-message-key="required"><span eb-msg="db.notifications.new.step1.validation.type"></span></div><div eb-message-key="notification.message.type.NotNull"><span eb-msg="db.notifications.new.step1.validation.type"></span></div></eb-validation-messages></div><div ng-if="messageForm.replyMessage" eb-responsive-row label="db.notifications.new.step1.type.label"><div>{{messageForm.messageInit.groupName}}</div></div><div eb-responsive-row label="db.notifications.new.step1.title.label"><div db-ntf-title-input placeholder="db.notifications.new.step1.title.placeholder" eb-name="title" ng-required="true" ng-model="messageForm.formModel.title"></div><eb-validation-messages eb-name="title"><div eb-message-key="required"><span eb-msg="db.notifications.new.step1.validation.title"></span></div><div eb-message-key="notification.message.title.NotNull"><span eb-msg="db.notifications.new.step1.validation.title"></span></div><div eb-message-key="pattern"><span eb-msg="db.notifications.new.step1.validation.title.pattern"></span></div></eb-validation-messages></div><div eb-responsive-row class="last-row" label="db.notifications.new.step1.body.label"><div db-ntf-content-textarea placeholder="db.notifications.new.step1.body.placeholder" eb-name="content" ng-required="true" ng-model="messageForm.formModel.content"></div><eb-validation-messages eb-name="content"><div eb-message-key="required"><span eb-msg="db.notifications.new.step1.validation.content"></span></div><div eb-message-key="notification.message.content.NotNull"><span eb-msg="db.notifications.new.step1.validation.content"></span></div><div eb-message-key="pattern"><span eb-msg="db.notifications.new.step1.validation.title.pattern"></span></div></eb-validation-messages></div><eb-action-footer submit-label="db.notifications.new.step1.submit" submit-action="submit(notificationAddForm)"></eb-action-footer></div></div></div></div>'),a.put("templates/dbnext-notifications/0.0.9/views/notificationsNewStep2.html",'<div><div><div class="step2 inner-form-padding center-form"><div class="panel-details"><eb-section-header eb-header="db.notifications.new.step2.header" back-state="de.notifications.content"></eb-section-header><div class="form-body form-body-step2"><div ng-if="!messageForm.replyMessage" eb-responsive-row label="db.notifications.new.step2.type.label"><div>{{::messageTypeTypeLabel}}</div></div><div ng-if="messageForm.replyMessage" eb-responsive-row label="db.notifications.new.step2.type.label"><div>{{::messageForm.messageInit.groupName}}</div></div><div class="notification-wrap-content" eb-responsive-row label="db.notifications.new.step2.title.label"><div><p style="margin: 0">{{::messageForm.formModel.title}}</p></div></div><div class="notification-wrap-content last-row" eb-responsive-row label="db.notifications.new.step2.body.label"><div><p style="margin: 0">{{::messageForm.formModel.content}}</p></div></div></div><div class="shaded-section"><eb-action-footer cancel-label="db.notifications.new.step2.correct" submit-label="db.notifications.new.step2.accept" cancel-action="change(notificationDetails)" submit-action="accept()"></eb-action-footer></div></div></div></div></div>'),a.put("templates/dbnext-notifications/0.0.9/views/notificationsView.html",'<eb-full-screen-widget miniapp-name="notifications"><div class="notifications"><div><div><eb-screen-content><div ui-view autoscroll="true"></div></eb-screen-content></div></div></div></eb-full-screen-widget>')}]);