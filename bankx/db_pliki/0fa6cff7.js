;var dbnextSettingsModule=angular.module("dbnext-settings",["ebanking-shared"]).config(["translationsLoaderProvider","$urlRouterProvider","guiProvider","pathServiceProvider","stateServiceProvider",function(a,b,c,d,e){var f="de",g="dbnext",h="settings",i=g+"."+h,j=g+"-"+h,k=f+"."+h;webComponentRegistry[j].simpleName=h,webComponentRegistry[j].startState=k+".content",c.registerElement(j,"menu"),a.addTranslationsPath(d.generateRootPath(j)+"/i18n/messages_{{language}}.json"),e.state(f,{url:"/"+f,abstract:!0,template:"<div ui-view></div>"}).state(k,{url:"/"+h,abstract:!0,templateUrl:d.generateTemplatePath(j)+"/views/settingsView.html",controller:i+".ViewController"}).state(k+".content",{url:"/content",templateUrl:d.generateTemplatePath(j)+"/views/settingsContent.html",controller:i+".ContentController"}).state(k+".access",{url:"/access_maintenance",templateUrl:d.generateTemplatePath(j)+"/views/accessMaintenance.html",controller:i+".AccessMaintenanceController"}).state(k+".operations",{url:"/user_operations",templateUrl:d.generateTemplatePath(j)+"/views/userOperations.html",controller:i+".UserOperationsController"}).state(k+".data",{url:"/my_data",templateUrl:d.generateTemplatePath(j)+"/views/myData.html",controller:i+".DataController"}).state(k+".fatca",{url:"/edit_fatca",templateUrl:d.generateTemplatePath(j)+"/views/editFatcaForm.html",controller:i+".EditFatcaController"}).state(k+".fatcaAccept",{url:"/edit_fatca/accept",templateUrl:d.generateTemplatePath(j)+"/views/editFatcaFormAccept.html",controller:i+".EditFatcaAcceptController"}).state(k+".changePassword",{url:"/changePassword",templateUrl:d.generateTemplatePath(j)+"/views/changePassword.html",controller:i+".ChangePasswordController"})}]).run(function(){});dbnextSettingsModule.controller("dbnext.settings.DefaultAccountController",["$scope","customerProductService","viewStateService","$state","notificationService","formService",function(a,b,c,d,e,f){a.formData={},a.formData.formModel={},a.formData.actualDefaultAccountId=null,a.$watch("formData.formModel.defaultAccountContractId",function(b,c){null!=b&&b!=c&&(null!=a.formData.actualDefaultAccountId&&a.formData.actualDefaultAccountId!=a.formData.formModel.defaultAccountContractId&&a.configureDefaultAccountForm.defaultAccountContractId.$setValidity("same",!0),null==a.formData.actualDefaultAccountId&&(a.formData.actualDefaultAccountId=b))}),a.submit=function(g){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),null!=a.formData.actualDefaultAccountId&&a.formData.actualDefaultAccountId==a.formData.formModel.defaultAccountContractId&&a.configureDefaultAccountForm.defaultAccountContractId.$setValidity("same",!1),g.$valid?(c.resetInitialState(d.current.name),c.setInitialState(d.current.name,{}),c.appendFormData("registerForm",a.formData),b.setCustomerDefaultAccount(a.formData.formModel).then(function(a){c.resetInitialState(d.current.name),b.updateCustomerProductData("ACCOUNT"),e.showDefaultAccountChangedDialog({text:{title:"db.settings.default_account.confirmation.title",message:"db.settings.default_account.confirmation.confirmation_text",back:"db.settings.default_account.confirmation.back"},state:{dashboard:"de.dashboard"}}),d.go("de.settings.content")},function(a){null!=a&&null!=a.errors&&f.scrollToError(a.errors[0].field)})):void f.dirtyFields(g)}}]),dbnextSettingsModule.controller("dbnext.settings.AccessMaintenanceController",["$scope","authenticationConfigService","viewStateService",function(a,b,c){a.authTool={},a.getCardInfo=function(){a.authTool={},a.authToolPromise=b.getUserCardInfo().then(function(b){a.authTool=b})},a.getCardInfo()}]),dbnextSettingsModule.controller("dbnext.settings.ChangePasswordController",["$scope",function(a){a.authTool={}}]),dbnextSettingsModule.controller("dbnext.settings.ContentController",["$scope","viewStateService",function(a,b){a.$parent.selected={},b.resetAllStates()}]),dbnextSettingsModule.controller("dbnext.settings.DataController",["$scope","customerService","$state",function(a,b,c){a.myDataPromise=b.getUserData().then(function(c){a.myData=c,a.fatcaDataPromise=b.getUserDataProperties().then(function(b){a.myData.countryOfBirth=b.kraj_URODZENIA["KRAJ_URODZENIA."+a.myData.countryOfBirth],a.myData.fatcaBeneficiary=b.beneficjent_FATCA["BENEFICJENT_FATCA."+a.myData.fatcaBeneficiary],a.myData.fatcaDataPermission=b.usperson["USPERSON."+a.myData.fatcaDataPermission],a.myData.secondCitizenship=b.obywatelstwo_2["OBYWATELSTWO_2."+a.myData.secondCitizenship],a.myData.taxCountry=b.kraj_REZ_POD["KRAJ_REZ_POD."+a.myData.taxCountry]})}),a.goTo=function(a){c.go(a)}}]),dbnextSettingsModule.controller("dbnext.settings.EditFatcaAcceptController",["$scope","$filter","$rootScope","userService","$timeout","$state","viewStateService","formService","customerService","notificationService","translate","$q",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.getInitialState("de.settings.fatca");a.fatcaData={},a.auth={},null!=m&&angular.isDefined(m.idFatcaDisposition)?(a.fatcaDispositionId=m.idFatcaDisposition,d.getIdentityDetails().then(function(b){a.customerId=b.id;var c={customerId:b.id,accessProfileId:b.accessProfileId,fromDisposition:!0,dispositionId:parseInt(m.idFatcaDisposition)};a.fatcaDataPropertiesPromise=i.getUserDataProperties().then(function(b){i.action(c,"get_user_data").then(function(c){a.fatcaData.agreement=n(b.usperson,c.fatcaDataPermission),a.fatcaData.real_beneficiary=n(b.beneficjent_FATCA,c.fatcaBeneficiary),a.fatcaData.citizenship=n(b.obywatelstwo_2,c.secondCitizenship),a.fatcaData.birth_country=n(b.kraj_URODZENIA,c.countryOfBirth),a.fatcaData.tax_country=n(b.kraj_REZ_POD,c.taxCountry),a.fatcaData.usa_tax_no=c.socialSecurityNumber,console.log(a.fatcaData)})})})):f.go("de.settings.fatca"),a.accept=function(b){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid?(a.errorCode=null,i.action({authenticationAttemptId:a.auth.authenticationAttemptId,credentials:a.auth.credentials,clientDataDispositionId:a.fatcaDispositionId,customerId:a.customerId},"accept_fatca_data_modification").then(function(a){f.go("de.settings.fatca"),j.showFatcaChangedDialog({text:{title:"db.settings.fatca.confirmation.title",message:"db.settings.fatca.confirmation.ok",back:"db.settings.fatca.confirmation.back"},state:{dashboard:"de.dashboard"}})},function(b){var c=/([a-zA-Z])/;a.errorCode=c.test(b.text)?"":b.text,h.scrollToError("input")})):void h.dirtyFields(b)};var n=function(a,c){var d=o(a);return b("filter")(d,function(a){return a.key===c})[0]},o=function(a){var b=[];return angular.forEach(a,function(a,c){b.push({key:c,value:a})}),b};a.change=function(){return f.go("de.settings.fatca")}}]),dbnextSettingsModule.controller("dbnext.settings.EditFatcaController",["$scope","$rootScope","$timeout","$state","viewStateService","formService","customerService","notificationService","translate","$q",function(a,b,c,d,e,f,g,h,i,j){a.fatcaData={};var k=e.getInitialState(d.current.name);null!=k&&angular.isDefined(k.fatcaData)?a.fatcaDataPropertiesPromise=g.getUserDataProperties().then(function(b){a.fatcaDataProperties=b,a.fatcaData=k.fatcaData}):a.fatcaDataPropertiesPromise=g.getUserDataProperties().then(function(b){a.fatcaDataProperties=b,g.getUserData().then(function(b){a.fatcaData.real_beneficiary=null==b.fatcaBeneficiary?null:"BENEFICJENT_FATCA."+b.fatcaBeneficiary,a.fatcaData.agreement=null==b.fatcaDataPermission?null:"USPERSON."+b.fatcaDataPermission,a.fatcaData.citizenship=null==b.secondCitizenship?null:"OBYWATELSTWO_2."+b.secondCitizenship,a.fatcaData.birth_country=null==b.countryOfBirth?null:"KRAJ_URODZENIA."+b.countryOfBirth,a.fatcaData.tax_country=null==b.taxCountry?null:"KRAJ_REZ_POD."+b.taxCountry,a.fatcaData.usa_tax_no=b.socialSecurityNumber})}),a.tooltip={icon:"eb-icon-tooltip eb-dbnext-theme",header:i.property("db.settings.fatca.usa_tax_no.tooltip.header"),content:i.property("db.settings.fatca.usa_tax_no.tooltip.content"),side:"top",handler:"click"},a.agreementText={text1:i.property("db.settings.fatca.agreement.text1"),text2:i.property("db.settings.fatca.agreement.text2"),text3:i.property("db.settings.fatca.agreement.text3"),text4:i.property("db.settings.fatca.agreement.text4"),text5:i.property("db.settings.fatca.agreement.text5"),text6:i.property("db.settings.fatca.agreement.text6"),text7:i.property("db.settings.fatca.agreement.text7")},a.isRequired=!0,a.isDisabledEditFATCA=!1,a.$watch("fatcaData.agreement",function(b,c){if(null!=a.fatcaDataProperties&&null!=b){var d=b.split(".")[1];a.fatcaDataProperties.usperson_WEW["USPERSON_WEW.TAK"].indexOf(d)<0?(a.isRequired=!1,a.isDisabledEditFATCA=!0,a.fatcaData.real_beneficiary=null,a.fatcaData.citizenship=null,a.fatcaData.birth_country=null,a.fatcaData.tax_country=null,a.fatcaData.usa_tax_no=null):(a.isRequired=!0,a.isDisabledEditFATCA=!1)}}),a.submit=function(b){if(angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid){a.errorCode=null;var c={};return c=a.isDisabledEditFATCA?{fatcaDataPermission:a.fatcaData.agreement}:{fatcaDataPermission:a.fatcaData.agreement,secondCitizenship:a.fatcaData.citizenship,countryOfBirth:a.fatcaData.birth_country,taxCountry:a.fatcaData.tax_country,fatcaBeneficiary:a.fatcaData.real_beneficiary,socialSecurityNumber:a.fatcaData.usa_tax_no},g.action(c,"create_fatca_data_modification_disposition").then(function(b){e.resetInitialState(d.current.name),e.setInitialState(d.current.name,{idFatcaDisposition:b.content,fatcaData:a.fatcaData}),d.go("de.settings.fatcaAccept")},function(a){return console.log(a),j.reject()})}f.dirtyFields(b)}}]),dbnextSettingsModule.controller("dbnext.settings.UserOperationsController",["$scope","gate","userOperationsService","viewStateService","userOperationFilterCriteria","$log","$timeout","formService","$state",function(a,b,c,d,e,f,g,h,i){a.showFilter=!1,a.showClearFilter=!1,a.showFilterWindow=function(){a.showFilter=!a.showFilter},a.clearFilter=function(){a.filterParams={},a.filterParams=e.getUserOperationFilterInitValues(),a.filterParams.isClearing=!0,a.showClearFilter=!1},null==d.getInitialState(i.current.name)&&d.setInitialState(i.current.name,{}),a.filterParams=d.getFormData("userOperationsFilterParams"),null==a.filterParams&&a.clearFilter();var j=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=$filter("date")(a[c],"yyyy-MM-dd"));return b},k=e.getUserOperationFilterInitValues();k=[k.dateFrom,k.dateTo,k.periodCount,k.periodDefinitionType,k.typeId,k.channel],a.$watchGroup(["filterParams.dateFrom","filterParams.dateTo","filterParams.periodCount","filterParams.periodDefinitionType","filterParams.typeId","filterParams.channel"],function(b,c){a.filterParams.isClearing=!1,JSON.stringify(j(b))===JSON.stringify(k)?a.showClearFilter=!1:a.showClearFilter=!0},!0);var l=function(a){if("last"==a.periodDefinitionType&&"days"==a.periodUnitType){var b=new Date;return b.setDate(b.getDate()-a.periodCount),b}return a.dateFrom},m=function(a){return"last"==a.periodDefinitionType&&"days"==a.periodUnitType?new Date:a.dateTo};a.userOperationsPromise=c.search(a.filterParams).then(function(b){a.userOperationList=b,a.loading=!1,a.filterParams.pageNumber=b.pageNumber,a.filterParams.pageSize=b.pageSize,d.appendFormData("userOperationsFilterParams",a.filterParams)},function(b){f.error("Error getting user operations"),a.userOperationList=[]}),a.submit=function(b,e,g){if(angular.isDefined(b)){a.loading=!0,console.log("parametry w submit",b,e,g);var i={dateFrom:l(e),dateTo:m(e),pageNumber:e.pageNumber,pageSize:e.pageSize,typeId:e.typeId,channel:e.channel};return a.userOperationsPromise=c.relationSearch(b,i,g).then(function(b){a.userOperationList=b,a.filterParams.pageNumber=b.pageNumber,a.filterParams.pageSize=b.pageSize,h.scrollTo("userOperationsListId"),d.appendFormData("userOperationsFilterParams",a.filterParams)},function(b){f.error("Error getting user operations"),a.userOperationList=[]}),a.userOperationsPromise}}}]),dbnextSettingsModule.controller("dbnext.settings.ViewController",["$scope",function(a){a.selected={}}]),dbnextSettingsModule.directive("dbStgAccessAuthTool",["ebTheming","pathService","authenticationConfigService",function(a,b,c){return{restrict:"EA",replace:!0,transclude:!0,scope:{authTool:"=ebAuthTool"},templateUrl:b.generateTemplatePath("dbnext-settings")+"/directives/dbStgAccessAuthTool/dbStgAccessAuthTool.html",link:function(b,c,d){a.applyTheme(c)}}}]),dbnextSettingsModule.directive("dbStgAccessLimits",["ebTheming","pathService","userAuthenticationService",function(a,b,c){return{restrict:"EA",replace:!0,transclude:!0,scope:{},templateUrl:b.generateTemplatePath("dbnext-settings")+"/directives/dbStgAccessLimits/dbStgAccessLimits.html",link:function(b,d,e){a.applyTheme(d);var f={type:"FINANCIAL_DISPOSITIONS"};b.limitsPromise=c.getChannelAccessLimits(f).then(function(a){b.limits=a.accessSettings})}}}]),dbnextSettingsModule.directive("dbStgAccessPassword",["ebTheming","pathService","gate","userService","dbStgPasswordService","formService","notificationService","$log","translate","domService",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"EA",replace:!0,transclude:!0,scope:{},templateUrl:b.generateTemplatePath("dbnext-settings")+"/directives/dbStgAccessPassword/dbStgAccessPassword.html",link:function(b,k,l){function m(a){d.getIdentityDetails().then(function(d){c.command("change_user_password",{userId:d.id,oldPassword:b.passData.pw1,newPassword:b.passData.pw2}).then(function(){h.info("password_changed"),g.showPasswordChangedDialog({text:{title:"db.settings.access.change_password.notification.success.title",success:"db.settings.access.change_password.notification.success.content",back:"db.settings.access.change_password.notification.back"},state:{dashboard:"de.dashboard"}}),n(),a.$setPristine(),a.$setUntouched()},function(c){h.error("Error during password change");var d="";"error.old_password_incorrect"===c.errors[0].defaultMessage?(d=i.property("db.settings.access.password.validate.old_code.bad"),g.showPasswordChangedErrorDialog({text:{title:"db.settings.access.change_password.notification.title",change:"db.settings.access.change_password.notification.change",errorMessage:d},state:{settingsAccess:"de.settings.changePassword"}}),n(),a.$setPristine(),a.$setUntouched()):b.changePassForm.pw2.$setValidity("criteria",!1)})})}function n(){b.passData={pw1:null,pw2:null,pw3:null}}b.el=k,a.applyTheme(k),function(){function a(a,b){for(var c=0;c<a.length;c++)if(a[c].policyType==b)return a[c];return null}function c(a){for(var b=0;b<f.length;b++)if("CONTAIN_CHARACTER_POLICY"==f[b].policyType&&f[b].characterType==a)return f[b];return null}function d(a){for(var b=0;b<a.length;b++)if("LENGTH_POLICY"==a[b].policyType)return a[b];return null}var f=[];e.getNewPasswordPolicies().then(function(e){f=e.newPasswordPolicy.passwordPolicies,b.lengthPolicy=d(f),b.regExpPolicy=angular.extend({regExp:!1},a(f,"MATCH_REGULAR_EXPRESSION_POLICY")),angular.forEach({DIGIT_CHARACTER:"digitCharacterPolicy",SMALL_CASE_LETTER:"smallCaseCharacterPolicy",UPPER_CASE_LETTER:"upperCaseCharacterPolicy",SPECIAL_CHARACTER:"specialCharacterPolicy"},function(a,d){b[a]=c(f,d)||!1})})}(b),b.numpad={},b.clicked={};var o=function(a){var c=j.getSelectionStart(changePassForm[a]),d=j.getSelectionEnd(changePassForm[a]),e=[c,d];b.numpad.caret=e,b.numpad.name=a};b.setNumpadModel=function(a){b.numpad.show=b.numpad.show&&b.numpad.name!=a?b.numpad.show:!b.numpad.show,o(a)},b.mouseLeave=function(a){b.clicked[a]&&o(a)},b.mouseUp=function(a){angular.forEach(b.clicked,function(a,c){b.clicked[c]=!1}),o(a)},b.submit=function(a){return console.log(a),a.$valid?void m(a):void f.dirtyFields(a)},b.validatePassword=function(a,c,d){switch(a){case"blur":null!=b.changePassForm&&null!=b.changePassForm[d]&&(null!=c&&c.length<b.lengthPolicy.minLength?b.changePassForm[d].$setValidity("minlength",!1):b.changePassForm[d].$setValidity("minlength",!0));break;case"change":b.changePassForm[d].$setValidity("criteria",!0),null!=b.changePassForm&&null!=b.changePassForm[d]&&null!=c&&c.length>=b.lengthPolicy.minLength&&b.changePassForm[d].$setValidity("minlength",!0)}},b.validateRepeatedPassword=function(){null!=b.passData.pw3&&b.passData.pw3!=b.el.querySelectorAll("#pw2").val()&&b.changePassForm.pw3.$setValidity("equal-to",!1)},n()}}}]),ebankingSharedModule.value("dbStgChanelConstant",[{id:0,value:"",label:"ALL"},{id:1,value:"WWW",label:"WWW"},{id:2,value:"CBP",label:"CBP"}]),dbnextSettingsModule.directive("dbStgChannelSelect",["$compile","$rootScope","$timeout","$log","$http","$templateCache","pathService","dbStgChanelConstant","$location","$state","translate",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"EA",replace:!1,transclude:!0,scope:{ngModel:"=",disabled:"="},templateUrl:g.generateTemplatePath("dbnext-settings")+"/directives/dbStgChannelSelect/dbStgChannelSelect.html",link:function(a,b,c){a.userChanelsList=h,a.placeholder=c.placeholder,a.selectChanel=function(b,c){a.ngModel=b.value}}}}]),dbnextSettingsModule.directive("dbStgFatcaAgreementSelect",["pathService",function(a){return{restrict:"EA",replace:!1,transclude:!0,scope:{ngModel:"=",ebProperties:"=",placeholder:"@",disabled:"="},templateUrl:a.generateTemplatePath("dbnext-settings")+"/directives/dbStgFatcaAgreementSelect/dbStgFatcaAgreementSelect.html",link:function(a,b,c){var d=function(a){var b=[];return angular.forEach(a,function(a,c){b.push({key:c,value:a})}),b};a.$watch("ebProperties",function(b){b&&(a.fatcaAgreementBool=d(b))}),a.selectFatcaAgreement=function(b,c){a.ngModel=c}}}}]),dbnextSettingsModule.directive("dbStgFatcaBirthCountrySelect",["pathService",function(a){return{restrict:"EA",replace:!1,transclude:!0,scope:{ngModel:"=",ebProperties:"=",placeholder:"@",ngDisabled:"=?"},templateUrl:a.generateTemplatePath("dbnext-settings")+"/directives/dbStgFatcaBirthCountrySelect/dbStgFatcaBirthCountrySelect.html",link:function(a,b,c){var d=function(a){var b=[];return angular.forEach(a,function(a,c){b.push({key:c,value:a})}),b};a.$watch("ebProperties",function(b){b&&(a.birthCountries=d(b))}),a.selectBirthCountry=function(b,c){a.ngModel=c}}}}]),dbnextSettingsModule.directive("dbStgFatcaDiffCitizenshipSelect",["pathService",function(a){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",ebProperties:"=",placeholder:"@",ngDisabled:"=?"},templateUrl:a.generateTemplatePath("dbnext-settings")+"/directives/dbStgFatcaDiffCitizenshipSelect/dbStgFatcaDiffCitizenshipSelect.html",link:function(a,b,c){var d=function(a){var b=[];return angular.forEach(a,function(a,c){b.push({key:c,value:a})}),b};a.$watch("ebProperties",function(b){b&&(a.citizenships=d(b))}),a.selectDiffCitizenship=function(b,c){a.ngModel=c};var e=function(a){return a.toLowerCase().replace(/\\s/g,"").replace(/[àáâãäå]/g,"a").replace(/æ/g,"ae").replace(/[çć]/g,"c").replace(/[èéêëěēę]/g,"e").replace(/[ìíîï]/g,"i").replace(/ł/g,"l").replace(/ñňń/g,"n").replace(/[òóôõöøō]/g,"o").replace(/ř/g,"r").replace(/[šś]/g,"s").replace(/[ť]/g,"t").replace(/œ/g,"oe").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y").replace(/[žżź]/g,"z").replace(/\\W/g,"")};a.normalizedName=function(a){return e(a.value)}}}}]),dbnextSettingsModule.directive("dbStgFatcaRealBeneficiarySelect",["pathService",function(a){return{restrict:"EA",replace:!1,transclude:!0,scope:{ngModel:"=",ebProperties:"=",placeholder:"@",ngDisabled:"=?"},templateUrl:a.generateTemplatePath("dbnext-settings")+"/directives/dbStgFatcaRealBeneficiarySelect/dbStgFatcaRealBeneficiarySelect.html",link:function(a,b,c){var d=function(a){var b=[];return angular.forEach(a,function(a,c){b.push({key:c,value:a})}),b};a.$watch("ebProperties",function(b){b&&(a.realBeneficiaryBool=d(b))}),a.selectRealBeneficiary=function(b,c){a.ngModel=c}}}}]),dbnextSettingsModule.directive("dbStgFatcaTaxCountrySelect",["pathService",function(a){return{restrict:"EA",replace:!1,transclude:!0,scope:{ngModel:"=",ebProperties:"=",placeholder:"@",ngDisabled:"=?"},templateUrl:a.generateTemplatePath("dbnext-settings")+"/directives/dbStgFatcaTaxCountrySelect/dbStgFatcaTaxCountrySelect.html",link:function(a,b,c){var d=function(a){var b=[];return angular.forEach(a,function(a,c){b.push({key:c,value:a})}),b};a.$watch("ebProperties",function(b){b&&(a.taxCountries=d(b))}),a.selectTaxCountry=function(b,c){a.ngModel=c}}}}]),dbnextSettingsModule.directive("dbStgFatcaUsaTaxNoInput",["pathService",function(a){return{restrict:"EA",require:"ngModel",replace:!0,transclude:!0,scope:{ebPlaceholder:"@"},templateUrl:a.generateTemplatePath("dbnext-settings")+"/directives/dbStgFatcaUsaTaxNoInput/dbStgFatcaUsaTaxNoInput.html",link:function(a,b,c){}}}]),dbnextSettingsModule.directive("dbStgSmsActivaction",["ebTheming","pathService","$location","$anchorScroll","$modal","translate","customerService","notificationService",function(a,b,c,d,e,f,g,h){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:b.generateTemplatePath("dbnext-settings")+"/directives/dbStgSmsActivaction/dbStgSmsActivaction.html",scope:{ebAuthTool:"=",ebActivation:"&"},link:function(b,c,d){a.applyTheme(c),b.goToActivationModal=function(){if(""==b.ebAuthTool.phoneNo)var a={title:f.property("db.settings.access.sms_activaction.modal.error.title"),message:f.property("db.settings.access.sms_activaction.modal.error.message")},c=e.open({template:'<eb-confirmation-dialog eb-icon="eb-icon-confirm-error error" eb-title="{{ reason.title }}" eb-message="{{ reason.message }}" eb-action-name="{{::\'platform.server_message.server_alert_invoker.back\'|translate}}" eb-on-confirm="acknowledge()" eb-on-close="acknowledge()"></eb-confirmation-dialog>',windowClass:"eb-confirmation-dialog",backdropClass:"always-on",controller:["$scope",function(b){angular.extend(b,{reason:a,acknowledge:function(){c.dismiss()}})}]});else var d=e.open({template:'<db-stg-sms-activaction-modal eb-on-close="cancel()" phone-number="phoneNumber" eb-accept="accept()"></db-stg-sms-activaction-modal>',windowClass:"eb-modal-dialog",backdropClass:"always-on",controller:["$scope",function(a){angular.extend(a,{phoneNumber:b.ebAuthTool.phoneNo,cancel:function(){d.dismiss()},accept:function(){var a={text:{title:"db.settings.access.sms_activaction.title",message:"db.settings.access.sms_activaction.modal.confirm",back:"db.settings.access.sms_activaction.back"},state:{dashboard:"de.dashboard"}};d.dismiss(),h.showSmsActicationSuccessDialog(a),b.ebAuthTool.method="SMS",b.ebActivation()}})}]})}}}}]),dbnextSettingsModule.directive("dbStgSmsActivactionModal",["ebTheming","pathService","$location","$anchorScroll","customerService","formService","userService","$q",function(a,b,c,d,e,f,g,h){return{restrict:"EA",replace:!0,transclude:!0,scope:{close:"&ebOnClose",accept:"&ebAccept",phoneNumber:"=",ebAuthTool:"="},templateUrl:b.generateTemplatePath("dbnext-settings")+"/directives/dbStgSmsActivactionModal/dbStgSmsActivactionModal.html",link:function(a,b,c){a.authorizationList=[],a.model={},a.showForm=!0,a.auth={},a.auth.resourceType="customer",a.auth.relation="change_auth_method",a.customerAuthPromise=g.getIdentityDetails().then(function(b){a.customerId=b.id,a.model.authenticationMethod="TAN"}),a.text={auth_method:"db.payments.new.step2.row.auth.label.",no_auth_required:"db.payments.new.step2.row.auth.no_authorization_required",tan_validate_required:"db.payments.new.step2.row.auth.tan.validate.required",sms_validate_required:"db.payments.new.step2.row.auth.sms.validate.required",token_validate_required:"db.payments.new.step2.row.auth.token.validate.required",input_placeholders:"db.payments.new.step2.row.auth.placeholder.",error_code_validate:"db.config.auth.error_code.validate."},a.acceptForm=function(b,c){if(angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid){a.errorCode=null,a.showFrom=!1;var d={credentials:c.credentials,authorizationAttemptId:c.authenticationAttemptId};a.acceptPromise=e.action(d,"change_auth_method").then(function(b){a.accept()},function(b){var c=/([a-zA-Z])/;return a.errorCode=c.test(b.text)?"":b.text,a.showFrom=!0,h.reject()})}else f.dirtyFields(b)}}}}]),dbnextSettingsModule.directive("dbStgUserOperationFilter",["ebTheming","pathService","formService",function(a,b,c){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",disabled:"=",context:"=",callback:"&"},templateUrl:b.generateTemplatePath("dbnext-settings")+"/directives/dbStgUserOperationFilter/dbStgUserOperationFilter.html",link:function(b,d,e){a.applyTheme(d),b.submitFilter=function(a){if(a.$valid)return c.scrollTo("userOperationsListId"),b.ngModel.pageNumber=1,b.callback({ctx:b.context,params:b.ngModel})}}}}]),dbnextSettingsModule.directive("dbStgUserOperationTypeSelect",["$compile","$rootScope","$timeout","$log","$http","$templateCache","pathService","userOperationsService","$location","$state","translate",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"EA",replace:!1,transclude:!0,scope:{ngModel:"=",disabled:"="},templateUrl:g.generateTemplatePath("dbnext-settings")+"/directives/dbStgUserOperationTypeSelect/dbStgUserOperationTypeSelect.html",link:function(a,b,c){a.params={pageSize:1e4},a.placeholder=c.placeholder,a.userOperationTypesList=[],a.userOperationTypesPromise=h.searchTypes(a.params).then(function(b){angular.forEach(b.content,function(a,b){a.name=k.property("db.settings.operations.user_action_type."+a.typeId)}),a.userOperationTypesList=[{name:k.property("db.settings.operations.user_action_type."),typeId:null}].concat(b.content)}),a.selectUserOperationType=function(b,c){a.ngModel=b.typeId}}}}]),dbnextSettingsModule.controller("dbnext.settings.MenuElementController",["$scope","$rootScope",function(a,b){a.isStateActive=b.isStateActive}]),dbnextSettingsModule.filter("authIdFilter",function(){return function(a){if(angular.isDefined(a)&&null!=a){if(10==a.length){var b=a.substring(0,3)+" "+a.substring(3,6)+" "+a.substring(6,8)+" "+a.substring(8,a.length);return b}var b=a.substring(0,3)+" "+a.substring(3,a.length);return b}return null}}),dbnextSettingsModule.filter("loginFilter",function(){return function(a){if(angular.isDefined(a)&&null!=a&&10==a.length){var b=a.substring(0,2)+" "+a.substring(2,4)+" "+a.substring(4,6)+" "+a.substring(6,8)+" "+a.substring(8,10);return b}return null}}),dbnextSettingsModule.service("dbStgPasswordService",["$rootScope","userService","$q","gate","$log",function(a,b,c,d,e){var f={passwordPolicy:"get_user_password_policy"};return{getNewPasswordPolicies:function(){return b.getIdentityDetails().then(function(a){var b={userId:a.id};return d.command(f.passwordPolicy,b).then(function(a){if(null!=a.newPasswordPolicy&&null!=a.newPasswordPolicy.passwordPolicies)for(var b=0;b<a.newPasswordPolicy.passwordPolicies.length;b++)"LENGTH_POLICY"==a.newPasswordPolicy.passwordPolicies[b].policyType&&(a.newPasswordPolicy.passwordPolicies[b].maxLength=8,a.newPasswordPolicy.passwordPolicies[b].minLength=8);return a},function(){return e.error("Error getting password policies"),c.reject("Błąd pobrania password policies.")})})}}}]),angular.module("dbnext-settings").run(["$templateCache",function(a){a.put("templates/dbnext-settings/0.0.4/directives/dbStgAccessAuthTool/dbStgAccessAuthTool.html",'<div eb-themable><div class="access-auth-tool access-auth-tool-name" eb-msg="{{::\'db.settings.access.auth_tool.label.type.\' + authTool.method}}" ng-if="authTool.method"></div><div class="access-auth-tool" ng-switch="authTool.method"><div ng-switch-when="TAN"><div><span eb-msg="db.settings.access.auth_tool.label.tan.card_id"></span>&nbsp;{{authTool.cardIdNr}}</div><div><span eb-msg="db.settings.access.auth_tool.label.tan.number"></span>&nbsp;{{authTool.cardRefNr}}</div><div><span eb-msg="db.settings.access.auth_tool.label.tan.status"></span>&nbsp;{{::\'db.settings.access.auth_tool.status.\' + authTool.cardStatus | translate}}</div><div><span eb-msg="db.settings.access.auth_tool.label.tan.date"></span>&nbsp;{{authTool.expirationDate | dateFilter}}</div></div><div ng-switch-when="SMS"><div><span eb-msg="db.settings.access.auth_tool.label.sms.number"></span>&nbsp;{{authTool.phoneNo}}</div><div><span eb-msg="db.settings.access.auth_tool.label.sms.status"></span>&nbsp;{{::\'db.settings.access.auth_tool.status.\' + authTool.cardStatus | translate}}</div><div><span eb-msg="db.settings.access.auth_tool.label.sms.date"></span>&nbsp;{{authTool.lastAuthenticationTry | date: \'dd.MM.yyyy, HH:mm:ss\'}}</div></div><div ng-switch-when="TOKEN"></div></div></div>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgAccessLimits/dbStgAccessLimits.html",'<div eb-themable><div eb-responsive-row class="access-maintenance" label="db.settings.access.label.limits" ng-show="limitsPromise.$$state.status === 1"><div ng-repeat="limit in limits"><div ng-hide="limit.symbol==\'MAX_ELIXIR_AMOUNT\'"><span class="access-limits" eb-msg="{{\'db.settings.access.limits.label.name.\' + limit.symbol | translate}}"></span><eb-amount amount="limit.value.amount" currency="{{limit.value.currencySymbol}}"></eb-amount></div></div></div><div ng-show="limitsPromise.$$state.status !== 1"><eb-preloader eb-promise="limitsPromise" eb-rejected-message="{{::\'db.settings.access.promise.error\' | translate}}" class="eb-preloader-small"></div></div>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgAccessPassword/dbStgAccessPassword.html",'<div eb-themable class="form-body settings-content"><div class="settings-message"><eb-responsive-row><div class="settings-header"><div eb-msg="db.settings.access.change_password.header_first"></div><div eb-msg="db.settings.access.change_password.header_second" prevent-orphans></div><div eb-msg="db.settings.access.change_password.header_third"></div></div><ul class="settings-section-list"><li><span eb-msg="db.settings.access.change_password.must_contain"></span></li><li><span eb-msg="db.settings.access.change_password.identical_symbols" prevent-orphans></span></li><li><span eb-msg="db.settings.access.change_password.asc_desc"></span></li></ul></eb-responsive-row></div><form name="changePassForm" novalidate ng-submit="submit(changePassForm)"><eb-responsive-row label="{{::\'db.settings.access.password.code\' | translate}}" label-for="pw1"><div class="settings-numpad-container"><input id="pw1" name="pw1" class="password-input" ng-model="passData.pw1" ng-required="true" required type="password" placeholder="{{::\'db.settings.access.password.placeholder.code\'|translate}}" maxlength="{{lengthPolicy.maxLength}}" ng-mousedown="clicked[\'pw1\'] = true" ng-mouseup="mouseUp(\'pw1\')" ng-mouseleave="mouseLeave(\'pw1\')"><div class="numpad-icon" ng-click="setNumpadModel(\'pw1\')"><i eb-themable class="eb-icon eb-icon-keybord"></i></div></div><eb-validation-messages eb-name="pw1"><div eb-message-key="password.oldPassword.error.old_password_incorrect"><span eb-msg="db.settings.access.password.validate.code.incorrect"></span></div><div eb-message-key="required"><span eb-msg="db.settings.access.password.validate.code.empty"></span></div></eb-validation-messages></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.access.password.new_code\' | translate}}" label-for="pw2"><div class="settings-numpad-container"><input id="pw2" name="pw2" class="password-input" pw-check="pw2" ng-blur="validatePassword(\'blur\', passData.pw2, \'pw2\')" ng-change="validatePassword(\'change\', passData.pw2, \'pw2\')" ng-model="passData.pw2" ng-required="true" required type="password" ng-pattern="regExpPolicy.regExp" placeholder="{{::\'db.settings.access.password.placeholder.new_code\'|translate}}" maxlength="{{lengthPolicy.maxLength}}" eb-no-repetitions eb-no-increments eb-no-decrements eb-lower-case="smallCaseCharacterPolicy" eb-upper-case="upperCaseCharacterPolicy" eb-digits-only="digitCharacterPolicy" eb-special="specialCharacterPolicy" ng-maxlength="lengthPolicy.maxLength" ng-mousedown="clicked[\'pw2\'] = true" ng-mouseup="mouseUp(\'pw2\')" ng-mouseleave="mouseLeave(\'pw2\')"><div class="numpad-icon" ng-click="setNumpadModel(\'pw2\')"><i eb-themable class="eb-icon eb-icon-keybord"></i></div></div><eb-validation-messages eb-name="pw2"><div eb-message-key="password.newPassword.error.new_password_incorrect"><span eb-msg="db.settings.access.password.validate.new_code.bad"></span></div><div eb-message-key="upper-case"><span eb-msg="db.settings.access.password.validate.pass_no_upper"></span></div><div eb-message-key="lower-case"><span eb-msg="db.settings.access.password.validate.pass_no_small"></span></div><div eb-message-key="special"><span eb-msg="db.settings.access.password.validate.pass_no_special"></span></div><div eb-message-key="digits-only"><span eb-msg="db.settings.access.password.validate.pass_no_digit"></span></div><div eb-message-key="pattern"><span eb-msg="db.settings.access.password.validate.criteria_missed"></span></div><div eb-message-key="no-repetitions"><span eb-msg="db.settings.access.password.validate.repetitions"></span></div><div eb-message-key="no-increments"><span eb-msg="db.settings.access.password.validate.pass_increment_signs"></span></div><div eb-message-key="no-decrements"><span eb-msg="db.settings.access.password.validate.pass_increment_signs"></span></div><div eb-message-key="minlength"><span eb-msg="db.settings.access.password.validate.new_code.short"></span></div><div eb-message-key="maxlength"><span eb-msg="db.settings.access.password.validate.new_code.long"></span></div><div eb-message-key="length"><span eb-msg="db.settings.access.password.validate.pass_bad_length"></span></div><div eb-message-key="required"><span eb-msg="db.settings.access.password.validate.new_code.empty"></span></div><div eb-message-key="criteria"><span eb-msg="db.settings.access.password.validate.new_code.bad"></span></div></eb-validation-messages></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.access.password.new_code_confirm\' | translate}}" label-for="pw3"><div class="settings-numpad-container"><input id="pw3" name="pw3" class="password-input" ng-model="passData.pw3" eb-equal-to-index="changePassForm.pw2.$viewValue" maxlength="{{lengthPolicy.maxLength}}" ng-required="true" ng-maxlength="lengthPolicy.maxLength" ng-blur="validateRepeatedPassword()" required type="password" placeholder="{{::\'db.settings.access.password.placeholder.retyped_code\'|translate}}" ng-mousedown="clicked[\'pw3\'] = true" ng-mouseup="mouseUp(\'pw3\')" ng-mouseleave="mouseLeave(\'pw3\')"><div class="numpad-icon" ng-click="setNumpadModel(\'pw3\')"><i eb-themable class="eb-icon eb-icon-keybord"></i></div></div><eb-validation-messages eb-name="pw3"><div eb-message-key="equal-to"><span eb-msg="db.settings.access.password.validate.pass_mismatch"></span></div><div eb-message-key="required"><span eb-msg="db.settings.access.password.validate.repeated_new_code.required"></span></div></eb-validation-messages></eb-responsive-row><eb-action-footer submit-label="{{::\'db.settings.access.password.submit\' | translate}}" submit-icon="eb-icon-settings-info"></eb-action-footer></form><eb-numpad eb-form="changePassForm" eb-num-input-name="{{numpad.name}}" eb-show-numpad="numpad.show" eb-maxlength="{{lengthPolicy.maxLength}}" eb-caret-position="numpad.caret"></eb-numpad></div>'),
a.put("templates/dbnext-settings/0.0.4/directives/dbStgChannelSelect/dbStgChannelSelect.html",'<ui-select eb-themable search-enabled="false" ng-model="$parent.ngModel" theme="select2" ng-disabled="disabled" on-select="selectChanel($item, $model)"><ui-select-match placeholder="{{placeholder | translate}}"><span eb-msg-var key="db.settings.filter.chanel_select" variable="$select.selected.label"></span></ui-select-match><ui-select-choices class="block-choices" repeat="chanel.value as chanel in userChanelsList"><div><span eb-msg-var key="db.settings.filter.chanel_select" variable="chanel.label"></span></div></ui-select-choices></ui-select>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgFatcaAgreementSelect/dbStgFatcaAgreementSelect.html",'<ui-select eb-themable search-enabled="false" theme="select2" on-select="selectFatcaAgreement($item, $model)" ng-disabled="disabled"><ui-select-match placeholder="{{::placeholder | translate}}">{{$select.selected.value}}</ui-select-match><ui-select-choices class="block-choices" repeat="fatcaAgreement.key as fatcaAgreement in fatcaAgreementBool"><div>{{fatcaAgreement.value}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgFatcaBirthCountrySelect/dbStgFatcaBirthCountrySelect.html",'<ui-select eb-themable search-enabled="false" theme="select2" on-select="selectBirthCountry($item, $model)" ng-disabled="ngDisabled"><ui-select-match placeholder="{{::placeholder | translate}}">{{$select.selected.value}}</ui-select-match><ui-select-choices class="block-choices" repeat="birthCountry.key as birthCountry in birthCountries"><div>{{birthCountry.value}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgFatcaDiffCitizenshipSelect/dbStgFatcaDiffCitizenshipSelect.html",'<div class="select-searchbox"><ui-select eb-themable close-on-select="true" reset-search-input="true" search-enabled="true" theme="select2" on-select="selectDiffCitizenship($item, $model)" ng-disabled="ngDisabled"><ui-select-match placeholder="{{::placeholder | translate}}">{{$select.selected.value}}</ui-select-match><ui-select-choices class="block-choices" repeat="citizenship.key as citizenship in citizenships | filter: $select.search  | orderBy:normalizedName"><div>{{citizenship.value}}</div></ui-select-choices></ui-select></div>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgFatcaRealBeneficiarySelect/dbStgFatcaRealBeneficiarySelect.html",'<ui-select class="eb-sender-select" eb-themable search-enabled="false" theme="select2" on-select="selectRealBeneficiary($item, $model)" ng-disabled="ngDisabled"><ui-select-match placeholder="{{::placeholder | translate}}">{{$select.selected.value}}</ui-select-match><ui-select-choices class="block-choices" repeat="realBeneficiary.key as realBeneficiary in realBeneficiaryBool"><div>{{realBeneficiary.value}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgFatcaTaxCountrySelect/dbStgFatcaTaxCountrySelect.html",'<ui-select eb-themable search-enabled="false" theme="select2" on-select="selectTaxCountry($item, $model)" ng-disabled="ngDisabled"><ui-select-match placeholder="{{::placeholder | translate}}">{{$select.selected.value}}</ui-select-match><ui-select-choices class="block-choices" repeat="taxCountry.key as taxCountry in taxCountries"><div>{{taxCountry.value}}</div></ui-select-choices></ui-select>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgFatcaUsaTaxNoInput/dbStgFatcaUsaTaxNoInput.html",'<input eb-themable type="text" class="usa-tax-no" placeholder="{{::ebPlaceholder | translate}}" maxlength="9">'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgSmsActivaction/dbStgSmsActivaction.html",'<div><span class="sms-activation-text" prevent-orphans>{{\'db.settings.access.sms_activaction.content\' | translate}}</span><div class="sms-activation-link"><a href="javascript:void(0)" ng-click="goToActivationModal()"><span eb-msg="db.settings.access.sms_activaction.link"></span></a></div></div>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgSmsActivactionModal/dbStgSmsActivactionModal.html",'<div class="eb-sms-activation-dialog"><eb-dialog eb-title="{{\'db.settings.access.sms_activaction.modal.title\'|translate}}" eb-icon="" eb-on-close="close()" eb-message=""><div eb-preloader-content promise="customerAuthPromise" ng-show="showForm"><div class="dialog-details-content"><eb-responsive-row center label="{{::\'db.settings.access.sms_activaction.modal.phone\' | translate}}">{{phoneNumber}}</eb-responsive-row><eb-responsive-row center label="">{{\'db.settings.access.sms_activaction.modal.content\' | translate}}</eb-responsive-row></div><form name="smsActivaction" class="form-body eb-autorization-form" novalidate><div eb-authorization eb-model="model" eb-disposition-id="customerId" eb-resource-type="{{auth.resourceType}}" eb-relation="{{auth.relation}}" eb-error-code="{{errorCode}}" eb-text="text" eb-form="smsActivaction" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><eb-action-footer submit-label="db.settings.access.sms_activaction.modal.accept" submit-action="acceptForm(smsActivaction, model)"></eb-action-footer></form></div><div eb-preloader-content promise="acceptPromise" ng-show="!showForm"></div></eb-dialog></div>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgUserOperationFilter/dbStgUserOperationFilter.html",'<div class="db-acc-transaction-filter"><form name="userOperationsFilterForm" novalidate><div><div eb-themable class="list-filter"><div class="transaction-filter-container"><div class="account-filter-padding-detail"><eb-responsive-row label="db.settings.operations.filter.type"><db-stg-user-operation-type-select ng-model="ngModel.typeId" name="typeId" placeholder="{{::\'db.settings.operations.filter.type.placeholder\'|translate}}"></db-stg-user-operation-type-select></eb-responsive-row><eb-responsive-row label="db.settings.operations.filter.chanel"><db-stg-channel-select ng-model="ngModel.channel" name="channel" placeholder="{{::\'db.settings.operations.filter.chanel.placeholder\'|translate}}"></db-stg-channel-select></eb-responsive-row></div><eb-responsive-row center label="db.settings.operations.filter.label.period" class="period-label"><div eb-themable class="date-range"><eb-date-range-select ng-model="ngModel" eb-form="userOperationsFilterForm"></eb-date-range-select></div></eb-responsive-row><div class="account-filter-padding-detail"><eb-action-footer submit-label="db.settings.operations.filter.label.button" submit-action="submitFilter(userOperationsFilterForm)"></eb-action-footer></div></div></div></div></form></div>'),a.put("templates/dbnext-settings/0.0.4/directives/dbStgUserOperationTypeSelect/dbStgUserOperationTypeSelect.html",'<div class="select-searchbox"><ui-select eb-themable search-enabled="true" ng-model="$parent.ngModel" theme="select2" ng-disabled="disabled" on-select="selectUserOperationType($item, $model)"><ui-select-match placeholder="{{(userOperationTypesPromise && userOperationTypesPromise.$$state.status === 0) && (\'platform.component.account_select.placeholder.loading\' | translate) || (placeholder|translate)}}"><span eb-msg-var key="db.settings.operations.user_action_type" variable="$select.selected.typeId"></span></ui-select-match><ui-select-choices class="block-choices" repeat="operation.typeId as operation in userOperationTypesList | filter: {\'name\' :$select.search}"><div><span eb-msg-var key="db.settings.operations.user_action_type" variable="operation.typeId"></span></div></ui-select-choices></ui-select></div>'),a.put("templates/dbnext-settings/0.0.4/elements/menu/settings-menuElementView.html",'<li ng-class="{\'active\': isStateActive(\'de.settings\')}" ng-controller="dbnext.settings.MenuElementController" ui-sref="de.settings.content"><span eb-themable class="eb-icon eb-ico-menu-settings"></span> <span eb-msg="db.settings.left_menu.option.title"></span></li>'),a.put("templates/dbnext-settings/0.0.4/views/accessMaintenance.html",'<div eb-themable><div class="inner-form-padding center-form"><eb-section-header eb-header="db.settings.access.label.header" back-state="de.settings.content"></eb-section-header><div class="details-body"><db-stg-access-limits></db-stg-access-limits><eb-responsive-row class="access-maintenance" label="db.settings.access.label.auth_tool" ng-show="authTool.cardStatus == \'RTOP\'"><db-stg-access-auth-tool eb-auth-tool="authTool"></db-stg-access-auth-tool></eb-responsive-row><eb-responsive-row class="access-maintenance" label="db.settings.access.label.sms_activaction" ng-show="authTool.method && authTool.method != \'SMS\' && authTool.cardStatus == \'RTOP\'"><db-stg-sms-activaction eb-auth-tool="authTool" eb-activation="getCardInfo()"></db-stg-sms-activaction></eb-responsive-row></div></div></div>'),a.put("templates/dbnext-settings/0.0.4/views/changePassword.html",'<div eb-themable><div class="inner-form-padding center-form"><eb-section-header eb-header="db.settings.change_password.label.header" eb-description="{{::\'db.settings.change_password.header.change_password\' | translate}}" back-state="de.settings.content"></eb-section-header><db-stg-access-password></db-stg-access-password><div ng-show="authToolPromise.$$state.status !== 1"><eb-preloader eb-promise="authToolPromise" eb-rejected-message="{{::\'db.settings.access.promise.error\' | translate}}" class="eb-preloader-small"></eb-preloader></div></div></div>'),a.put("templates/dbnext-settings/0.0.4/views/defaultAccount.html",'<div eb-themable><div class="inner-form-padding center-form"><eb-section-header eb-header="db.settings.default_account.header.label" back-state="de.settings.content"></eb-section-header><div class="details-body my-data"><!-- <div ng-if="myDataPromise.$$state.status === 1"> --><!-- </div> --></div><div class="form-body"><form name="configureDefaultAccountForm" novalidate><eb-responsive-row label="db.settings.default_account.label.default_account"><div eb-account-select name="defaultAccountContractId" ng-model="formData.formModel.defaultAccountContractId" ng-required="true" placeholder="{{::\'db.payments.new.step1.row.account_select.placeholder\'|translate}}"></div><div eb-validation-messages eb-name="defaultAccountContractId"><div eb-message-key="same"><span eb-msg="db.settings.default_account.validation.same"></span></div></div></eb-responsive-row><eb-action-footer submit-label="db.settings.default_account.label.submit_label" submit-action="submit(configureDefaultAccountForm)"></eb-action-footer></form></div></div></div>'),a.put("templates/dbnext-settings/0.0.4/views/editFatcaForm.html",'<div eb-themable><div class="inner-form-padding center-form"><eb-section-header eb-header="db.settings.fatca.header.label" back-state="de.settings.data"></eb-section-header><form name="editFatca" novalidate ng-if="fatcaDataProperties"><div class="eb-dbnext-theme form-body" ng-if="fatcaDataProperties" style="padding-bottom: 40px"><div class="fatca-agreement"><div ng-repeat="text in agreementText" ng-bind-html="text" prevent-orphans></div></div><eb-responsive-row center label="{{::\'db.settings.fatca.agreement_select.label\' | translate}}"><db-stg-fatca-agreement-select name="agreementSelect" ng-model="fatcaData.agreement" eb-properties="fatcaDataProperties.usperson" placeholder="db.settings.fatca.agreement_select.placeholder" ng-required="true"></db-stg-fatca-agreement-select><eb-validation-messages eb-name="agreementSelect"><div eb-message-key="required"><span eb-msg="db.settings.fatca.agreement_select.validate"></span></div></eb-validation-messages></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.diff_citizenship.label\' | translate}}"><db-stg-fatca-diff-citizenship-select name="citizenshipSelect" ng-model="fatcaData.citizenship" eb-properties="fatcaDataProperties.obywatelstwo_2" placeholder="db.settings.fatca.diff_citizenship.placeholder" ng-required="isRequired" ng-disabled="isDisabledEditFATCA"></db-stg-fatca-diff-citizenship-select><eb-validation-messages eb-name="citizenshipSelect"><div eb-message-key="required"><span eb-msg="db.settings.fatca.diff_citizenship.validate"></span></div></eb-validation-messages></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.birth_country.label\' | translate}}"><db-stg-fatca-birth-country-select name="birthCountrySelect" ng-model="fatcaData.birth_country" eb-properties="fatcaDataProperties.kraj_URODZENIA" placeholder="db.settings.fatca.birth_country.placeholder" ng-required="isRequired" ng-disabled="isDisabledEditFATCA"></db-stg-fatca-birth-country-select><eb-validation-messages eb-name="birthCountrySelect"><div eb-message-key="required"><span eb-msg="db.settings.fatca.birth_country.validate"></span></div></eb-validation-messages></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.tax_country.label\' | translate}}" center><db-stg-fatca-tax-country-select name="taxCountrySelect" ng-model="fatcaData.tax_country" eb-properties="fatcaDataProperties.kraj_REZ_POD" placeholder="db.settings.fatca.tax_country.placeholder" ng-required="isRequired" ng-disabled="isDisabledEditFATCA"></db-stg-fatca-tax-country-select><eb-validation-messages eb-name="taxCountrySelect"><div eb-message-key="required"><span eb-msg="db.settings.fatca.tax_country.validate"></span></div></eb-validation-messages></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.real_beneficiary.label\' | translate}}"><db-stg-fatca-real-beneficiary-select name="realBeneficiarySelect" ng-model="fatcaData.real_beneficiary" eb-properties="fatcaDataProperties.beneficjent_FATCA" placeholder="db.settings.fatca.real_beneficiary.placeholder" ng-required="isRequired" ng-disabled="isDisabledEditFATCA"></db-stg-fatca-real-beneficiary-select><eb-validation-messages eb-name="realBeneficiarySelect"><div eb-message-key="required"><span eb-msg="db.settings.fatca.real_beneficiary.validate"></span></div></eb-validation-messages></eb-responsive-row><eb-responsive-row class="fatca-usa-tax-no-icon" label="{{::\'db.settings.fatca.usa_tax_no.label\' | translate}}" tooltip-values="tooltip" center><db-stg-fatca-usa-tax-no-input name="usaTaxNoInput" ng-model="fatcaData.usa_tax_no" eb-placeholder="db.settings.fatca.usa_tax_no.placeholder" ng-required="false" ng-disabled="isDisabledEditFATCA"></db-stg-fatca-usa-tax-no-input><eb-validation-messages eb-name="usaTaxNoInput"><div eb-message-key="required"><span eb-msg="db.settings.fatca.usa_tax_no.validate"></span></div><div eb-message-key="fatca_data.tin.validation.tin.wrong.format"><span eb-msg="db.settings.fatca.usa_tax_no.wrong_format"></span></div></eb-validation-messages></eb-responsive-row></div><div class="shaded-section"><eb-action-footer submit-label="db.settings.fatca.action_footer.confirm.action" submit-action="submit(editFatca)"></eb-action-footer></div></form><div ng-show="fatcaDataPropertiesPromise.$$state.status !== 1"><eb-preloader class="eb-preloader-default" eb-promise="fatcaDataPropertiesPromise" eb-rejected-message="{{::\'db.settings.fatca.error.validate\' | translate}}"></eb-preloader></div></div></div>'),a.put("templates/dbnext-settings/0.0.4/views/editFatcaFormAccept.html",'<div eb-themable><div class="inner-form-padding center-form"><eb-section-header eb-header="db.settings.fatca.header.label" back-state="de.settings.fatca"></eb-section-header><div class="eb-dbnext-theme form-body"><eb-responsive-row top label="{{::\'db.settings.fatca.agreement_select.label\' | translate}}"><span>{{fatcaData.agreement.value}}</span></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.diff_citizenship.label\' | translate}}"><span>{{fatcaData.citizenship.value}}</span></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.birth_country.label\' | translate}}"><span>{{fatcaData.birth_country.value}}</span></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.tax_country.label\' | translate}}"><span>{{fatcaData.tax_country.value}}</span></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.real_beneficiary.label\' | translate}}"><span>{{fatcaData.real_beneficiary.value}}</span></eb-responsive-row><eb-responsive-row label="{{::\'db.settings.fatca.usa_tax_no.label\' | translate}}"><span>{{fatcaData.usa_tax_no}}</span></eb-responsive-row></div><div class="shaded-section"><form name="authForm" novalidate><div eb-authorization eb-model="auth" eb-disposition-id="customerId" eb-resource-type="customer" eb-relation="accept_fatca_data_modification" eb-error-code="{{errorCode}}" eb-text="text" eb-form="authForm" is-shown="isAuthorization" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><div eb-action-footer cancel-label="db.settings.fatca.action_footer.confirm.cancel_label" submit-label="db.settings.fatca.action_footer.confirm.action" cancel-action="change()" submit-action="accept(authForm)"></div></form></div></div></div>'),a.put("templates/dbnext-settings/0.0.4/views/myData.html",'<div eb-themable><div class="inner-form-padding center-form"><eb-section-header eb-header="db.settings.data.header.label" back-state="de.settings.content"></eb-section-header><div class="details-body my-data"><div ng-if="myDataPromise.$$state.status === 1"><eb-responsive-row label="db.settings.data.label.name"><span>{{myData.firstName}}&nbsp;{{myData.lastName | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.social_security_no"><span>{{myData.personalIdentificationNumber | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.nip"><span>{{myData.nip | authIdFilter | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.idcard_no"><span>{{myData.documentNumber | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.domicile_address"><span ng-show="myData.domicileStreetAddress">{{myData.domicileStreetAddress}}&nbsp;</span> <span ng-show="myData.domicilePostalCode">{{myData.domicilePostalCode}}&nbsp;</span> <span ng-show="myData.domicileCity">{{myData.domicileCity}}</span> <span ng-hide="myData.domicileStreetAddress || myData.domicilePostalCode || myData.domicileCity">{{\'\' | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.correspondence_address"><span ng-show="myData.correspondenceStreetAddress">{{myData.correspondenceStreetAddress}}&nbsp;</span> <span ng-show="myData.correspondencePostalCode">{{myData.correspondencePostalCode}}&nbsp;</span> <span ng-show="myData.correspondenceCity">{{myData.correspondenceCity}}</span> <span ng-hide="myData.correspondenceStreetAddress || myData.correspondencePostalCode || myData.correspondenceCity">{{\'\' | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.email"><span>{{myData.emailAddress | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.login"><span>{{myData.login | loginFilter}}</span></eb-responsive-row></div><eb-preloader eb-promise="myDataPromise" class="eb-preloader-default" eb-rejected-message="{{::\'db.settings.data.error.validate\'|translate}}"></eb-preloader><div class="shaded-data" ng-if="fatcaDataPromise.$$state.status === 1"><eb-responsive-row class="small"><div class="edit-link"><a href="javascript:void(0)" ng-click="goTo(\'de.settings.fatca\')"><span eb-msg="db.settings.data.label.edit_data"></span></a></div></eb-responsive-row><eb-responsive-row class="no-border" label="db.settings.data.label.fatca_agreement"><span>{{myData.fatcaDataPermission | emptyFilter}}</span><div class="edit-link large"><a href="javascript:void(0)" ng-click="goTo(\'de.settings.fatca\')"><span eb-msg="db.settings.data.label.edit_data"></span></a></div></eb-responsive-row><eb-responsive-row label="db.settings.data.label.diff_citizenship"><span>{{myData.secondCitizenship | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.birth_country"><span>{{myData.countryOfBirth | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.tax_country"><span>{{myData.taxCountry | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.real_beneficiary"><span>{{myData.fatcaBeneficiary | emptyFilter}}</span></eb-responsive-row><eb-responsive-row label="db.settings.data.label.usa_tax_no"><span>{{myData.socialSecurityNumber | emptyFilter}}</span></eb-responsive-row></div><eb-preloader eb-promise="fatcaDataPromise" class="eb-preloader-default" eb-rejected-message="{{::\'db.settings.data.error.validate\'|translate}}"></eb-preloader></div></div></div>'),a.put("templates/dbnext-settings/0.0.4/views/settingsContent.html",'<a ui-sref="de.settings.changePassword"><div eb-list-item class="settings-row">{{\'db.settings.change_password\' | translate}}</div></a> <a ui-sref="de.settings.access"><div eb-list-item class="settings-row">{{\'db.settings.access\' | translate}}</div></a> <a ui-sref="de.settings.data"><div eb-list-item class="settings-row">{{\'db.settings.data\' | translate}}</div></a> <a ui-sref="de.settings.operations"><div eb-list-item class="settings-row">{{\'db.settings.operations\' | translate}}</div></a><!-- <a ui-sref="de.settings.default_account">\n\t<div eb-list-item class="settings-row">\n        {{\'db.settings.default_account\' | translate}}\n\t</div>\n</a> -->'),a.put("templates/dbnext-settings/0.0.4/views/settingsView.html",'<eb-full-screen-widget miniapp-name="settings"><div class="settings"><eb-screen-content><div ui-view autoscroll="true"></div></eb-screen-content></div></eb-full-screen-widget>'),a.put("templates/dbnext-settings/0.0.4/views/userOperations.html",'<div eb-themable><eb-section-header eb-header="db.settings.operations.label.header" back-state="de.settings.content"></eb-section-header><div class="eb-filter-header-container"><div class="row eb-filter-header"><span eb-container class="padding small"><div class="col-xs-6 col-md-6 text-left eb-filter-clean"><span ng-show="showClearFilter" ng-click="clearFilter()" style="cursor: pointer" eb-msg="transaction.filter.label.clear"></span></div><div class="col-xs-6 col-md-6 text-right eb-filter-switch" ng-class="{\'pull-right\': !showFilter}"><div ng-click="showFilterWindow()" style="cursor: pointer"><i eb-themable class="eb-icon" style="font-size: 1.3em" ng-class="{\'eb-ico-filter-applied\': showFilter == true , \'eb-ico-filter-show\': showFilter == false}"></i> <span ng-if="showFilter" class="link" eb-msg="transaction.filter.label.hide"></span> <span ng-if="!showFilter" class="link" eb-msg="transaction.filter.label.show"></span></div></div></span></div></div><div ng-show="showFilter"><db-stg-user-operation-filter ng-model="filterParams" context="userOperationList" callback="submit(ctx, params)"></db-stg-user-operation-filter></div><eb-list id="userOperationsListId" class="statement-based-list" ng-class="{\'filter-displayed\':showFilter}" eb-promise="userOperationsPromise"><eb-list-item class="row" ng-repeat="operation in userOperationList.content | filter:searchFilter"><eb-list-item-content class="item-content-with-actions"><div class="title-cell cell_1_in_2"><div style="display: inline-block">{{operation.trailDate | date : \'dd.MM.yyyy HH:mm:ss\' }}</div></div><!-- no whitespace fix--><div class="info-cell cell_2_in_2"><span eb-msg-var key="db.settings.operations.user_action_type" variable="operation.message"></span></div></eb-list-item-content></eb-list-item><div class="miniapp-empty-list" ng-if="userOperationList.content.length == 0">{{::"db.settings.operations.empty_list"|translate}}</div><div class="miniapp-empty-list" ng-if="userOperationList.length == 0">{{::"db.settings.operations.list_data_error"|translate}}</div></eb-list><div ng-show="userOperationsPromise.$$state.status === 1"><eb-pagination eb-data="userOperationList" eb-params="filterParams" eb-loading="loading" eb-pagination-count="5" scroll-to="userOperationsListId" callback="submit(ctx, params, rel)"></eb-pagination></div></div>')}]);