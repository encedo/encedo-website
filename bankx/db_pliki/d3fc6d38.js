var dbnextCartModule=angular.module("dbnext-cart",["ebanking-shared"]).config(["translationsLoaderProvider","$urlRouterProvider","miniappServiceProvider","pathServiceProvider","stateServiceProvider","guiProvider",function(a,b,c,d,e,f){var g="de",h="dbnext",i="cart",j=h+"."+i,k=h+"-"+i,l=g+"."+i;a.addTranslationsPath(d.generateRootPath(k)+"/i18n/messages_{{language}}.json"),webComponentRegistry[k].simpleName=i,webComponentRegistry[k].startState=l+".content",f.registerElement(k,"header"),e.state(g,{url:"/"+g,"abstract":!0,template:"<div ui-view></div>"}).state(l+"",{url:"/"+i,"abstract":!0,templateUrl:d.generateTemplatePath(k)+"/views/cartView.html",controller:j+".ViewController"}).state(l+".content",{url:"/content",templateUrl:d.generateTemplatePath(k)+"/views/cartContent.html",controller:j+".ContentController"}).state(l+".accept",{url:"/:dispositionId/accept/:acceptType",templateUrl:d.generateTemplatePath(k)+"/views/cartAccept.html",controller:j+".AcceptController",previous:[l+".content"]})}]).run(function(){});dbnextCartModule.controller("dbnext.cart.AcceptController",["$rootScope","$scope","$state","viewStateService","cartService","cartItemAuthService","accountsService","notificationService","formService","cartCountService","httpService","language","events",function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.cartDetails=null,b.cartItemAuthId=c.params.dispositionId,b.acceptType=c.params.acceptType,b.getTypeSuffix=function(a){return"STANDING_ORDER"==a.type?a.type+(a.details.cyclic===!1?".TRANSFER":"")+(a.details.transferType?"."+a.details.transferType:""):(a.type?a.type:"")+(a.details.type?"."+a.details.type:"")},b.cartDetailsPromise=f.get(parseInt(c.params.dispositionId),{language:l.get()}).then(function(c){c.content&&(b.cartDetails=c.content[0],b.cartDetailsPromise=g.search().then(function(c){angular.forEach(b.cartDetails.items,function(b){var d=a.getObjectFromListBy("accountNo",b.details.accountNo,c.content);d&&d.customerProductData&&(b.details.accountCustomName=d.customerProductData.customName)})}))}),b.auth={},b.accept=function(a){return angular.element(document.querySelector(":focus")).triggerHandler("blur"),a.$valid?(b.errorCode=null,e.action({authenticationAttemptId:b.auth.authenticationAttemptId,credentials:b.auth.credentials,cartDispositionId:c.params.dispositionId},b.acceptType,b.cartDetails).then(function(a){d.resetAllStates(),m.broadcast("payments.transferStatusChange");var c=b.cartDetails.items.length>1?"db.cart.accept.confirmation.confirmation_text.plural.":"db.cart.accept.confirmation.confirmation_text.";h.showBasketItemAcceptedDialog({text:{createNewLabel:"db.cart.accept.confirmation.create_new",confirmation:c+b.acceptType},state:{dashboard:"de.dashboard",createNewState:"de.cart.content"}})},function(a){b.errorCode=a.text})):void i.dirtyFields(a)},b.change=function(){c.go("de.cart.content")}}]),dbnextCartModule.controller("dbnext.cart.ContentController",["$rootScope","$scope","$state","$filter","$timeout","cartFilterCriteria","viewStateService","formService","cartService","cartItemAuthService","translate","accountsService","events","searchWrapperService","cartCountService","language","paymentsService","dispositionModelService","paymentModificationsService","paymentCancellationsService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.filterParams=g.getInitialState(c.current.name)?g.getFormData("cartFilterParams"):null,null==b.filterParams&&(b.filterParams=f.getCartFilterInitValues(),b.filterParams.language=p.get()),null==g.getInitialState(c.current.name)&&g.setInitialState(c.current.name,{}),b.cartList=null,b.cartListPromise=i.search(b.filterParams).then(function(a){u(a)});var u=function(d){b.cartList=d,b.cartListPromise=l.search().then(function(c){angular.forEach(b.cartList.content,function(b){var d=a.getObjectFromListBy("accountNo",b.details.accountNo,c.content);d&&d.customerProductData&&(b.details.accountCustomName=d.customerProductData.customName)})}),b.filterParams.pageNumber=d.pageNumber,b.filterParams.pageSize=d.pageSize,g.setInitialState(c.current.name,{}),g.appendFormData("cartFilterParams",b.filterParams),o.refreshCartItemsCount(),b.refreshAllSelected()};b.submit=function(a,c,d){if(angular.isDefined(a))return b.cartForm&&h.removeNotRequiredValidityRules(b.cartForm),b.loading=!0,c.language=p.get(),b.cartListPromise=i.relationSearch(a,c,d).then(function(a){b.selectedItemsList.model=[],b.refreshAllSelected(),u(a),b.loading=!1}),b.cartListPromise},b.acceptGroup=function(){if(b.anySelected)return h.removeNotRequiredValidityRules(b.cartForm),i.action({dispositionIds:b.selectedItemsList.model},"create_accept_cart_disp").then(function(a){g.setInitialState(c.current.name,{}),g.appendFormData("cartForm",b.selectedItemsList.model),c.go("de.cart.accept",{dispositionId:a.content,acceptType:"realize"})},function(){b.cartForm.$setDirty()})},b.cancelGroup=function(){if(b.anySelected)return h.removeNotRequiredValidityRules(b.cartForm),i.action({dispositionIds:b.selectedItemsList.model},"create_cancel_cart_disp").then(function(a){g.setInitialState(c.current.name,{}),g.appendFormData("cartForm",b.selectedItemsList.model),c.go("de.cart.accept",{dispositionId:a.content,acceptType:"accept_cancel_cart_disp"})},function(){b.cartForm.$setDirty()})},b.selectedItemsList={model:g.getInitialState(c.current.name)?g.getFormData("cartForm")||[]:[]},b.allSelected=!1,b.refreshAllSelected=function(){h.removeNotRequiredValidityRules(b.cartForm),b.allSelected=b.selectedItemsList.model.length==b.cartList.content.length,b.anySelected=b.selectedItemsList.model.length>0},b.selectAll=function(){var a=b.selectedItemsList.model.length==b.cartList.content.length;b.allSelected?b.selectedItemsList.model=[]:(b.selectedItemsList.model=[],angular.forEach(b.cartList.content,function(a){b.selectedItemsList.model.push(a.id)})),b.allSelected=!a,b.anySelected=b.selectedItemsList.model.length>0},b.getTypeSuffix=function(a){return"STANDING_ORDER"==a.type?a.type+(a.details.cyclic===!1?".TRANSFER":"")+(a.details.transferType?"."+a.details.transferType:""):(a.type?a.type:"")+(a.details.delayed?".DELAYED":"")+(a.details.type?"."+a.details.type:"")},b.showFilter=!1,b.showClearFilter=!1,b.showFilterWindow=function(){b.showFilter=!b.showFilter},b.clearFilter=function(){b.filterParams=f.getCartFilterInitValues(),b.filterParams.isClearing=!0,b.showClearFilter=!1};var v=function(a){for(var b=angular.copy(a),c=0;c<a.length;c++)a[c]instanceof Date&&(b[c]=d("date")(a[c],"yyyy-MM-dd"));return b},w=f.getCartFilterInitValues();w=[w.dateFrom,w.dateTo,w.periodCount,w.periodDefinitionType],b.$watchGroup(["filterParams.dateFrom","filterParams.dateTo","filterParams.periodCount","filterParams.periodDefinitionType"],function(a,c){b.filterParams.isClearing=!1,b.showClearFilter=JSON.stringify(v(a))!==JSON.stringify(w)},!0),b.prepareDetails=function(a){"STANDING_ORDER"==a.type&&"MODIFY"==a.details.dispositionType?s.get(a.id).then(function(a){g.resetInitialState("de.payments.content.details"),g.setInitialState("de.payments.content.details",{id:a.paymentId,backState:c.current.name,modificationDisposition:a,fromCart:!0}),c.go("de.payments.content.details")}):"STANDING_ORDER"==a.type&&"BREAK"==a.details.dispositionType?t.get(a.id).then(function(a){g.resetInitialState("de.payments.content.details"),g.setInitialState("de.payments.content.details",{id:a.paymentId,backState:c.current.name,fromCart:!0}),c.go("de.payments.content.details")}):(a.backState=c.current.name,a.fromCart=!0,g.resetInitialState("de.payments.content.details"),g.setInitialState("de.payments.content.details",a),c.go("de.payments.content.details"))},b.prepareCancel=function(a){var b=a.details.transferType||a.details.type||a.type;a.cancel=!0,a.backState=c.current.name,a.headerTitleKey="de.cart.payments.single.cancel","MODIFY"==a.details.dispositionType?s.get(a.id).then(function(d){g.resetInitialState("de.payments.acceptModify"),a.paymentId=d.paymentId,g.setInitialState("de.payments.acceptModify",a),c.go("de.payments.acceptModify."+b.toLowerCase(),{modificationDispositionId:a.id})}):"BREAK"==a.details.dispositionType?t.get(a.id).then(function(b){var d="de.payments.cancel";g.resetInitialState(d),a.paymentId=b.paymentId,g.setInitialState(d,a),c.go(d)}):(g.resetInitialState("de.payments.accept"),g.setInitialState("de.payments.accept",a),c.go("de.payments.accept."+b.toLowerCase(),{dispositionId:a.id}))},b.prepareAccept=function(a){var b=a.details.transferType||a.details.type||a.type;a.fromCart=!0,a.backState=c.current.name,"MODIFY"==a.details.dispositionType?s.get(a.id).then(function(d){g.resetInitialState("de.payments.acceptModify"),a.paymentId=d.paymentId,g.setInitialState("de.payments.acceptModify",a),c.go("de.payments.acceptModify."+b.toLowerCase(),{modificationDispositionId:a.id})}):"BREAK"==a.details.dispositionType?t.get(a.id).then(function(b){var d="de.payments.cancel";g.resetInitialState(d),a.paymentId=b.paymentId,g.setInitialState(d,a),c.go(d)}):(g.resetInitialState("de.payments.accept"),g.setInitialState("de.payments.accept",a),c.go("de.payments.accept."+b.toLowerCase(),{dispositionId:a.id}))}}]),dbnextCartModule.controller("dbnext.cart.ViewController",["$scope",function(a){}]),dbnextCartModule.directive("dbCrtFilter",["$compile","ebTheming","commonService","$rootScope","$timeout","$log","$http","$templateCache","pathService","$location","$state","$filter","$window","$anchorScroll",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",context:"=",callback:"&"},templateUrl:i.generateTemplatePath("dbnext-cart")+"/directives/dbCrtFilter/dbCrtFilter.html",link:function(a,c,d){b.applyTheme(c),a.submitFilter=function(b){if(angular.element(document.querySelector(":focus")).triggerHandler("blur"),b.$valid)return a.ngModel.pageNumber=1,a.callback({ctx:a.context,params:a.ngModel})}}}}]),dbnextCartModule.controller("dbnext.cart.IconController",["$scope","$state","events","cartCountService","viewStateService",function(a,b,c,d,e){d.refreshCartItemsCount(),a.goTo=function(){"de.cart.content"==b.current.name?b.reload():(e.resetInitialState("de.cart.content"),b.go("de.cart.content"))},c.listener(a,"cartModule.cartItemsCountUpdate",function(b,c){a.itemsCount=c,a.style=f()}),c.listener(a,"payments.transferStatusChange",function(){d.refreshCartItemsCount()});var f=function(){var b=8*a.itemsCount.toString().length+10;return{buttonStyle:{"min-width":b+12+"px"},itemsStyle:{width:b+"px !important"},titleStyle:{"padding-left":b-12+"px"}}}}]),dbnextCartModule.filter("recipientDataFilter",function(){var a=function(a){return"INSURANCE"==a||"TAX"==a},b=function(a){return 35==a.length?"":" "};return function(c,d){if(angular.isDefined(c)&&null!==c&&angular.isDefined(d)&&null!==d&&!a(d)){var e="",f=c.indexOf("");f<0&&(f=c.length);for(var g=0;g<f;g++)e+=c[g],e+=b(c[g]);return e}return c}}),dbnextCartModule.service("dbCartCountService",["events","cartService","$interval",function(a,b,c){var d=0,e=function(){b.searchSummary().then(function(b){a.broadcast("cartModule.cartItemsCountUpdate"),null!=b&&(a.broadcast("cartModule.cartItemsCountUpdate",{itemsCount:b.itemsCount}),b.itemsCount>0&&d!=b.itemsCount&&a.broadcast("eb.dashboard.headerUpdate"),d=b.itemsCount)})};return{refreshCartItemsCount:e}}]),dbnextCartModule.value("cartProtectedValidationRules",["ebSwift","ebSwiftFormat","complementaryValid","declarationValid","declarationNoValid","nipValid","format","minAmount"]),angular.module("dbnext-cart").run(["$templateCache",function(a){a.put("templates/dbnext-cart/0.0.8/directives/dbCrtFilter/dbCrtFilter.html",'<div class="eb-transaction-filter" ng-cloak><form name="filterForm" novalidate><div><div eb-themable class="list-filter"><div class="transaction-filter-container" style="margin-right: auto"><eb-responsive-row label="transaction.filter.label.period" class="period-label"><div eb-themable class="date-range"><eb-date-range-select ng-model="ngModel" eb-form="filterForm"></eb-date-range-select></div></eb-responsive-row><div class="account-filter-padding-detail"><eb-action-footer submit-label="transaction.filter.label.button" submit-action="submitFilter(filterForm)"></eb-action-footer></div></div></div></div></form></div>'),a.put("templates/dbnext-cart/0.0.8/elements/header/cart-headerElementView.html",'<span ng-controller="dbnext.cart.IconController" ng-click="goTo()"><eb-button ng-click="goTo()" class="db-ntf-header-icon" ng-style="style.buttonStyle"><i eb-themable class="eb-icon eb-ico-basket"></i> <span ng-hide="!(itemsCount > 0)" class="cart-items-count" ng-style="style.itemsStyle" ng-bind="itemsCount"></span> <span class="header-item-title" ng-style="style.titleStyle" eb-msg="db.cart.header.option.title"></span></eb-button></span>'),a.put("templates/dbnext-cart/0.0.8/views/cartAccept.html",'<div eb-content-navigation></div><div style="position:relative"><div class="inner-form-padding center-form"><div eb-themable><eb-section-header eb-header="{{\'db.cart.accept.header.\' + acceptType}}" back-state="de.cart.content"></eb-section-header><div ng-show="cartDetailsPromise.$$state.status === 1"><eb-list class="cart-content cart-accept time-based-list"><div eb-list-item class="row" ng-repeat="disposition in cartDetails.items" ng-class="{\'error\': cartForm[disposition.id].$invalid}"><eb-list-item-content class="item-content-without-actions"><div class="date-cell cell_1_in_3"><span ng-bind="(disposition.details.createDate | date : \'dd.MM.yyyy\' | emptyFilter)"></span></div><!-- no whitespace fix\n                             --><div class="amount-property-cell cell_3_in_3"><eb-amount amount="disposition.details.amount" currency="{{disposition.details.currency}}"></eb-amount></div><!-- no whitespace fix\n                             --><div ng-switch="disposition.details.type || disposition.details.transferType" class="description-property-cell cell_2_in_3"><div ng-switch-when="TAX"><div class="collapsed-recipient-name" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div ng-repeat="oneLineRecipientName in disposition.details.recipientData | limitTo: 1" ng-class="{\'expanded-more\' : disposition.isCollapsed && $index > 0}"><span ng-bind="oneLineRecipientName"></span></div></div><div class="collapsed-description" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div ng-switch="disposition.details.dispositionType"><div ng-switch-default><div><span ng-bind="disposition.details.title[1]"></span></div><div ng-class="{\'expanded-more\' : disposition.isCollapsed}"><div><span ng-bind="(disposition.details.title[0] | limitTo : 4)"></span> <span ng-if="disposition.details.title[0].length == 5" ng-bind="(\'/\' + disposition.details.title[0] | limitTo : -1)"></span> <span ng-if="disposition.details.title[0].length == 7" ng-bind="(\'/\' + disposition.details.title[0] | limitTo : -3 | limitTo : 1 + \' nr \' + disposition.details.title[0] | limitTo : -2)"></span> <span ng-if="disposition.details.title[0].length == 9" ng-bind="(\'/\' + disposition.details.title[0] | limitTo : -5 | limitTo : 1 + \' nr \' + disposition.details.title[0] | limitTo : -4)"></span></div><div ng-if="disposition.details.obligationId"><span ng-bind="disposition.details.obligationId"></span></div></div></div></div></div></div><div ng-switch-when="INSURANCE"><div class="collapsed-recipient-name" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div ng-repeat="oneLineRecipientName in disposition.details.recipientData track by $index" ng-class="{\'expanded-more\' : disposition.isCollapsed && $index > 0}"><span ng-bind="oneLineRecipientName"></span></div></div><div class="collapsed-description" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div><span ng-bind="(\'db.cart.payments.content.list.insurance_type.\' + (disposition.details.recipientAccountNo | limitTo : -6) | translate)"></span></div><div ng-class="{\'expanded-more\' : disposition.isCollapsed}"><div><span ng-if="disposition.details.title[2]" ng-bind="(disposition.details.title[2] | limitTo: 2 + \'/\' + disposition.details.title[2] | limitTo: -4)"></span> <span ng-if="disposition.details.title[3]" ng-bind="(\'nr\' + disposition.details.title[3])"></span></div><div><span ng-bind="(disposition.details.title[1] + \' - \')"></span> <span ng-bind="(\'db.cart.payments.content.list.payment_type.\' + disposition.details.title[1] | translate)"></span></div></div></div></div><div ng-switch-default><div class="collapsed-recipient-name" ng-class="{\'expanded\' : !disposition.isCollapsed}"><span ng-bind="::disposition.details.recipientData | recipientDataFilter: (disposition.details.type || disposition.details.transferType)"></span></div><div class="collapsed-description" ng-class="{\'expanded\' : !disposition.isCollapsed}"><span ng-repeat="title in disposition.details.title track by $index"><span ng-bind="title"></span></span></div></div></div></eb-list-item-content><eb-collapse is-collapsed="disposition.isCollapsed"><eb-list-details><eb-list-details-item key="db.cart.content.type"><span eb-msg="{{\'db.cart.content.type.\' + getTypeSuffix(disposition)}}"></span> <span ng-if="disposition.details.dispositionType && disposition.details.dispositionType != \'OPEN\'"><span>-</span> <span ng-bind="(\'db.cart.content.disposition_type.\' + disposition.details.dispositionType | translate)"></span></span></eb-list-details-item><eb-list-details-item key="db.cart.content.sender_account_no" ng-if="disposition.details.accountNo != null"><eb-account-number nrb="{{disposition.details.accountNo}}"></eb-account-number></eb-list-details-item></eb-list-details></eb-collapse></div><div class="miniapp-empty-list" ng-if="(cartList.content | filter:{wrappedText : filterOptions.text}).length == 0"><span eb-msg="db.cart.content.empty"></span></div></eb-list><div class="shaded-section"><form name="authForm" novalidate><div eb-authorization eb-model="auth" eb-disposition-id="cartDetails.cartDispositionId" eb-resource-type="cart_item_auth" eb-relation="{{acceptType}}" eb-error-code="{{errorCode}}" eb-text="text" eb-form="authForm" is-shown="isAuthorization" eb-show-sms-auth-no="true" eb-disabled="false" eb-required="true"></div><div eb-action-footer cancel-label="db.cart.accept.cancel_label" submit-label="db.cart.accept.submit_label" cancel-action="change()" submit-action="accept(authForm)"></div></form></div></div><div eb-preloader eb-promise="cartDetailsPromise" class="eb-preloader-default" eb-rejected-message="{{::\'db.payments.accept.rejected_response\'|translate}}"></div></div></div></div>'),a.put("templates/dbnext-cart/0.0.8/views/cartContent.html",'<div eb-view-swap="viewLoaded" class="ng-hide"><div eb-filter-control show-filter="showFilter" show-clear-filter="showClearFilter" clear-callback="clearFilter()"></div><span ng-show="showFilter"><db-crt-filter ng-model="filterParams" context="cartList" callback="submit(ctx, params)"></db-crt-filter></span><eb-list class="cart-content time-based-list" eb-promise="cartListPromise"><div eb-list-item class="row" ng-repeat="disposition in cartList.content" ng-class="{\'error\': cartForm[disposition.id].$invalid}"><eb-list-item-content class="item-content-with-actions"><div class="date-cell cell_1_in_3"><span class="multiselect-container"><eb-multiselect-checkbox eb-checklist-model="selectedItemsList.model" eb-checklist-value="disposition.id" ng-click="refreshAllSelected()"></eb-multiselect-checkbox></span><span class="create-date" ng-bind="(disposition.details.createDate | date : \'dd.MM.yyyy\' | emptyFilter)"></span></div><!-- no whitespace fix\n                --><div class="actions-cell"><div class="default-desktop-option"><a ng-click="prepareDetails(disposition)"><span eb-msg="db.cart.content.options.details"></span></a></div><div class="options" ng-class="{\'options-hidden-when-desktop\': !( hasLink(disposition, \'cancel_transfer\') || hasLink(disposition, \'cancel_payment_cancellation\') || hasLink(disposition, \'cancel_payment_modification\') )}"><div eb-list-options><li class="option-hidden-when-desktop"><a class="option-row" ng-click="prepareDetails(disposition)"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.payments.templates.list.options.details"></span></a></li><!--                             <li ng-if="hasLink(disposition, \'realize\') || hasLink(disposition, \'accept_payment_cancellation\') || hasLink(disposition, \'accept_payment_modification\')">\n                                <a class="option-row" ng-click="prepareAccept(disposition)" >\n                                    <span eb-themable class="eb-icon eb-ico-widget-payments options-icon"></span>\n                                    <span class="option-label" eb-msg="db.payments.templates.list.options.accept"></span>\n                                </a>\n                            </li> --><li ng-if="hasLink(disposition, \'cancel_transfer\') || hasLink(disposition, \'cancel_payment_cancellation\') || hasLink(disposition, \'cancel_payment_modification\')"><a class="option-row" ng-click="prepareCancel(disposition)"><span eb-themable class="eb-icon eb-ico-close options-icon"></span> <span class="option-label" eb-msg="db.payments.templates.list.options.delete"></span></a></li></div></div></div><!-- no whitespace fix\n             --><div class="amount-property-cell cell_3_in_3"><eb-amount amount="disposition.details.amount" currency="{{disposition.details.currency}}"></eb-amount></div><!-- no whitespace fix\n             --><div ng-switch="disposition.details.type || disposition.details.transferType" class="description-property-cell cell_2_in_3"><div ng-switch-when="TAX"><div class="collapsed-recipient-name" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div ng-repeat="oneLineRecipientName in disposition.details.recipientData | limitTo: 1" ng-class="{\'expanded-more\' : disposition.isCollapsed && $index > 0}"><span ng-bind="oneLineRecipientName"></span></div></div><div class="collapsed-description" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div ng-switch="disposition.details.dispositionType"><div ng-switch-default><div><span ng-bind="disposition.details.title[1]"></span></div><div ng-class="{\'expanded-more\' : disposition.isCollapsed}"><div><span ng-bind="(disposition.details.title[0] | limitTo : 4)"></span><!-- no whitespace fix\n                                         --><span ng-if="disposition.details.title[0].length == 5" ng-bind="(\'/\' + (disposition.details.title[0] | limitTo : -1))"></span><!-- no whitespace fix\n                                         --><span ng-if="disposition.details.title[0].length == 7" ng-bind="(\'/\' + (disposition.details.title[0] | limitTo : -3 | limitTo : 1) + \' nr \' + (disposition.details.title[0] | limitTo : -2))"></span><!-- no whitespace fix\n                                         --><span ng-if="disposition.details.title[0].length == 9" ng-bind="(\'/\' + (disposition.details.title[0] | limitTo : -5 | limitTo : 1) + \' nr \' + (disposition.details.title[0] | limitTo : -4))"></span></div><div ng-if="disposition.details.obligationId"><span ng-bind="disposition.details.obligationId"></span></div></div></div></div></div></div><div ng-switch-when="INSURANCE"><div class="collapsed-recipient-name" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div ng-repeat="oneLineRecipientName in disposition.details.recipientData track by $index" ng-class="{\'expanded-more\' : disposition.isCollapsed && $index > 0}"><span ng-bind="oneLineRecipientName"></span></div></div><div class="collapsed-description" ng-class="{\'expanded\' : !disposition.isCollapsed}"><div><span ng-bind="(\'db.cart.payments.content.list.insurance_type.\' + (disposition.details.recipientAccountNo | limitTo : -6) | translate)"></span></div><div ng-class="{\'expanded-more\' : disposition.isCollapsed}"><div><span ng-if="disposition.details.title[2]" ng-bind="((disposition.details.title[2] | limitTo: 4 | limitTo: -2) + \'/\' + (disposition.details.title[2] | limitTo: -2) + (disposition.details.title[2] | limitTo: 2))"></span> <span ng-if="disposition.details.title[3]" ng-bind="(\' nr \' + disposition.details.title[3])"></span></div><div><span ng-bind="(disposition.details.title[1] + \' - \')"></span> <span ng-bind="(\'db.cart.payments.content.list.payment_type.\' + disposition.details.title[1] | translate)"></span></div></div></div></div><div ng-switch-default><div class="collapsed-recipient-name" ng-class="{\'expanded\' : !disposition.isCollapsed}"><span ng-bind="::disposition.details.recipientData | recipientDataFilter: (disposition.details.type || disposition.details.transferType)"></span></div><div class="collapsed-description" ng-class="{\'expanded\' : !disposition.isCollapsed}"><span ng-repeat="title in disposition.details.title track by $index"><span ng-bind="title"></span></span></div></div></div></eb-list-item-content><eb-collapse is-collapsed="disposition.isCollapsed"><eb-list-details><eb-list-details-item key="db.cart.content.type"><span eb-msg="{{\'db.cart.content.type.\' + getTypeSuffix(disposition)}}"></span> <span ng-if="disposition.details.dispositionType && disposition.details.dispositionType != \'OPEN\'"><span>-</span> <span ng-bind="(\'db.cart.content.disposition_type.\' + disposition.details.dispositionType | translate)"></span></span></eb-list-details-item><eb-list-details-item key="db.cart.content.sender_account_no" ng-if="disposition.details.accountNo != null"><eb-account-number nrb="{{disposition.details.accountNo}}"></eb-account-number></eb-list-details-item></eb-list-details></eb-collapse></div><div class="miniapp-empty-list" ng-if="(cartList.content | filter:{wrappedText : filterOptions.text}).length == 0"><span eb-msg="db.cart.content.empty"></span></div></eb-list><div ng-show="cartListPromise.$$state.status === 1"><eb-pagination eb-data="cartList" eb-params="filterParams" eb-loading="loading" eb-pagination-count="5" scroll-to="cartListId" callback="submit(ctx, params, rel)"></eb-pagination></div><ng-form name="cartForm" class="cart-form"><eb-container class="padding small" ng-show="cartForm.$dirty"><div class="cart-global-message"><input type="hidden" name="globalMessage" ng-model="globalMessage"><eb-validation-messages eb-object-name="cart" eb-name="globalMessage"><div eb-message-key="error.exceeds.available.funds.for.agreement"><span eb-msg="db.cart.global.validation.exceeds_available_funds"></span></div><div eb-message-key="error.exceeds.daily.limit.for.user"><span eb-msg="db.cart.global.validation.exceeds_daily_limit_for_user"></span></div><div eb-message-key="error.exceeds.single.limit.for.user"><span eb-msg="db.cart.global.validation.exceeds_single_limit_for_user"></span></div><div eb-message-key="error.exceeds.daily.limit.for.agreement"><span eb-msg="db.cart.global.validation.exceeds_daily_limit_for_agreement"></span></div><div eb-message-key="error.exceeds.single.limit.for.agreement"><span eb-msg="db.cart.global.validation.exceeds_single_limit_for_agreement"></span></div><div eb-message-key="error.user_no_rights_to_contract"><span eb-msg="db.cart.validation.user_no_rights_to_contract"></span></div><div eb-message-key="error.user_not_disposition_owner"><span eb-msg="db.cart.validation.user_not_disposition_owner"></span></div><div eb-message-key="error.lack.of.access.in.active.mode"><span eb-msg="db.cart.global.validation.passive_access"></span></div><div eb-message-key="error.user.has.no.rights.to.contract"><span eb-msg="db.cart.global.validation.passive_access"></span></div><div eb-message-key="error.payment.date.is.invalid.for.sorbnet"><span eb-msg="db.cart.global.validation.error.payment.date.is.invalid.for.sorbnet"></span></div></eb-validation-messages></div></eb-container><eb-options-under-list ng-show="cartListPromise.$$state.status === 1" ng-if="cartList.content.length > 0"><div class="under-list-option first-option"><a ng-click="selectAll()"><span ng-show="!allSelected" class="option-label" eb-msg="db.cart.content.options.checkAll"></span> <span ng-show="allSelected" class="option-label" eb-msg="db.cart.content.options.uncheckAll"></span></a></div><div class="under-list-option second-option"><a ng-click="cancelGroup()" ng-disabled="!anySelected"><span class="option-label" eb-msg="db.cart.content.options.cancelAll"></span></a></div><div class="under-list-option third-option"><a ng-click="acceptGroup()" ng-disabled="!anySelected"><span class="option-label" eb-msg="db.cart.content.options.acceptAll"></span></a></div></eb-options-under-list></ng-form></div>'),a.put("templates/dbnext-cart/0.0.8/views/cartView.html",'<eb-full-screen-widget miniapp-name="cart"><div class="cart"><div><div><eb-screen-content><div ui-view autoscroll="true"></div></eb-screen-content></div></div></div></eb-full-screen-widget>')}]);