var dbnextCalendarModule=angular.module("dbnext-calendar",["ebanking-shared"]).config(["translationsLoaderProvider","$urlRouterProvider","guiProvider","pathServiceProvider","stateServiceProvider",function(a,b,c,d,e){var f="de",g="dbnext",h="calendar",i=g+"."+h,j=g+"-"+h,k=f+"."+h;webComponentRegistry[j].simpleName="calendar",webComponentRegistry[j].startState=k+".content",c.registerElement(j),c.registerElement(j,"menu"),a.addTranslationsPath(d.generateRootPath(j)+"/i18n/messages_{{language}}.json"),b.when("/"+f+"/"+h,"/"+f+"/"+h+"/content"),e.state(f,{url:"/"+f,"abstract":!0,template:"<div ui-view></div>"}).state(k,{url:"/"+h,"abstract":!0,templateUrl:d.generateTemplatePath(j)+"/views/calendarView.html"}).state(k+".content",{url:"/content",templateUrl:d.generateTemplatePath(j)+"/views/calendarContent.html",controller:i+".ContentController"}).state(k+".details",{url:"/:id/details",templateUrl:d.generateTemplatePath(j)+"/views/calendarDetails.html",controller:i+".DetailsController"}).state(k+".form",{url:"/new",templateUrl:d.generateTemplatePath(j)+"/views/calendarForm.html","abstract":!0}).state(k+".form.event",{url:"/form",templateUrl:d.generateTemplatePath(j)+"/views/calendarNewEvent.html",controller:i+".NewEventController"}).state(k+".form.accept",{url:"/:eventDispositionId/accept",templateUrl:d.generateTemplatePath(j)+"/views/calendarNewEventAccept.html",controller:i+".NewEventAcceptController"}).state(k+".form.delete",{url:"/:eventDispositionId/delete",templateUrl:d.generateTemplatePath(j)+"/views/calendarDeleteEventAccept.html",controller:i+".DeleteEventAcceptController"})}]).run(function(){});dbnextCalendarModule.controller("dbnext.calendar.ContentController",["$scope","viewStateService","dbCldPeriodSummaryService","dbCldEntryService","initialState","$state",function(a,b,c,d,e,f){a.filterParams={summary:null,description:null,calendarTypesArray:[!0,!0,!0]},a.calendar={},null!=e&&angular.isDate(e.selectedDay)?(a.calendar.selectedDay=e.selectedDay,a.filterParams=e):a.calendar.selectedDay=new Date,a.filterOptions={eventName:""},a.$watch("calendar.selectedDay",function(c,e){angular.isDate(c)&&(a.filterParams.selectedDay=c,b.resetInitialState("de.calendar.form.event"),b.resetInitialState(f.current.name),b.setInitialState(f.current.name,a.filterParams),b.setInitialState("de.calendar.form.event",c),a.eventsListPromise=d.search({dateFrom:c,dateTo:c,pageSize:100,description:a.filterParams.summary,calendarTypes:a.filterParams.calendarTypes}).then(function(b){a.eventsList=b}))}),b.resetAllStates(),a.submitFilter=function(){a.$broadcast("refreshEvents")},a.prepareEdit=function(a){b.resetInitialState("de.calendar.form.event"),b.setInitialState("de.calendar.form.event",a),f.go("de.calendar.form.event")},a.showFilter=!1,a.showClearFilter=!1;a.showFilterWindow=function(){a.showFilter=!a.showFilter},a.clearFilter=function(){a.$broadcast("resetFilter"),a.filterParams={summary:null,description:null,calendarTypesArray:[!0,!0,!0]},a.showClearFilter=!1};var g={summary:null,description:null,calendarTypesArray:[!0,!0,!0]};a.$watch("filterParams",function(b,c){b.summary!=g.summary||b.description!=g.description||b.calendarTypesArray.join()!=g.calendarTypesArray.join()?a.showClearFilter=!0:a.showClearFilter=!1},!0),a.fetchSummary=function(b){return a.filterParams=b,c.search(b).then(function(b){return a.eventsListPromise=d.search({dateFrom:a.calendar.selectedDay,dateTo:a.calendar.selectedDay,pageSize:100,description:a.filterParams.summary,calendarTypes:a.filterParams.calendarTypes}).then(function(c){return a.eventsList=c,b})})}}]),dbnextCalendarModule.controller("dbnext.calendar.DeleteEventAcceptController",["$scope","initialState","viewStateService","$modal","$state","$stateParams","staticFind","accountsService","language","dbCldCalendarNotificationService","dbCldEntryService",function(a,b,c,d,e,f,g,h,i,j,k){if(a.formData={},a.formData.isEditionFromDetails=!1,a.formData.isEditionFromMainList=!1,null!=c.getInitialState(e.current.name))if(angular.isDefined(c.getFormData("formData")))a.formData=c.getFormData("formData");else{var l=c.getInitialState(e.current.name);angular.isDefined(l.comingFormDetails)&&l.comingFormDetails?a.formData.isEditionFromDetails=!0:a.formData.isEditionFromMainList=!0,a.formData.formModel={},a.formData.formModel.id=l.id,a.formData.formModel.eventDate=l.startDate,a.formData.formModel.title=l.summary,a.formData.formModel.description=l.description,a.formData.formModel._links=l._links}a.accept=function(){return k.action({id:a.formData.formModel.id,summary:a.formData.formModel.title,startDate:a.formData.formModel.eventDate,description:a.formData.formModel.description,calendarType:21,categories:""},"delete_calendar_entry",a.formData.formModel).then(function(a){c.resetInitialState("de.calendar.form.event"),e.go("de.calendar.content"),j.showEventDeletedDialog()})},a.back=function(){a.formData.isEditionFromDetails?e.go("de.calendar.details"):e.go("de.calendar.content")}}]),dbnextCalendarModule.controller("dbnext.calendar.DetailsController",["$scope","viewStateService","dbCldEntryService","initialState","resourceViewService","$state",function(a,b,c,d,e,f){a.calendarDetailsPromise=c.get(d.calendarEntryId).then(function(b){a.details=b,a.details.comingFormDetails=!0,a.details.relatedResourceDisplayLinkDetails=[];for(var c=0;c<b.relatedResources.length;c++)a.details.relatedResourceDisplayLinkDetails[c]=e.getResourceViewForResource(b.relatedResources[c].resourceType)}),a.goToRelatedResourceDetails=function(c){b.setInitialState(a.details.relatedResourceDisplayLinkDetails[c].linkEntryState,{id:a.details.relatedResources[c].resourceId,backState:f.current.name}),f.go(a.details.relatedResourceDisplayLinkDetails[c].linkEntryState,{id:a.details.relatedResources[c].resourceId,backState:f.current.name})},a.editEvent=function(a){b.resetInitialState("de.calendar.form.event"),b.setInitialState("de.calendar.form.event",a),f.go("de.calendar.form.event")}}]),dbnextCalendarModule.controller("dbnext.calendar.NewEventAcceptController",["$scope","initialState","viewStateService","$modal","$state","$stateParams","staticFind","accountsService","language","dbCldCalendarNotificationService","dbCldEntryService",function(a,b,c,d,e,f,g,h,i,j,k){null!=c.getInitialState(e.current.name)&&(a.formData=c.getInitialState(e.current.name)),a.accept=function(){return angular.isDefined(a.formData.isEditionFromMainList)&&a.formData.isEditionFromMainList||angular.isDefined(a.formData.isEditionFromDetails)&&a.formData.isEditionFromDetails?void a.acceptEdition():k.action({summary:a.formData.formModel.title,startDate:a.formData.formModel.eventDate,description:a.formData.formModel.description,calendarSymbol:"UserCalendar",categories:""},"create_calendar_entry").then(function(b){c.resetInitialState("de.calendar.form.event"),c.resetInitialState("de.calendar.content"),c.setInitialState("de.calendar.content",a.formData.formModel.eventDate),c.setInitialState("de.calendar.form.event",a.formData.formModel.eventDate),e.go("de.calendar.content"),j.showEventAcceptedDialog(b)})},a.acceptEdition=function(){return k.action({id:a.formData.formModel.id,summary:a.formData.formModel.title,startDate:a.formData.formModel.eventDate,description:a.formData.formModel.description,calendarSymbol:"UserCalendar",categories:""},"modify_calendar_entry",a.formData.formModel).then(function(b){c.resetInitialState("de.calendar.form.event"),c.resetInitialState("de.calendar.content"),c.setInitialState("de.calendar.content",a.formData.formModel.eventDate),c.setInitialState("de.calendar.form.event",a.formData.formModel.eventDate),e.go("de.calendar.content"),j.showEventEditedDialog(b)})},a.change=function(b){c.setInitialState("de.calendar.form.event",a.formData),e.go("de.calendar.form.event")}}]),dbnextCalendarModule.controller("dbnext.calendar.NewEventController",["$scope","$rootScope","$timeout","$log","$filter","toaster","$state","$stateParams","initialState","viewStateService","translate",function(a,b,c,d,e,f,g,h,i,j,k){a.formData={},a.formData.isEditionFromMainList=!1,a.formData.isEditionFromDetails=!1;var l=(new Date).getFullYear();if(a.maxDate=new Date((++l),11,31),null!=j.getInitialState(g.current.name))if(angular.isDefined(j.getFormData("formData")))a.formData=j.getFormData("formData");else if(angular.isDate(j.getInitialState(g.current.name))){var m=j.getInitialState(g.current.name);a.formData.formModel={},a.formData.formModel.eventDate=new Date(m)}else{var n=j.getInitialState(g.current.name);angular.isDefined(n.comingFormDetails)&&n.comingFormDetails?a.formData.isEditionFromDetails=!0:a.formData.isEditionFromMainList=!0,a.formData.formModel={},a.formData.formModel.id=n.id,a.formData.formModel.eventDate=new Date(n.startDate),a.formData.formModel.title=n.summary,a.formData.formModel.description=n.description,a.formData.formModel._links=n._links}var o=function(a){for(var b in a)b&&angular.isDefined(a[b])&&angular.isDefined(a[b].$setDirty)&&a[b].$setDirty();a.$setDirty()};a.submit=function(b){angular.element(document.querySelector(":focus")).triggerHandler("blur"),console.log(b),b.$valid?(j.setInitialState(g.current.name,{}),j.appendFormData("formData",a.formData),j.setInitialState("de.calendar.form.accept",a.formData),g.go("de.calendar.form.accept")):o(b)}}]),dbnextCalendarModule.controller("dbnext.calendar.ViewController",["$scope","$rootScope","$route","$location","$timeout","$modal","$log","$filter","$speechRecognition",function(a,b,c,d,e,f,g,h,i){a.hello="hello CalendarController",a.handleDrop=function(){alert("Item has been dropped")}}]),dbnextCalendarModule.directive("dbCldCalendar",["pathService","dbCldUtilsService","$q","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,scope:{loadEvents:"&?",currentDate:"=?",filterParams:"="},templateUrl:a.generateTemplatePath("dbnext-calendar")+"/directives/dbCldCalendar/dbCldCalendar.html",link:function(a,e,f){function g(a){var c=a.getFullYear(),d=a.getMonth(),e=new Date(c,d,1),f=1-e.getDay(),g=f>0?7-f:-f,h=new Date(e);g>0&&h.setDate(-g+1);var i=b.getDates(h,42,d),j=b.splitArray(i,7),k=j[j.length-1];return k[0].date.getMonth()!=d&&(j=j.slice(0,j.length-1)),j}function h(b){if(angular.isDefined(f.loadEvents)){var e=b[0][0].date,g=b[b.length-1],h=g[g.length-1],i=h.date,j={dateFrom:e,dateTo:i,groupingPeriodType:"DAY",pageSize:42};return a.eventsPromise=a.loadEvents({params:angular.extend(a.filterParams,j)}).then(function(a){if(null!=a&&angular.isArray(a.content))for(var c=b.length-1;c>=0;c--)for(var d=b[c].length-1;d>=0;d--){var e=a.content.filter(function(a,e,f){var g=new Date(a.dateFrom);return g.getMonth()==b[c][d].date.getMonth()&&g.getDate()==b[c][d].day});b[c][d].events=e[0]}return b},function(){return d.error("error getting events summary"),b}),a.eventsPromise}return c.when(b)}a.today=new Date,a.today.setHours(12,0,0,0),a.selectedDay=b.getDate(a.today),a.year=a.today.getFullYear(),a.month=a.today.getMonth(),a.yearFrom=a.year,a.yearTo=a.year+1,null!=a.currentDate&&(a.selectedDay=b.getDate(a.currentDate),a.year=a.currentDate.getFullYear(),a.month=a.currentDate.getMonth()),a.firstDayOfMonth=new Date(a.year,a.month,1),a.lastDayOfMonth=new Date(a.year,a.month+1,0),a.displayedWeeks=g(new Date(a.year,a.month,1)),h(a.displayedWeeks),a.labels=b.getDaysLabels(),a.goToPrevMonth=function(){var b=1;a.year=a.month-b<0?--a.year:a.year,a.month=a.month-b<0?12+a.month-b:a.month-b,a.firstDayOfMonth=new Date(a.year,a.month,1),a.lastDayOfMonth=new Date(a.year,a.month+1,0),a.displayedWeeks=g(new Date(a.year,a.month,1)),h(a.displayedWeeks)},a.goToNextMonth=function(){var b=1;a.year=a.month+b>11?++a.year:a.year,a.month=a.month+b>11?a.month+b-12:a.month+b,a.firstDayOfMonth=new Date(a.year,a.month,1),a.lastDayOfMonth=new Date(a.year,a.month+1,0),a.displayedWeeks=g(new Date(a.year,a.month,1)),h(a.displayedWeeks)},a.selectDay=function(b){b.currentMonth&&(a.selectedDay=b,a.currentDate=b.date)},a.$on("refreshEvents",function(b,c){h(a.displayedWeeks)})}}}]),dbnextCalendarModule.directive("dbCldEventDescriptionTextarea",["pathService","translate","ebTheming",function(a,b,c){return{restrict:"EA",replace:!0,scope:{placeholder:"@",ngModel:"=",ebName:"@"},templateUrl:a.generateTemplatePath("dbnext-calendar")+"/directives/dbCldEventDescriptionTextarea/dbCldEventDescriptionTextarea.html",link:function(a,b,d,e){c.applyTheme(b)}}}]),dbnextCalendarModule.directive("dbCldEventTitleInput",["pathService","translate","ebTheming",function(a,b,c){return{restrict:"EA",replace:!0,require:"ngModel",scope:{placeholder:"@",ngModel:"=",ebName:"@"},templateUrl:a.generateTemplatePath("dbnext-calendar")+"/directives/dbCldEventTitleInput/dbCldEventTitleInput.html",link:function(a,b,d,e){c.applyTheme(b);var f=b.find("input");a.$watch("ngModel",function(b,c){b&&b.length>255&&(a.ngModel=c)}),a.trimAfterPaste=function(b){var c=f[0].selectionStart,d=f[0].selectionEnd,e=f.val(),g=b.clipboardData.getData("text/plain");if(c==d){(e+g).length>255&&(g=g.substr(0,255-e.length));var h=e.substr(0,c)+g+e.substr(c,e.length);f.val(h),f[0].setSelectionRange(c+g.length,d+g.length),b.preventDefault()}else g.length>d-c&&(g=g.substr(0,d-c),f.val(text.substr(0,c)+g+e.substr(d,e.length)),f[0].setSelectionRange(d,d),b.preventDefault());a.ngModel=f.val()}}}}]),dbnextCalendarModule.directive("dbCldEventsFilter",["$compile","ebTheming","commonService","$rootScope","$timeout","$log","$http","$templateCache","pathService","formService","$state","$filter","$window","dbCldTypeService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"EA",replace:!0,transclude:!0,scope:{ngModel:"=",callback:"&"},templateUrl:i.generateTemplatePath("dbnext-calendar")+"/directives/dbCldEventsFilter/dbCldEventsFilter.html",link:function(a,c,d){b.applyTheme(c),a.submitFilter=function(b){b.$valid&&(j.scrollTo("calendarEventList"),a.ngModel.description=a.ngModel.summary,a.ngModel.pageNumber=1,a.ngModel.calendarTypes=a.getChosenCalendarSymbols(),a.callback())},a.$on("resetFilter",function(b,c){a.ngModel.summary="",a.ngModel.description=a.ngModel.summary,a.ngModel.pageNumber=1,a.ngModel.calendarTypesArray=[!0,!0,!0],a.ngModel.calendarTypes=a.getChosenCalendarSymbols()}),a.getChosenCalendarSymbols=function(){for(var b=[],c=0;c<a.ngModel.calendarTypesArray.length;c++)a.ngModel.calendarTypesArray[c]&&b.push(a.calendarTypes[c].calendarSymbol);return b};var e=[];n.get(e).then(function(b){a.calendarTypes=b.content})}}}]),dbnextCalendarModule.controller("dbnext.calendar.MenuElementController",["$scope","$rootScope",function(a,b){a.isStateActive=b.isStateActive}]),dbnextCalendarModule.controller("dbnext.calendar.WidgetController",["$scope","$rootScope","$location","$timeout","dbCldEntryService","pathService",function(a,b,c,d,e,f){var g=new Date,h=new Date(g);h.setDate(g.getDate()+90),a.params={dateFrom:g,dateTo:h},a.eventsPromise=e.search(a.params).then(function(b){a.eventsList=b,a.$broadcast("dataLoaded")}),a.submit=function(b,c,d){if(angular.isDefined(b))return c=angular.extend(c,a.params),e.relationSearch(b,c,d).then(function(a){return a})},a.widgetContent=f.generateTemplatePath("dbnext-calendar")+"/elements/widget/calendar-widgetElementViewContent.html"}]),dbnextCalendarModule.service("dbCldUnitService",["resourceServiceFactory","$q","$timeout","userService",function(a,b,c,d){var e=a.create("calendar_unit");return{search:function(a){return d.getIdentityDetails().then(function(b){return e.search(angular.extend({accessProfileId:b.accessProfileId},a)).then(function(a){return a})})}}}]),dbnextCalendarModule.service("dbCldEntryService",["resourceServiceFactory","$q","$timeout","userService",function(a,b,c,d){var e=a.create("calendar_entry");return{action:function(a,c,f){return d.getIdentityDetails().then(function(d){return e.action(angular.extend({accessProfileId:d.accessProfileId,customerId:d.id},a),c,f).then(function(a){return a},function(){return b.reject("Błąd serwera")})})},get:function(a,c){return d.getIdentityDetails().then(function(d){return e.get(a,angular.extend({accessProfileId:d.accessProfileId,customerId:d.id,calendarEntryId:a},c)).then(function(a){return a},function(){return b.reject("Błąd serwera")})})},search:function(a){return d.getIdentityDetails().then(function(b){return e.searchByPost(angular.extend({accessProfileId:b.accessProfileId},a)).then(function(a){return a})})},relationSearch:function(a,b,c){return d.getIdentityDetails().then(function(d){return e.relationSearch(a,angular.extend({accessProfileId:d.accessProfileId},b),c).then(function(a){return a})})}}}]),dbnextCalendarModule.service("dbCldPeriodSummaryService",["resourceServiceFactory","$q","$timeout","userService",function(a,b,c,d){var e=a.create("calendar_period_summary");return{search:function(a){return d.getIdentityDetails().then(function(b){var c={customerId:b.id,accessProfileId:b.accessProfileId};return angular.extend(c,a),e.searchByPost(c).then(function(a){return a})})}}}]),dbnextCalendarModule.service("dbCldTypeService",["resourceServiceFactory","$q","$timeout","userService",function(a,b,c,d){var e=a.create("calendar_type");return{get:function(a){return e.search(a).then(function(a){return a})}}}]),dbnextCalendarModule.service("dbCldCalendarNotificationService",["$modal","$state","translate","viewStateService",function(a,b,c,d){return{showEventAcceptedDialog:function(e){var f=a.open({template:'<eb-choice-dialog eb-icon="{{icoClass}}" eb-title="{{::\'db.calendar.accept.notification.title\'|translate}}" eb-message="{{::confirmationText}}" eb-on-close="cancel()" eb-choices="choices"></eb-choice-dialog>',windowClass:"eb-choice-dialog",backdropClass:"always-on",controller:["$scope",function(a){var g="eb-icon-confirm-success success",h="";switch(e.status){case"REJECTED":g="eb-icon-confirm-error error",h=c.property("db.calendar.accept.notification.rejected")+e.reason;break;default:g="eb-icon-confirm-success success",h=c.property("db.calendar.accept.notification.default")}angular.extend(a,{cancel:function(){f.dismiss()},choices:[{type:"full-rounded positive primary",name:c.property("db.calendar.accept.notification.new"),make:function(){f.dismiss(),d.resetInitialState("de.calendar.form.event"),b.go("de.calendar.form.event")}},{type:"full-text",name:c.property("db.calendar.notification.back"),make:function(){f.dismiss(),b.go("de.dashboard")}}],icoClass:g,confirmationText:h})}]})},showEventEditedDialog:function(e){var f=a.open({template:'<eb-choice-dialog eb-icon="{{icoClass}}" eb-title="{{::\'db.calendar.accept.notification.title\'|translate}}" eb-message="{{::confirmationText}}" eb-on-close="cancel()" eb-choices="choices"></eb-choice-dialog>',windowClass:"eb-choice-dialog",backdropClass:"always-on",controller:["$scope",function(a){var g="eb-icon-confirm-success success",h="";switch(e.status){case"REJECTED":g="eb-icon-confirm-error error",h=c.property("db.calendar.accept.notification.rejected")+e.reason;break;default:g="eb-icon-confirm-success success",h=c.property("db.calendar.accept.edit.notification.default")}angular.extend(a,{cancel:function(){f.dismiss()},choices:[{type:"full-rounded positive primary",name:c.property("db.calendar.accept.edit.notification.new"),make:function(){f.dismiss(),d.resetInitialState("de.calendar.form.event"),b.go("de.calendar.form.event")}},{type:"full-text",name:c.property("db.calendar.notification.back"),make:function(){f.dismiss(),b.go("de.dashboard")}}],icoClass:g,confirmationText:h})}]})},showEventDeletedDialog:function(){var d=a.open({template:'<eb-choice-dialog eb-icon="eb-icon-confirm-success success" eb-title="{{ title }}" eb-message="{{ message }}" eb-on-close="cancel()" eb-choices="choices"></eb-choice-dialog>',windowClass:"eb-choice-dialog",backdropClass:"always-on",controller:["$scope",function(a){angular.extend(a,{title:c.property("db.calendar.accept.notification.title"),message:c.property("db.calendar.accept.delete.notification.default"),cancel:function(){d.dismiss()},choices:[{type:"full-text",name:c.property("db.calendar.notification.back"),make:function(){d.dismiss(),b.go("de.dashboard")}}]})}]})}}}]),dbnextCalendarModule.service("dbCldUtilsService",["dateFilter",function(a){return{getDaysLabels:function(){var b=new Array(7),c=new Date;c.setDate(c.getDate()-c.getDay()+1);for(var d=new Date(c),e=0;e<7;e++)b[e]={dayOfWeek:d.getDay(),abbr:a(d,"EEE"),full:a(d,"EEEE")},d.setDate(d.getDate()+1);return b},getDates:function(a,b,c){var d=new Date;d.setHours(12,0,0,0);var e=new Array(b),f=new Date(a),g=0;for(f.setHours(12,0,0,0);g<b;){var h=new Date(f),i=h.getDay();e[g++]={day:h.getDate(),today:d.getTime()==h.getTime(),weekend:6===i||0===i,currentMonth:c===h.getMonth(),date:h,timestamp:h.getTime()},f.setDate(f.getDate()+1)}return e},getDate:function(a){var b=new Date;b.setHours(12,0,0,0),a.setHours(12,0,0,0);var c=new Date(a),d=c.getDay(),e={day:c.getDate(),today:b.getTime()==c.getTime(),weekend:6===d||0===d,currentMonth:b.getMonth()===c.getMonth(),date:c,timestamp:c.getTime()};return e},splitArray:function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}}}]),angular.module("dbnext-calendar").run(["$templateCache",function(a){a.put("templates/dbnext-calendar/0.0.7/directives/dbCldCalendar/dbCldCalendar.html",'<div class="ebc-calendar"><div class="ebc-control"><div class="prev-month" ng-click="goToPrevMonth()" ng-hide="year == yearFrom && month == 0"><i eb-themable class="eb-icon eb-ico-back"></i></div><div class="current">{{firstDayOfMonth | date:"MMMM yyyy"}}</div><div class="next-month" ng-click="goToNextMonth()" ng-hide="year == yearTo && month == 11"><i eb-themable class="eb-icon eb-ico-next"></i></div></div><div class="ebc-head"><div class="ebc-row"><div ng-repeat="label in labels" class="ebc-cell" ng-class="{\'ebc-weekend\': label.dayOfWeek == 6 || label.dayOfWeek == 0}"><span class="label-full">{{label.full}}</span><span class="label-abbr">{{label.abbr}}</span></div></div></div><div class="ebc-body"><div class="ebc-row" ng-repeat="week in displayedWeeks"><div ng-repeat="day in week" class="ebc-cell" ng-class="{\'ebc-today\': day.today, \'ebc-weekend\': day.weekend, \'ebc-difference\': !day.currentMonth, \'ebc-active\': day.timestamp == selectedDay.timestamp}" ng-click="selectDay(day)" id="{{day.today ? \'today\': \'day\' + day.day}}"><div class="ebc-date"><span class="ebc-month-abbrev" ng-show="day.day == 1">{{day.date | date:\'MMM\'}}&nbsp;</span>{{day.day | numberFixedLen:1}}</div><div class="event-indicator" ng-class="{\'event-dot\': day.events.totalCount > 0}"></div></div></div></div></div>'),a.put("templates/dbnext-calendar/0.0.7/directives/dbCldEventDescriptionTextarea/dbCldEventDescriptionTextarea.html",'<div class="event-description-textarea"><textarea placeholder="{{::placeholder|translate}}" name="{{ebName}}" maxlength="2000" ng-required="true" ng-model="ngModel" ng-pattern="/^[ABCDEFGHIJKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz1234567890\\u0104\\u0105\\u015a\\u015b\\u0118\\u0119\\u017b\\u017c\\u0179\\u017a\\u0106\\u0107\\u0143\\u0144\\u0141\\u0142\\u00d3\\u00f3\\u0022 ~`!@#%^&*()_+-={}\\[\\]\\:;\'?,./\\n\\r\\t\\\\\\>$äÄöÖüÜß]*$/"></textarea></div>'),a.put("templates/dbnext-calendar/0.0.7/directives/dbCldEventTitleInput/dbCldEventTitleInput.html",'<div><input type="text" placeholder="{{::placeholder|translate}}" ng-paste="trimAfterPaste($event)" class="event-title-input" name="{{ebName}}" ng-model="ngModel" ng-required="true" ng-pattern="/^[ABCDEFGHIJKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz1234567890\\u0104\\u0105\\u015a\\u015b\\u0118\\u0119\\u017b\\u017c\\u0179\\u017a\\u0106\\u0107\\u0143\\u0144\\u0141\\u0142\\u00d3\\u00f3\\u0022 ~`!@#%^&*()_+-={}\\[\\]\\:;\'?,./\\n\\r\\t\\\\\\>$äÄöÖüÜß]*$/"></div>'),a.put("templates/dbnext-calendar/0.0.7/directives/dbCldEventsFilter/dbCldEventsFilter.html",'<form name="calendarFilterForm" novalidate><div eb-themable class="list-filter"><div class="transaction-filter-container"><div class="account-filter-padding-detail"><eb-responsive-row label="db.calendar.filter.label.eventName" label-for="title"><input type="text" class="title-input" placeholder="{{::\'db.calendar.filter.placeholder.eventName\'|translate}}" id="title" ng-model="ngModel.summary" maxlength="35"></eb-responsive-row><eb-responsive-row label="db.calendar.filter.label.calendarTypes" center label-for="cldFilterTypes"><div id="cldFilterTypes"><div ng-repeat="cldType in calendarTypes" class="calendar-filter-types"><div eb-checkbox eb-model="ngModel.calendarTypesArray[$index]" class="exchange-checkbox" eb-name="{{cldType.calendarSymbol}}"></div><span ng-click="ngModel.calendarTypesArray[$index] = !ngModel.calendarTypesArray[$index]" class="exchange-message" eb-msg="{{\'db.calendar.filter.label.type.\' + cldType.calendarSymbol}}"></span></div></div></eb-responsive-row><eb-action-footer submit-label="transaction.filter.label.button" submit-action="submitFilter(calendarFilterForm)"></eb-action-footer></div></div></div></form>'),a.put("templates/dbnext-calendar/0.0.7/elements/menu/calendar-menuElementView.html",'<li ng-class="{\'active\': isStateActive(\'de.calendar\')}" ng-controller="dbnext.calendar.MenuElementController" ui-sref="de.calendar.content"><span eb-themable class="eb-icon eb-ico-widget-calendar"></span> <span eb-msg="calendar.title"></span></li>'),a.put("templates/dbnext-calendar/0.0.7/elements/widget/calendar-widgetElementView.html",'<span ng-controller="dbnext.calendar.WidgetController" ng-cloak><span db-lay-tile miniapp-name="dbnext-calendar"><eb-slide-widget class="calendar-widget" content="{{widgetContent}}" items="eventsList" max-indicators="10" eb-items-promise="eventsPromise" eb-update="submit(ctx, params, rel)"></eb-slide-widget><div ng-if="eventsPromise.$$state.status === 1 && eventsList.content.length == 0" class="widget-content"><div class="widget-content-inner info-text">{{::\'db.calendar.widget.empty_list.no_events\'|translate}}<br></div></div><div class="box-action-panel" ng-click="$event.stopPropagation()"><div class="action-button"><eb-button ui-sref="de.calendar.form.event" class="primary icon-right eb-icon eb-ico-plus"><i eb-themable class="eb-icon eb-ico-date-input widget-action-icon"></i><span eb-msg="db.calendar.widget.view.new_event"></span></eb-button></div></div></span></span>'),a.put("templates/dbnext-calendar/0.0.7/elements/widget/calendar-widgetElementViewContent.html",'<div class="widget-content calendar"><div class="event-header">{{item.startDate | dateFilter}}</div><div class="event-description">{{item.summary}}</div></div>'),a.put("templates/dbnext-calendar/0.0.7/views/calendarContent.html",'<eb-mini-bar search-text="filterOptions.eventName" eb-disable-more="true" eb-search-placeholder="{{::\'db.calendar.content.mini_bar.placeholder\'|translate}}" add-icon-name="eb-ico-date-input" add-url="de.calendar.form.event" add-title="{{::\'db.calendar.content.mini_bar.title\'|translate}}"></eb-mini-bar><div class="content-wrapper"><div class="eb-filter-header-container"><div class="row eb-filter-header"><span eb-container class="padding small"><div class="col-xs-6 col-md-6 text-left eb-filter-clean"><span ng-show="showClearFilter" ng-click="clearFilter()" style="cursor: pointer" eb-msg="transaction.filter.label.clear"></span></div><div class="col-xs-6 col-md-6 text-right eb-filter-switch" ng-class="{\'pull-right\': !showFilter}"><div ng-click="showFilterWindow()" style="cursor: pointer"><i eb-themable class="eb-icon" style="font-size: 1.3em" ng-class="{\'eb-ico-filter-applied\': showFilter == true , \'eb-ico-filter-show\': showFilter == false}"></i> <span ng-if="showFilter" class="link" eb-msg="transaction.filter.label.hide"></span> <span ng-if="!showFilter" class="link" eb-msg="transaction.filter.label.show"></span></div></div></span></div></div><div ng-show="showFilter"><div db-cld-events-filter ng-model="filterParams" callback="submitFilter()"></div></div></div><div class="content-wrapper"><div class="calendar-content"><eb-container class="padding small"><div db-cld-calendar filter-params="filterParams" load-events="fetchSummary(params)" current-date="calendar.selectedDay"></div><!-- no whitespace to fix 2 x 50%--><div class="calendar-list-title">{{::"db.calendar.content.list.title"|translate}}{{calendar.selectedDay | dateFilter}}</div></eb-container><div eb-themable><div eb-list class="events-list" id="calendarEventList" eb-promise="eventsListPromise"><div eb-list-item class="row" ng-repeat="event in eventsList.content | filter: {summary: filterOptions.eventName}"><div eb-list-item-content class="item-content-with-actions"><div class="actions-cell" ng-click="$event.stopPropagation()"><div class="options"><div eb-list-options><li><a class="option-row" ui-sref="^.details" store-context="event"><span eb-themable class="eb-icon eb-ico-details options-icon"></span> <span class="option-label" eb-msg="db.calendar.content.list.options.details"></span></a></li><li ng-if="event._links.modify_calendar_entry"><a class="option-row" ng-click="prepareEdit(event)"><span eb-themable class="eb-icon eb-ico-edit options-icon"></span> <span class="option-label" eb-msg="db.calendar.content.list.options.edit"></span></a></li><li ng-if="event._links.delete_calendar_entry"><a class="option-row" ui-sref="de.calendar.form.delete" store-context="event"><span eb-themable class="eb-icon eb-ico-close options-icon"></span> <span class="option-label" eb-msg="db.calendar.content.list.options.delete"></span></a></li></div></div></div><div class="content-cell cell_4_in_4"><span>{{event.summary}}</span></div></div></div><div class="miniapp-empty-list" ng-if="(eventsList.content.length == 0) || ((eventsList.content | filter: {summary: filterOptions.eventName}).length == 0)">{{::"db.calendar.content.list.empty_list"|translate}}</div></div></div></div></div>'),a.put("templates/dbnext-calendar/0.0.7/views/calendarDeleteEventAccept.html",'<div><div><div class="step2 inner-form-padding center-form"><div class="panel-details"><eb-section-header ng-if="formData.isEditionFromMainList" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.accept.delete.header" back-state="de.calendar.content"></eb-section-header><eb-section-header ng-if="formData.isEditionFromDetails" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.accept.delete.header" back-state="de.calendar.details"></eb-section-header><div class="form-body form-body-step2"><div class="calendar-wrap-content" eb-responsive-row label="db.calendar.form.accept.title.label"><div><p style="margin: 0">{{::formData.formModel.title}}</p></div></div><div class="calendar-wrap-content" eb-responsive-row label="db.calendar.form.accept.date.label"><div><p style="margin: 0">{{::formData.formModel.eventDate | dateFilter}}</p></div></div><div class="calendar-wrap-content" eb-responsive-row label="db.calendar.form.accept.description.label"><div><p style="margin: 0">{{::formData.formModel.description}}</p></div></div></div><div class="shaded-section"><eb-action-footer cancel-label="db.calendar.form.delete.accept.back" submit-label="db.calendar.form.accept.delete.submit" cancel-action="back()" submit-action="accept()"></eb-action-footer></div></div></div></div></div>'),a.put("templates/dbnext-calendar/0.0.7/views/calendarDetails.html",'<div eb-themable class="event-details"><div ng-show="calendarDetailsPromise.$$state.status === 1"><div eb-section-header eb-header="db.calendar.details.label.header" back-state="de.calendar.content" options><div class="actions-cell" ng-click="$event.stopPropagation()"><div class="options" ng-show="details._links.modify_calendar_entry || details._links.delete_calendar_entry"><div eb-list-options><li ng-if="details._links.modify_calendar_entry"><a class="option-row" ng-click="editEvent(details)"><span eb-themable class="eb-icon eb-ico-edit options-icon"></span> <span class="option-label" eb-msg="db.calendar.content.list.options.edit"></span></a></li><li ng-if="details._links.delete_calendar_entry"><a class="option-row" ui-sref="de.calendar.form.delete" store-context="details"><span eb-themable class="eb-icon eb-ico-close options-icon"></span> <span class="option-label" eb-msg="db.calendar.content.list.options.delete"></span></a></li></div></div></div></div><div class="details-body" ng-if="details != null"><div><div class="light">{{details.startDate | dateFilter}}</div><div class="calendar-details-content">{{details.summary | emptyFilter}}</div></div><div class="calendar-details-content">{{details.description}}</div><div ng-show="details.relatedResourceDisplayLinkDetails" class="event-link"><div ng-repeat="linkDetails in details.relatedResourceDisplayLinkDetails track by $index"><a href="javascript:void(0)" ng-click="goToRelatedResourceDetails($index)"><span eb-msg reference-key="linkDetails.linkTextKey"></span></a></div></div></div></div><eb-preloader eb-promise="calendarDetailsPromise" class="eb-preloader-default"></eb-preloader></div>'),
a.put("templates/dbnext-calendar/0.0.7/views/calendarForm.html",'<div class="inner-payment-form center-app-header"><eb-content-navigation></eb-content-navigation><form name="eventAddForm" novalidate ng-submit="submit(eventAddForm)"><div><div id="form-views" ui-view autoscroll="true"></div></div></form></div>'),a.put("templates/dbnext-calendar/0.0.7/views/calendarNewEvent.html",'<eb-content-navigation></eb-content-navigation><div><div class="inner-form-padding center-form"><div eb-themable><eb-section-header ng-if="!formData.isEditionFromMainList && !formData.isEditionFromDetails" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.header" back-state="de.calendar.content"></eb-section-header><eb-section-header ng-if="formData.isEditionFromMainList" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.edit.header" back-state="de.calendar.content"></eb-section-header><eb-section-header ng-if="formData.isEditionFromDetails" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.edit.header" back-state="de.calendar.details"></eb-section-header><div class="form-body form-body-step1"><div eb-responsive-row label="db.calendar.form.title.label"><div db-cld-event-title-input placeholder="db.calendar.form.title.placeholder" eb-name="title" ng-required="true" ng-model="formData.formModel.title"></div><eb-validation-messages eb-name="title"><div eb-message-key="required"><span eb-msg="db.calendar.form.validation.title.required"></span></div><div eb-message-key="calendar.event.title.NotNull"><span eb-msg="db.calendar.form.validation.title.required"></span></div><div eb-message-key="pattern"><span eb-msg="db.calendar.form.validation.title.pattern"></span></div></eb-validation-messages></div><div eb-responsive-row label="db.calendar.form.date.label"><div eb-date-input ng-model="formData.formModel.eventDate" eb-max-date="maxDate" eb-title="{{::\'db.calendar.form.date.placeholder\'|translate}}" date-format="dd.MM.yyyy" name="eventDate" eb-disable-weekend="false" eb-disable-past-dates="true" ng-required="true" date-input-validation-past></div><div eb-validation-messages eb-name="eventDate"><div eb-message-key="past"><span eb-msg="db.calendar.form.validation.date.past"></span></div><div eb-message-key="required"><span eb-msg="db.calendar.form.validation.date.required"></span></div><div eb-message-key="format"><span eb-msg="db.calendar.form.validation.date.format"></span></div><div eb-message-key="maxDate"><span eb-msg="db.calendar.form.validation.date.max"></span></div></div></div><div eb-responsive-row label="db.calendar.form.description.label"><div db-cld-event-description-textarea placeholder="db.calendar.form.description.placeholder" eb-name="description" ng-required="true" ng-model="formData.formModel.description"></div><eb-validation-messages eb-name="description"><div eb-message-key="required"><span eb-msg="db.calendar.form.validation.description.required"></span></div><div eb-message-key="notification.message.content.NotNull"><span eb-msg="db.calendar.form.validation.description.required"></span></div><div eb-message-key="pattern"><span eb-msg="db.calendar.form.validation.title.pattern"></span></div></eb-validation-messages></div><eb-action-footer ng-if="!formData.isEditionFromMainList && !formData.isEditionFromDetails" submit-label="db.calendar.form.submit" submit-action="submit(eventAddForm)"></eb-action-footer><eb-action-footer ng-if="formData.isEditionFromMainList || formData.isEditionFromDetails" submit-label="db.calendar.form.edit.submit" submit-action="submit(eventAddForm)"></eb-action-footer></div></div></div></div>'),a.put("templates/dbnext-calendar/0.0.7/views/calendarNewEventAccept.html",'<div><div><div class="step2 inner-form-padding center-form"><div class="panel-details"><eb-section-header ng-if="!formData.isEditionFromMainList && !formData.isEditionFromDetails" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.accept.header" back-state="de.calendar.content"></eb-section-header><eb-section-header ng-if="formData.isEditionFromMainList" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.accept.edit.header" back-state="de.calendar.content"></eb-section-header><eb-section-header ng-if="formData.isEditionFromDetails" style="padding-top:15px; padding-bottom: 15px" eb-header="db.calendar.form.accept.edit.header" back-state="de.calendar.details"></eb-section-header><div class="form-body form-body-step2"><div class="calendar-wrap-content" eb-responsive-row label="db.calendar.form.accept.title.label"><div><p style="margin: 0">{{::formData.formModel.title}}</p></div></div><div class="calendar-wrap-content" eb-responsive-row label="db.calendar.form.accept.date.label"><div><p style="margin: 0">{{::formData.formModel.eventDate | dateFilter}}</p></div></div><div class="calendar-wrap-content" eb-responsive-row label="db.calendar.form.accept.description.label"><div><p style="margin: 0">{{::formData.formModel.description}}</p></div></div></div><div class="shaded-section"><eb-action-footer ng-if="!formData.isEditionFromMainList && !formData.isEditionFromDetails" cancel-label="db.calendar.form.accept.correct" submit-label="db.calendar.form.accept.submit" cancel-action="change(eventDetails)" submit-action="accept()"></eb-action-footer><eb-action-footer ng-if="formData.isEditionFromMainList || formData.isEditionFromDetails" cancel-label="db.calendar.form.accept.correct" submit-label="db.calendar.form.accept.edit.submit" cancel-action="change(eventDetails)" submit-action="accept()"></eb-action-footer></div></div></div></div></div>'),a.put("templates/dbnext-calendar/0.0.7/views/calendarView.html",'<eb-full-screen-widget miniapp-name="calendar"><div class="calendar"><div><div><eb-screen-content><div ui-view autoscroll="true"></div></eb-screen-content></div></div></div></eb-full-screen-widget>')}]);